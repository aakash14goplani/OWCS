<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
	<!-- OpenMarket/Gator/AttributeTypes/IMAGEPICKER -->

	<presentation.getprimaryattributevalue NAME="Variables.PresInst" ATTRIBUTE="ASSETTYPENAME" VARNAME="ASSETTYPENAMEOUT" />
	<presentation.getprimaryattributevalue NAME="Variables.PresInst" ATTRIBUTE="ATTRIBUTETYPENAME" VARNAME="ATTRIBUTETYPENAMEOUT" />
	<presentation.getprimaryattributevalue NAME="Variables.PresInst" ATTRIBUTE="ATTRIBUTENAME" VARNAME="ATTRIBUTENAMEOUT" />
	<presentation.getprimaryattributevalue NAME="Variables.PresInst" ATTRIBUTE="CATEGORYATTRIBUTENAME" VARNAME="CATEGORYATTRIBUTENAMEOUT" />
	<presentation.getprimaryattributevalue NAME="Variables.PresInst" ATTRIBUTE="RESTRICTEDCATEGORYLIST" VARNAME="RESTRICTEDCATEGORYLISTOUT" />
	<!--
		added by Greg
	-->
	<IF COND="IsVariable.CATEGORYATTRIBUTENAMEOUT=false">
	<THEN>
		<SETVAR NAME="CATEGORYATTRIBUTENAMEOUT" VALUE="CS.Empty" />
	</THEN>
	</IF>
	
	<!-- added by Greg -->
	<IF COND="IsVariable.RESTRICTEDCATEGORYLISTOUT=false">
	<THEN>
		<SETVAR NAME="RESTRICTEDCATEGORYLISTOUT" VALUE="CS.Empty" />
	</THEN>
	</IF>
	
	<setvar NAME="currentAttrName" VALUE="Variables.currentAttrNameorDesc"/>

	<IF COND="Variables.MultiValueEntry=no">
	<THEN>
		<SETVAR NAME="my_attr_name" VALUE="Variables.cs_SingleInputName" />
		
		<IF COND="AttrValueList.#numRows=0">
		<THEN>
			<SETVAR NAME="thevalue" VALUE="Variables.empty" />
		</THEN>
		<ELSE>
			<SETVAR NAME="thevalue" VALUE="AttrValueList.value" />
		</ELSE>
		</IF>

		<INPUT TYPE="HIDDEN" NAME="Variables.my_attr_name" VALUE="Variables.thevalue" REPLACEALL="Variables.my_attr_name,Variables.thevalue" />

		<tr>
			<callelement
				NAME="OpenMarket/Gator/FlexibleAssets/Common/DisplayAttributeName" />
			<td></td>
			<td>
				<setvar NAME="doDefaultDisplay" VALUE="no" />
				<!-- Actual Field -->
				<IF COND="Variables.thevalue!=Variables.empty">
				<THEN>
					<ASSETSET.SETASSET NAME="theImage"
						TYPE="Variables.ASSETTYPENAMEOUT" ID="Variables.thevalue" />
					<ASSETSET.GETATTRIBUTEVALUES NAME="theImage"
						ATTRIBUTE="Variables.ATTRIBUTENAMEOUT" LISTVARNAME="imageList"
						TYPENAME="Variables.ATTRIBUTETYPENAMEOUT" />
				</THEN>
				</IF>
				<IF COND="Variables.cs_environment=ucform">
				<THEN>
					<callelement NAME="OpenMarket/Gator/AttributeTypes/IMAGEPICKERDnD" />
				</THEN>
				<ELSE>
					<![CDATA[
					<SCRIPT>
						var windowProperties = 'scrollbars=yes,resizable=yes,width=950,height=650,top=0,left=0';
					</SCRIPT>
					]]>
					<callelement NAME="OpenMarket/Gator/AttributeTypes/IMAGEPICKERDnD" />
					<div style="clear:both;">
						<a HREF=""
							onclick="javascript:window.open('ContentServer?pagename=OpenMarket/Gator/AttributeTypes/IMAGEPICKERShowImages&#38;fieldname=Variables.my_attr_name&#38;id=Variables.thevalue&#38;ATTRIBUTETYPENAMEOUT=Variables.ATTRIBUTETYPENAMEOUT&#38;ATTRIBUTENAMEOUT=Variables.ATTRIBUTENAMEOUT&#38;ASSETTYPENAMEOUT=Variables.ASSETTYPENAMEOUT&#38;CATEGORYATTRIBUTENAMEOUT=Variables.CATEGORYATTRIBUTENAMEOUT&#38;RESTRICTEDCATEGORYLISTOUT=Variables.RESTRICTEDCATEGORYLISTOUT&#38;ATTRIBUTEID=Variables.AttrID','templateSelect', windowProperties);return false;"
							REPLACEALL="Variables.ATTRIBUTETYPENAMEOUT,Variables.ATTRIBUTENAMEOUT,Variables.ASSETTYPENAMEOUT,Variables.CATEGORYATTRIBUTENAMEOUT,Variables.RESTRICTEDCATEGORYLISTOUT,Variables.my_attr_name,Variables.thevalue,Variables.AttrName,Variables.AttrID">
							<CALLELEMENT
								NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton">
								<ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Browse" />
							</CALLELEMENT>
						</a>
					</div>
					<XLAT.LOOKUP KEY="dvin/Util/FlexAssets/RemoveSelect"
						VARNAME="deleteALT" ENCODE="false" />
				</ELSE>
				</IF>
			</td>
		</tr>
	</THEN>
	<ELSE>
		<SETVAR NAME="my_attr_name" VALUE="Variables.cs_MultipleInputName" />
		
		<INPUT TYPE="HIDDEN" NAME="Variables.my_attr_name" VALUE="" REPLACEALL="Variables.my_attr_name" />
		
		<tr>
			<callelement NAME="OpenMarket/Gator/FlexibleAssets/Common/DisplayAttributeName" />
			<td>
				<BR />
			</td>
			<td>
				<setvar NAME="doDefaultDisplay" VALUE="no" />
				<!-- Actual Field -->
				<callelement NAME="OpenMarket/Gator/AttributeTypes/IMAGEPICKERDnD" />
				
				<IF COND="Variables.cs_environment!=ucform">
				<THEN>
					<![CDATA[
						<SCRIPT>
						    var windowProperties = 'scrollbars=yes,resizable=yes,width=950,height=650,top=0,left=0';
						</SCRIPT>
					]]>
					<div style="clear:both;">
						<a HREF=""
							onclick="javascript:window.open('ContentServer?pagename=OpenMarket/Gator/AttributeTypes/IMAGEPICKERShowImages&#38;fieldname=Variables.my_attr_name&#38;id=Variables.thevalue&#38;ATTRIBUTETYPENAMEOUT=Variables.ATTRIBUTETYPENAMEOUT&#38;ATTRIBUTENAMEOUT=Variables.ATTRIBUTENAMEOUT&#38;ASSETTYPENAMEOUT=Variables.ASSETTYPENAMEOUT&#38;CATEGORYATTRIBUTENAMEOUT=Variables.CATEGORYATTRIBUTENAMEOUT&#38;RESTRICTEDCATEGORYLISTOUT=Variables.RESTRICTEDCATEGORYLISTOUT&#38;ATTRIBUTEID=Variables.AttrID','templateSelect', windowProperties);return false;"
							REPLACEALL="Variables.ATTRIBUTETYPENAMEOUT,Variables.ATTRIBUTENAMEOUT,Variables.ASSETTYPENAMEOUT,Variables.CATEGORYATTRIBUTENAMEOUT,Variables.RESTRICTEDCATEGORYLISTOUT,Variables.my_attr_name,Variables.thevalue,Variables.AttrName,Variables.AttrID">
							<CALLELEMENT
								NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton">
								<ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Browse" />
							</CALLELEMENT>
						</a>
					</div>
					<XLAT.LOOKUP KEY="dvin/Util/FlexAssets/RemoveSelect"
						VARNAME="deleteALT" ENCODE="false" />
				</THEN>
				</IF>
			</td>
		</tr>
	</ELSE>
	</IF>
</FTCS> 
