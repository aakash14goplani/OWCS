<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Gator/AttributeTypes/CHECKBOXES
-
- INPUT
-
- OUTPUT
-
-->

<IF COND="Variables.MultiValueEntry=no">
<THEN>
	<CALLELEMENT NAME="OpenMarket/Gator/AttributeTypes/RADIOBUTTONS"/>
</THEN>
<ELSE>
	<presentation.getprimaryattributevalue NAME="Variables.PresInst" ATTRIBUTE="FONTSIZE" VARNAME="size"/>
	<presentation.getprimaryattributevalue NAME="Variables.PresInst" ATTRIBUTE="LAYOUT" VARNAME="layout"/>
	<presentation.getprimarychildvalues NAME="Variables.PresInst" ELEMENT="QUERYASSETNAME" LISTVARNAME="queryasset"/>
		
	<IF COND="IsVariable.size=false">
		<THEN>
		<SETVAR NAME="size" VALUE=""/>
		</THEN>
		<ELSE>
		<SETVAR NAME="size" VALUE="Variables.size"/>
		</ELSE>
	</IF>

		<IF COND="IsList.queryasset=true">
		<THEN>
			<IF COND="queryasset.#numRows!=0">
			<THEN>
				<setvar NAME="errno" VALUE="0"/>
				<ASSET.LOAD NAME="aQuery" TYPE="Query" FIELD="name" VALUE="queryasset.value"/>
				<if COND="IsError.Variables.errno=false">
				<then>
					<CALLELEMENT NAME="OpenMarket/Xcelerate/AssetType/Query/ExecuteQuery" SCOPED="LOCAL">
						<ARGUMENT NAME="list" VALUE="templist"/>
						<ARGUMENT NAME="assetname" VALUE="aQuery"/>
						<ARGUMENT NAME="ResultLimit" VALUE="-1"/>
					</CALLELEMENT>
					<COPYLIST LIST="CheckValues" FROM="templist"/>
				</then>
				<else>
					<br/><XLAT.STREAM KEY="dvin/AT/Forms/ErrorOnLoad"  errno="Variables.errno"  queryassetvalue="queryasset.value" EVALALL="false"/>
				</else>
				</if>
			</THEN>
			<ELSE>
				<presentation.getvalues NAME="Variables.PresInst" LISTVARNAME="CheckValues"/>
			</ELSE>
			</IF>
		</THEN>
		</IF>
		
		<tr>
			<callelement NAME="OpenMarket/Gator/FlexibleAssets/Common/DisplayAttributeName"/>
			<if COND="Variables.RequiredAttr=true">
			<then>
				<setvar NAME="RequireInfo" VALUE="*Variables.cs_SingleInputName*Variables.currentAttrName*ReqTrue*Variables.AttrType*checkbox!"/>
			</then>
			<else>
				<setvar NAME="RequireInfo" VALUE="*Variables.cs_SingleInputName*Variables.currentAttrName*ReqFalse*Variables.AttrType*checkbox!"/>
			</else>
			</if>
			<setvar NAME="defaultFormStyleClass" VALUE="" />
			<if COND="Variables.defaultFormStyle=true">
			<then>
				<setvar NAME="defaultFormStyleClass" VALUE="defaultFormStyle" />
			</then>
			</if>
			
			<IF COND="Variables.layout=HORIZONTAL">
			<THEN>
				<SETVAR NAME="displayInline" VALUE="inline"/>
			</THEN>
			</IF>
			
			<td></td>
			<td> 
				<setvar NAME="doDefaultDisplay" VALUE="no"/>
				<if COND="IsList.CheckValues=true">
				<then>
					<if COND="CheckValues.#numRows!=0">
					<then>
					<setvar NAME="MyAttrVal"  VALUE="Variables.empty"/>
					<if COND="IsList.AttrValueList=true">
					<then>
						<HASH.CREATE NAME="valHash" LIST="AttrValueList" COLUMN="value"/>
						<HASH.TOSTRING NAME="valHash" VARNAME="MyAttrVals" DELIM=","/>
					</then>
					</if>
						<IF COND="Variables.AttrType=asset">
						<THEN>
							<loop LIST="CheckValues">
								<setvar NAME="errno" VALUE="0"/>
								<ISINLIST STR="Variables.MyAttrVals" ITEM="CheckValues.assetid"/>
								<div class='Variables.defaultFormStyleClass' style="word-wrap: break-word;display: Variables.displayInline" REPLACEALL="Variables.defaultFormStyleClass,Variables.displayInline">
									<if COND="Variables.errno=1">
									<then>
										<INPUT TYPE="CHECKBOX" ONCLICK="setTabDirty()" NAME="Variables.cs_SingleInputName" VALUE="CheckValues.assetid" CHECKED="yes" REPLACEALL="Variables.cs_SingleInputName,CheckValues.assetid"/><STRING.STREAM VALUE="CheckValues.value"/>
									</then>
									<else>
										<INPUT TYPE="CHECKBOX" ONCLICK="setTabDirty()" NAME="Variables.cs_SingleInputName" VALUE="CheckValues.assetid" REPLACEALL="Variables.cs_SingleInputName,CheckValues.assetid"/><STRING.STREAM VALUE="CheckValues.value"/>
									</else>
									</if>
								</div>
							</loop>   
						</THEN>
						<ELSE>
							<IF COND="Variables.AttrType=float">
							<THEN>
								<loop LIST="CheckValues">
									<SETVAR NAME="checked" VALUE="no"/>
									<LOOP LIST="AttrValueList">
										<CALCULATOR.GO VALUE="CheckValues.value AttrValueList.value =" VARNAME="equal"/>
										<if COND="Variables.equal=1">
										<then>
											<SETVAR NAME="checked" VALUE="yes"/>
										</then>
										</if>
									</LOOP>
									
									<div class='Variables.defaultFormStyleClass' style="word-wrap: break-word;display: Variables.displayInline" REPLACEALL="Variables.defaultFormStyleClass,Variables.displayInline">
										<if COND="Variables.checked=yes">
										<then>
											<INPUT TYPE="CHECKBOX" ONCLICK="setTabDirty()" NAME="Variables.cs_SingleInputName" VALUE="CheckValues.value" CHECKED="yes" REPLACEALL="Variables.cs_SingleInputName,CheckValues.value"/><FONT SIZE="Variables.size" REPLACEALL="Variables.size"><STRING.STREAM VALUE="CheckValues.value"/></FONT>
										</then>
										<else>
											<INPUT TYPE="CHECKBOX" ONCLICK="setTabDirty()" NAME="Variables.cs_SingleInputName" VALUE="CheckValues.value" REPLACEALL="Variables.cs_SingleInputName,CheckValues.value"/><FONT SIZE="Variables.size" REPLACEALL="Variables.size"><STRING.STREAM VALUE="CheckValues.value"/></FONT>
										</else>
										</if>
									</div>
								</loop>
							</THEN>
							<ELSE>
								<IF COND="Variables.AttrType=money">
								<THEN>
									<loop LIST="CheckValues">
										<SETVAR NAME="checked" VALUE="no"/>
										<LOOP LIST="AttrValueList">
											<CALCULATOR.GO VALUE="CheckValues.value AttrValueList.value =" VARNAME="equal"/>
											<if COND="Variables.equal=1">
											<then>
												<SETVAR NAME="checked" VALUE="yes"/>
											</then>
											</if>
										</LOOP>
										
										<div class='Variables.defaultFormStyleClass' style="word-wrap: break-word;display: Variables.displayInline" REPLACEALL="Variables.defaultFormStyleClass,Variables.displayInline">
											<if COND="Variables.checked=yes">
											<then>
												<INPUT TYPE="CHECKBOX" ONCLICK="setTabDirty()" NAME="Variables.cs_SingleInputName" VALUE="CheckValues.value" CHECKED="yes" REPLACEALL="Variables.cs_SingleInputName,CheckValues.value"/><FONT SIZE="Variables.size" REPLACEALL="Variables.size"><STRING.STREAM VALUE="CheckValues.value"/></FONT>
											</then>
											<else>
												<INPUT TYPE="CHECKBOX" ONCLICK="setTabDirty()" NAME="Variables.cs_SingleInputName" VALUE="CheckValues.value" REPLACEALL="Variables.cs_SingleInputName,CheckValues.value"/><FONT SIZE="Variables.size" REPLACEALL="Variables.size"><STRING.STREAM VALUE="CheckValues.value"/></FONT>
											</else>
											</if>
										</div>
									</loop>
								</THEN>
								<ELSE>
									<IF COND="Variables.AttrType=date">
									<THEN>
										<loop LIST="CheckValues">
											<SETVAR NAME="checked" VALUE="no"/>
												<!--bug 16176040 Ignoring the milliseconds as it is not stored in db -->
												<INDEXOF STR="CheckValues.value" WHAT="." OUTSTR="indx" INDEX="0"/>
												<SUBSTRING STR="CheckValues.value" OUTSTR="checkboxVal" INDEX="0" ENDINDEX="Variables.indx" />
											<LOOP LIST="AttrValueList">
												<INDEXOF STR="AttrValueList.value" WHAT="." OUTSTR="indx" INDEX="0"/>
												<SUBSTRING STR="AttrValueList.value" OUTSTR="attrVal" INDEX="0" ENDINDEX="Variables.indx" />
												
												<if cond="Variables.checkboxVal=Variables.attrVal">
												<then>
													<SETVAR NAME="checked" VALUE="yes"/>
												</then>
												</if>
											</LOOP>
											
											<div class='Variables.defaultFormStyleClass' style="word-wrap: break-word;display: Variables.displayInline" REPLACEALL="Variables.defaultFormStyleClass,Variables.displayInline">
												<if COND="Variables.checked=yes">
												<then>
													<INPUT TYPE="CHECKBOX" ONCLICK="setTabDirty()" NAME="Variables.cs_SingleInputName" VALUE="CheckValues.value" CHECKED="yes" REPLACEALL="Variables.cs_SingleInputName,CheckValues.value"/><FONT SIZE="Variables.size" REPLACEALL="Variables.size"><STRING.STREAM VALUE="CheckValues.value"/></FONT>
												</then>
												<else>
													<INPUT TYPE="CHECKBOX" ONCLICK="setTabDirty()" NAME="Variables.cs_SingleInputName" VALUE="CheckValues.value" REPLACEALL="Variables.cs_SingleInputName,CheckValues.value"/><FONT SIZE="Variables.size" REPLACEALL="Variables.size"><STRING.STREAM VALUE="CheckValues.value"/></FONT>
												</else>
												</if>
											</div>
										</loop>
									</THEN>
									<ELSE>
										<loop LIST="CheckValues">
											<setvar NAME="errno" VALUE="0"/>
											<ISINLIST STR="Variables.MyAttrVals" ITEM="CheckValues.value"/>
											<div class='Variables.defaultFormStyleClass' style="word-wrap: break-word;display: Variables.displayInline" REPLACEALL="Variables.defaultFormStyleClass,Variables.displayInline">
												<if COND="Variables.errno=1">
												<then>
													<INPUT TYPE="CHECKBOX" ONCLICK="setTabDirty()" NAME="Variables.cs_SingleInputName" VALUE="CheckValues.value" CHECKED="yes" REPLACEALL="Variables.cs_SingleInputName,CheckValues.value"/><FONT SIZE="Variables.size" REPLACEALL="Variables.size"><STRING.STREAM VALUE="CheckValues.value"/></FONT>
												</then>
												<else>
													<INPUT TYPE="CHECKBOX" ONCLICK="setTabDirty()" NAME="Variables.cs_SingleInputName" VALUE="CheckValues.value" REPLACEALL="Variables.cs_SingleInputName,CheckValues.value"/><FONT SIZE="Variables.size" REPLACEALL="Variables.size"><STRING.STREAM VALUE="CheckValues.value"/></FONT>
												</else>
												</if>
											</div>
										</loop>
									</ELSE>
									</IF> <!-- end of if attribute type = date -->
								</ELSE>
								</IF> <!-- end of if attribute type = money -->
							</ELSE>
							</IF> <!-- end of if attribute type = float -->
						</ELSE>
						</IF> <!-- end of if attribute type = asset -->
					<INPUT TYPE="hidden" NAME="MSVariables.AttrName" VALUE="yes" REPLACEALL="Variables.AttrName"/>
				</then>
				<else>
					<XLAT.STREAM KEY="dvin/AT/Forms/NoValuesAvailable"/>
				</else>
				</if>
			</then>
			</if>
			</td>
		</tr>
	
	<REMOVEVAR NAME='displayInline'/>
	<REMOVEVAR NAME='defaultFormStyleClass'/>
	
</ELSE>
</IF>

</FTCS> 
