<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<SETVAR NAME="cs.contenttype" VALUE="text/html; charset=UTF-8"/>

<!-- OpenMarket/Gator/UIFramework/Admin/LoadAcl
-
- INPUT
-
- OUTPUT
-
-->

<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/BasicEnvironment"/>

<!-- This element handles all children of the Acl root node -->

<IF COND="Variables.Depth=1">
<THEN>
			<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
				<ARGUMENT NAME="AdHoc" VALUE="Acl:New"/>
				<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
			</CALLELEMENT>
			
			<REMOVEVAR NAME="LoadURL"/>
			<REMOVEVAR NAME="OKActions"/>
            <XLAT.LOOKUP KEY="dvin/TreeApplet/AddNew" ENCODE="false" VARNAME="_XLAT_"/>
            <XLAT.LOOKUP KEY="dvin/UI/Admin/AddNewRole" ENCODE="false" VARNAME="_XLAT1_"/>
			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/RolesAdminFront" outstring="ExecuteURL">
				<satellite.argument name="action" value="new"/>
			</SATELLITE.LINK>

			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL"/>
 
			<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
				<ARGUMENT NAME="Label" VALUE="Variables._XLAT_"/>
				<ARGUMENT NAME="Description" VALUE="Variables._XLAT1_"/>
				<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
				<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
				<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
				<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/plus.png"/>
			</CALLELEMENT>
			
			<!-- display the Acl objects -->
			<ROLEMANAGER.GETROLENAMES LISTVARNAME="LstAcl"/>
			<loop LIST="LstAcl">
				<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
					<ARGUMENT NAME="AdHoc" VALUE="Acl:Existing:LstAcl.aclname"/>
					<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
				</CALLELEMENT>
				
				<REMOVEVAR NAME="Description"/>
				<REMOVEVAR NAME="LoadURL"/>
				<REMOVEVAR NAME="OKActions"/>
				<substitute STR="LstAcl.aclname" WHAT="%20" WITH="/XCEL-SEP/" OUTSTR="sanename"/>
				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/RolesAdminFront" outstring="ExecuteURL">
					<satellite.argument name="action" value="details"/>
					<satellite.argument name="name" value="Variables.sanename"/>
				</SATELLITE.LINK>

				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
					<satellite.argument name="AssetType" value="Variables.AssetType"/>
				</SATELLITE.LINK>
				<ROLEMANAGER.LOAD NAME="LstAcl.aclname" OBJVARNAME="roleObject"/>
				<ROLE.GETDESCRIPTION NAME="roleObject" VARNAME="roleDescription"/>
				<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
					<ARGUMENT NAME="Label" VALUE="LstAcl.aclname"/>
					<ARGUMENT NAME="Description" VALUE="Variables.roleDescription"/>
					<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
					<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
					<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
					<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/Roles.png"/>
				</CALLELEMENT>
			</loop>
</THEN>
</IF>


</FTCS> 
