<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Gator/UIFramework/DisplayMultiLineText
-
- INPUT
-
- OUTPUT
-
-->

<!-- split string to fit tree -->
<STRINGLIST NAME="words" STR="Variables.errorString" DELIM="%20"/>
<!-- start with length of 4 for lost icon space -->
<SETVAR NAME="currentLength" VALUE="4"/>
<SETVAR NAME="currentString" VALUE="Variables.empty"/>
<LOOP LIST="words">
	<IF COND="words.#curRow!=1">
	<THEN>
		<STRING.LENGTH VALUE="Variables.currentString" VARNAME="currentLength"/>
	</THEN>
	</IF>
	<STRING.LENGTH VALUE="words.ITEM" VARNAME="wordLength"/>
	<CALCULATOR.GO VALUE="Variables.lineLength Variables.currentLength Variables.wordLength + LT" VARNAME="tooLong"/>
	<IF COND="Variables.tooLong=0">
	<THEN>
		<SETVAR NAME="currentString" VALUE="Variables.currentString words.ITEM"/>
	</THEN>
	<ELSE>
		<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID">
			<ARGUMENT NAME="ID" VALUE="words.#curRow"/>
			<ARGUMENT NAME="AssetType" VALUE="Error"/>
		</CALLELEMENT>
		
		<IF COND="Variables.madeANode=yes">
		<THEN>
			<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
				<ARGUMENT NAME="Label" VALUE="Variables.currentString"/>
				<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
			 </CALLELEMENT>
		</THEN>
		<ELSE>
			<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
				<ARGUMENT NAME="Label" VALUE="Variables.currentString"/>
				<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
			</CALLELEMENT>
			<REMOVEVAR NAME="Image"/>
		</ELSE>
		</IF>

		<SETVAR NAME="currentString" VALUE="words.ITEM"/>

	</ELSE>
	</IF>
</LOOP>

<!-- display any remaining words -->
<IF COND="Variables.currentString!=Variables.empty">
<THEN>
	<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID">
		<ARGUMENT NAME="ID" VALUE="words.#curRow"/>
		<ARGUMENT NAME="AssetType" VALUE="Error"/>
	</CALLELEMENT>
	<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
		<ARGUMENT NAME="Label" VALUE="Variables.currentString"/>
		<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
	</CALLELEMENT>
</THEN>
</IF>

</FTCS> 
