<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">

<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateC/install/Gator/Populate/ElementCatalog/OpenMarket/Gator/FlexibleAssets/Common/AppendSelectDetailsSE.xml $ 
$Revision: 3 $ 
$Modtime: 2/14/03 5:13p $ 
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- AppendSelectDetailsSE.xml
-
- DESCRIPTION
-	Add to search engine query for Article-specific search parameters 
-	(as defined by Article/SearchForm.xml).
-
- ARGUMENTS
-   seQuery
-       SEARCH WHAT query string.  Append to this.
-   seType
-       SEARCH TYPE value.  Change it or leave it alone.
-   seRelevance
-       SEARCH RELEVANCE value.  Change it or leave it alone.
-   sqlQueryend
-       Tail end of WHERE expression for secondary SQL query.
-   (FORM fields)
-       All form fields defined by SearchForm.xml
-   seLeft, seRight
-       Left and right strings.  Used as 
-		fieldname Variables.seLeft fieldvalue Variables.seRight
-
- HISTORY 
-->

<IF COND="IsVariable.Name=true">
	<THEN>
        <IF COND="Variables.Name!=Variables.empty">
            <THEN> 
                <CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Search/seAppend">
                    <ARGUMENT NAME="seFieldname" VALUE="name"/>
                    <ARGUMENT NAME="seValue" VALUE="Variables.Name"/>
                </CALLELEMENT>
            </THEN>
        </IF>
 	</THEN>
</IF>


<if COND="IsVariable.Status=true">
<THEN>
    <IF COND="Variables.Status!=Variables.empty">   
        <then>
        <SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType.status='Variables.Status'"/>
        </then>
    </IF>
</THEN>    
</if>


<IF COND="IsVariable.Subtype=true">
<THEN>
    <IF COND="Variables.Subtype!=Variables.empty">   
      <THEN>
        <CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Search/seAppend">
            <ARGUMENT NAME="seFieldname" VALUE="subtype"/>
            <ARGUMENT NAME="seValue" VALUE="Variables.Subtype"/>
        </CALLELEMENT>
       </THEN>
    </IF>
</THEN>         
</IF>



<IF COND="IsVariable.Description=true">
<THEN>
    <IF COND="Variables.Description!=Variables.empty">
      <THEN>
        <CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Search/seAppend">
            <ARGUMENT NAME="seFieldname" VALUE="description"/>
            <ARGUMENT NAME="seValue" VALUE="Variables.Description"/>
        </CALLELEMENT>
       </THEN>
    </IF>
</THEN>
</IF>

<IF COND="IsVariable.flextemplateid=true">
<THEN>
    <IF COND="Variables.flextemplateid!=Variables.empty">
        <THEN>
        <!--
        AV does not find substrings, but words.  flextemplateid does not contain words.
        so a LIKE substring search is more useful for AV.
        TBD...WHAT ABOUT VERITY? IS THIS TRUE FOR ALL SEARCH ENGINES?
        -->
            <SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType.flextemplateid = Variables.flextemplateid"/>         
        </THEN>
   </IF>
</THEN>
</IF>

<IF COND="IsVariable.flexgrouptemplateid=true">
<THEN>
    <IF COND="Variables.flexgrouptemplateid!=Variables.empty">
        <THEN>
        <!--
        AV does not find substrings, but words.  ID does not contain words.
        so a LIKE substring search is more useful for AV.
        TBD...WHAT ABOUT VERITY? IS THIS TRUE FOR ALL SEARCH ENGINES?
        -->
            <SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType.flexgrouptemplateid = Variables.flexgrouptemplateid"/>
         
        </THEN>
   </IF>
</THEN>
</IF>


 
<callelement NAME="OpenMarket/Xcelerate/Actions/Search/BuildFilterString"/>

</FTCS>
