<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.2">
<SETVAR NAME="cs.contenttype" VALUE="text/xml; charset=utf-8"/>
<SETVAR NAME="test" VALUE="&#60;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?>
"/>
<CSVAR NAME="Variables.test"/>
<!-- OpenMarket/CSClient/CSClientPage
-
- INPUT
-	CSCPage - element to call, relative to OpenMarket/CSClient
-	arguments specific to the CSCPage
-
- OUTPUT
-	CSClient XML
-->
<SETVAR NAME="ClientBasePath" VALUE="OpenMarket/CSClient"/>

<BEGINS STR="CS.Property.ft.cgipath" WHAT="/"/>
<IF COND="Variables.errno=1">
<THEN>
    <SUBSTRING STR="CS.Property.ft.cgipath" OUTSTR="cgipathapproot" INDEX="1"/>
    <SETVAR NAME="cgipathapproot" VALUE="Variables.cgipathapprootCS.Property.ft.approot"/>
</THEN>
<ELSE>
    <SETVAR NAME="cgipathapproot" VALUE="CS.Property.ft.cgipathCS.Property.ft.approot"/>
</ELSE>
</IF>

<RESPONSE>
	<IF COND="IsVariable.CSCPage=true">
	<THEN>
		<IF COND="IsElement.Variables.ClientBasePath/Variables.CSCPage=false">
		<THEN>
         <XLAT.LOOKUP KEY="dvin/CSDocLink/Pagedoesnotexist" VARNAME="_XLAT_"/>
			<ERROR CODE="4" DESCRIPTION="Variables._XLAT_" SEVERITY="2" REPLACEALL="Variables._XLAT_"/>
		</THEN>
		<ELSE>
			<IF COND="Variables.CSCPage=Login">
			<THEN>
				<CALLELEMENT NAME="Variables.ClientBasePath/Variables.CSCPage"/>

        <!-- WEM Communication -->
        <IF COND="IsVariable.usesso=true">
          <THEN>
            <SETSSVAR NAME="usessoVal" VALUE="Variables.usesso"/>
			</THEN>
        </IF>
        <!--  -->
        
			</THEN>
			<ELSE>
				<!-- check for timeout -->
				<SETVAR NAME="errno" VALUE="0"/>
				<USERISMEMBER GROUP="xceleditor"/>
				<IF COND="Variables.errno=1">
				<THEN>
					<CALLELEMENT NAME="Variables.ClientBasePath/Variables.CSCPage"/>
				</THEN>
				<ELSE>
               <CALLELEMENT NAME="OpenMarket/Xcelerate/Util/SetLocale"/>
               <XLAT.LOOKUP KEY="dvin/CSDocLink/Sessiontimeout" VARNAME="_XLAT_"/>
					<ERROR CODE="3" DESCRIPTION="Variables._XLAT_" SEVERITY="2" REPLACEALL="Variables._XLAT_"/>
				</ELSE>
				</IF>
			</ELSE>
			</IF>
		</ELSE>
		</IF>
	</THEN>
	<ELSE>
      <XLAT.LOOKUP KEY="dvin/CSDocLink/Pagenotset" VARNAME="_XLAT_"/>
		<ERROR CODE="4" DESCRIPTION="Variables._XLAT_" SEVERITY="2" REPLACEALL="Variables._XLAT_"/>
	</ELSE>
	</IF>
</RESPONSE>

</FTCS> 
