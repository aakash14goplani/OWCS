<?xml version="1.0" ?>
<!DOCTYPE ftcs SYSTEM "futuretense_cs.dtd">
<ftcs version="1.2">
<!-- OpenMarket/ContentServer/Installation/AddSatellite
-
- INPUT   
-  protocol  Variables.CSConnectPrefix
-  cgipath   Variables.sCgiPath
-  SSUsername Variables.SSUserName
-  SSpassword  Variables.SSUserPassword
-  CSHost Variables.CSInstallWebServerAddress
-  CSPort  Variables.CSInstallWebServerPort
-
- OUTPUT
-
-->
<setvar NAME="result" VALUE="Variables.empty"/>
<ics.clearerrno/>
  
<!-- Branch on the command -->
<if COND="Variables.command=addSS">
<then>
 
	<!-- addrow to the systemsatellite table -->
	<catalogmanager>
		<argument name="ftcmd" value="addrow"/>
		<argument name="tablename" value="SystemSatellite"/>	
		<argument name="id" value="CS.UniqueID"/>
		<argument name="description" value="Installer registered co-resident Satellite Engine"/> 
		<argument name="protocol" value="Variables.protocol"/> 
		<argument name="host" value="Variables.CSHost"/> 
		<argument name="port" value="Variables.CSPort"/> 
		<argument name="satelliteservletpath" value="Variables.cgipathSatellite"/> 
		<argument name="flushservletpath" value="Variables.cgipathFlushServer"/> 
		<argument name="inventoryservletpath" value="Variables.cgipathInventory"/> 
		<argument name="pastramiservletpath" value="Variables.cgipathPastrami"/> 
		<argument name="username" value="Variables.SSUser"/> 
		<argument name="password" value="Variables.SSPassword"/> 
	</catalogmanager>

	<!-- check to see if we encountered an error in adding the row -->
	<if cond="Variables.errno!=0">
	<then>		 
 		<setvar NAME="result" value="Variables.errno"/>		 
	</then>
	</if>
 
</then> 
<else>
	<setvar name="result" value="Unknown command"/>
</else>
</if>
	<!-- set status for the installer -->
	<if COND="Variables.result!=Variables.empty">
	<then>
		<logmsg STR="ContentServer Installation Error Adding Satellite Server: Variables.result"/>
		##ERROR## <csvar NAME="Variables.result"/><BR/>
	 </then>
             <else>
	 	##SUCCESS## <csvar NAME="Variables.result"/><BR/>
	</else>
	</if>

 
 
</ftcs>
