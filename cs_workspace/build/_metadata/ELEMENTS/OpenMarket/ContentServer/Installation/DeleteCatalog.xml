<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!--
$Logfile: /branches/CSv6/ContentServer/install/ContentServer/Installation/ElementCatalog/OpenMarket/ContentServer/Installation/DeleteCatalog.xml $
$Revision: 1 $
$Modtime: 2/06/04 4:11p $
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- DESCRIPTION
-    Root element used to Delete Xcelerate catalogs.
-
- INPUT
-    command - command to process (deinstall)
-    catalog - name of catalog
- 	other variables are passed along to the elemnts i.e., elements are called with global scope
-->


<!-- Initialize the result -->
	
	<SETVAR NAME="result" VALUE="Variables.empty"/>

<!-- Check to see if the catalog already exists -->

	<SETVAR NAME="errno" VALUE="0"/>
	<IF COND="IsTree.Variables.catalog=true">
	<THEN>
		<TREEMANAGER>
			<ARGUMENT NAME="ftcmd" VALUE="deletetree"/>
			<ARGUMENT NAME="treename" VALUE="Variables.catalog"/>
		</TREEMANAGER>
	</THEN>
	<ELSE>
		<IF COND="IsCatalog.Variables.catalog=true">
		<THEN>
	<!-- Now delete the catalog -->
				<SETVAR NAME="errno" VALUE="0"/>
				<CATALOGMANAGER>
					<ARGUMENT NAME="ftcmd" VALUE="deletetable"/>
					<ARGUMENT NAME="tablename" VALUE="Variables.catalog"/>
					<ARGUMENT NAME="Delete uploaded file(s)" VALUE="yes"/>
				</CATALOGMANAGER>
		</THEN>
		</IF>
	</ELSE>		
	</IF>

<!-- Check for error on the delete catalog -->
	<IF COND="IsError.Variables.errno=true">
	<THEN>
			<SETVAR NAME="result" VALUE="errno Variables.errno from deinstall of Variables.catalog"/>
	</THEN>
	</IF>

	<IF COND="Variables.result!=Variables.empty">
	<THEN>
		<LOGMSG STR="Xcelerate Installation Error: Variables.result"/>
		##ERROR## <CSVAR NAME="Variables.result"/><BR/>
	</THEN>
	<ELSE>
		##SUCCESS## <CSVAR NAME="Variables.result"/><BR/>
	</ELSE>
	</IF>
</FTCS>
