<?xml version="1.0" ?>
<!DOCTYPE ftcs SYSTEM "futuretense_cs.dtd">
<ftcs version="1.2">
<!-- OpenMarket/Xcelerate/ControlPanel/Login/ProcessWemLogin
-
- INPUT
-
- OUTPUT
-
-->
	<USERMANAGER.GETLOGINUSER VARNAME="loginuser"/>
	<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/SetLocale">
		<ARGUMENT NAME="loginuser" VALUE="Variables.loginuser"/>
	</CALLELEMENT>

	<SETVAR NAME="errno" VALUE="0"/>
	<USERISMEMBER GROUP="xceleditor"/>
	<IF COND="Variables.errno=0">
	<THEN>
		<XLAT.LOOKUP KEY="dvin/UI/Userisnotamemberofthexceleditorgroup" VARNAME="_XLAT_"/>
		<SETVAR NAME="loginMessage" VALUE="Variables._XLAT_"/>
	</THEN>
	<ELSE>
		<SETSSVAR NAME="_cs_environment" VALUE="preview"/>
		<!-- see if the user has posted a publication -->
		<IF COND="IsVariable.pubid=true">
		<THEN>
			<REMOVESSVAR NAME="pubid"/>
			<SETSSVAR NAME="pubid" VALUE="Variables.pubid"/>
			<callelement NAME="OpenMarket/Xcelerate/Actions/Security/SetPublicationName"/>				    
		</THEN>
		</IF>
	</ELSE>
	</IF>			
	
</ftcs>