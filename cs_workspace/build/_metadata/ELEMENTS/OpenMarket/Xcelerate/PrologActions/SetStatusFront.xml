<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateD/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/PrologActions/SetStatusFront.xml $ 
$Revision: 8 $ 
$Modtime: 6/10/04 12:01p $ 
-->

<!--
- Confidential and Proprietary Information of Open Market Inc.
-					All Rights Reserved.
-
- SetStatusFront.xml
-
- DESCRIPTION
-	
-
- HISTORY 
-->

<setvar NAME="AbortFlag" VALUE="false"/>

<!-- see if checkout state allows us to perform this function -->
<setvar NAME="foundcheckout" VALUE="false"/>

<callelement NAME="OpenMarket/Xcelerate/Actions/RevisionTracking/CheckTrackingEnabled">
    <argument NAME="AssetType" VALUE="Variables.AssetType"/>
</callelement>
<if COND="Variables.trackingenabled=true">
<then>
    <setvar NAME="locker" VALUE="SessionVariables.username"/>
                  
    <history TABLE="Variables.AssetType" ASSET="Variables.id" LOCKER="Variables.locker" LIST="ItsHistory"/>
    <if COND="ItsHistory.#numRows!=0">
    <then>
        <if COND="ItsHistory.lockedby!=Variables.empty">
        <then>
            <setvar NAME="foundcheckout" VALUE="true"/>
            <setvar NAME="lockedby" VALUE="ItsHistory.lockedby"/>
        </then>
        </if>			
    </then>
    </if>	
</then>
</if>
 <if COND="Variables.foundcheckout=true">
 <then>
 	<setvar NAME="ErrorName" VALUE="CantSetStatusLocked"/>
      <setvar NAME="AbortFlag" VALUE="true"/>
      <setvar NAME="severity" VALUE="info"/>
 </then>
 </if>

<if COND="IsVariable.useDefaultDeadline!=true">
<then>
    <setvar NAME="useDefaultDeadline" VALUE="true" />
</then>
</if>
<if COND="Variables.reloaded=true">
<then>
    <setvar NAME="useDefaultDeadline" VALUE="true"/>
</then>
</if>
</FTCS>


