<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateA/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/PrologActions/RollbackPost.xml $ 
$Revision: 4 $ 
$Modtime: 1/05/02 10:05p $ 
-->

<!--
- Confidential and Proprietary Information of Open Market Inc.
-					All Rights Reserved.
-
- RollbackPost.xml
-
- DESCRIPTION
-	
-
- HISTORY 
-->
	<SETVAR NAME="hasError" VALUE="false"/>
	
    <callelement NAME="OpenMarket/Xcelerate/Actions/RevisionTracking/CheckTrackingEnabled">
        <argument NAME="AssetType" VALUE="Variables.AssetType"/>
    </callelement>
    
	<!-- Load the asset -->
	<ASSET.LOAD TYPE="Variables.AssetType" OBJECTID="Variables.id" NAME="theCurrentAsset"/>
	<!-- check whether we can perform this function on this asset (access right may have changed since the front page was displayed) -->
    <CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Workflow/CheckPrivs">
        <ARGUMENT NAME="AssetType" VALUE="Variables.AssetType"/>
        <ARGUMENT NAME="assetObjectName" VALUE="theCurrentAsset"/>
        <ARGUMENT NAME="Function" VALUE="rollback"/>
    </CALLELEMENT>
	<IF COND="Variables.PrivsFailed=true">
	<THEN>
		<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Util/ShowError">
			<ARGUMENT NAME="error" VALUE="Variables.PrivsFailedReason"/>
		</CALLELEMENT>
		<SETVAR NAME="hasError" VALUE="true"/>
		<SETVAR NAME="errorAlreadyDisplayed" VALUE="true"/>
	</THEN>
	</IF>
</FTCS>


