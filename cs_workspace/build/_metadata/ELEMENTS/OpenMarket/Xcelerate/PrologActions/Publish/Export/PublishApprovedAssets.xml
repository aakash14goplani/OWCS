<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Xcelerate/PrologActions/Publish/Export/PublishApprovedAssets.xml -->

<SETVAR NAME="pub:basepath" VALUE="CS.Property.cs.pgexportfolder"/>
<IF COND="IsVariable.pubfact:DIR=true">
<THEN>
     <BEGINS STR="Variables.pubfact:DIR" WHAT="/" />
     <IF COND="Variables.errno=1">
     <THEN>
          <SETVAR NAME="pub:basepath" VALUE="Variables.pub:basepathVariables.pubfact:DIR"/>
     </THEN>
     <ELSE>
          <SETVAR NAME="pub:basepath" VALUE="Variables.pub:basepath/Variables.pubfact:DIR"/>
     </ELSE>
     </IF>
     <SETVAR NAME="errno" VALUE="0"/>
</THEN>
</IF>

<IF COND="IsVariable.pubfact:URLPREFIX=true">
<THEN>
     <BEGINS STR="Variables.pubfact:URLPREFIX" WHAT="/" />
     <IF COND="Variables.errno=1">
     <THEN>
          <SETVAR NAME="pub:virtualpath" VALUE="Variables.pubfact:URLPREFIX"/>
     </THEN>
     <ELSE>
          <SETVAR NAME="pub:virtualpath" VALUE="/Variables.pubfact:URLPREFIX"/>
     </ELSE>
     </IF>
     <SETVAR NAME="errno" VALUE="0"/>
</THEN>
<ELSE>
     <SETVAR NAME="pub:virtualpath" VALUE="/" />
</ELSE>
</IF>

<EXPORTER.CREATE TARGET="Variables.target"
     PUBSESSION="pubsess"
     ROOTFOLDER="Variables.pub:basepath" 
     VIRTUALFOLDER="Variables.pub:virtualpath" /> 

<SETVAR NAME="theCount" VALUE="Variables.Variables.PREFIXTotal" />

<setcounter NAME="count" VALUE="0"/>
<loop FROM="0" COUNT="Variables.theCount">
    <EXPORTKEY.GETREFERENCE NAME="Variables.PREFIXCounters.count" REFERENCE="ref"/>
    <EXPORTER.ADDREFERENCE REFERENCE="Variables.ref" />
    <inccounter NAME="count" VALUE="1"/>
</loop>       

<!-- now export -->
<EXPORTER.EXPORT/>

</FTCS>
