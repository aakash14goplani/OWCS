<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Xcelerate/PrologActions/Publish/Export/PreviewApprovedAssets
-
- DESCRIPTION
-	 Preview publishable references screen
-
- INPUT
-
-    Variables.target -- target id
-
- OUTPUT
-
-->

<ApprovedAssets.GetAssetsToPublish TARGET="Variables.target" PREFIX="PublishableAssets" />
<if COND="IsError.Variables.errno=true">
<then>     
      <p><XLAT.STREAM KEY="dvin/UI/Error/notgetassetstopublisherrno" errno="Variables.errno" EVALALL="false"/>
      </p>
</then>
<else>
     <if COND="Variables.PublishableAssetsTotal=0">
     <then>
     		<XLAT.LOOKUP KEY="dvin/UI/Publish/noPublishableAssets" VARNAME="_xlat_noassets"/>
		     <callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
		      <argument NAME="msgtext" VALUE="Variables._xlat_noassets"/>
				<argument NAME="severity" VALUE="info"/>	
		     </callelement>
     </then>
     <else>
 	  		<if COND="Variables.PublishableAssetsTotal=1">
          <then>
               <XLAT.STREAM KEY="dvin/UI/Publish/numreferenceisreadyforpublish"/>
          </then>
	  		<else>
	       <XLAT.STREAM KEY="dvin/UI/Publish/numreferencesarereadyforpublish"/>
		  </else>
		  </if>
		  
          
          <callelement NAME="OpenMarket/Xcelerate/Actions/AssetMgt/ReferencesTile">
             <argument NAME="PREFIX" VALUE="PublishableAssets"/>
             <argument NAME="command" VALUE="preview"/>
          </callelement>
     </else>
     </if>
</else>
</if>

</FTCS> 
