<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.2">
<!-- OpenMarket/Xcelerate/Admin/LocaleFront

 INPUT

 OUTPUT

-->


	
	<SCRIPT LANGUAGE="JavaScript">
		function GotoNextStep(form)
		{
			var obj = document.forms[0].elements[0];
			if (obj.form.elements['Language'].value=="")
			{
				alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/Needalanguage" ESCAPE="true" ENCODE="false"/>" );
				  obj.form.elements['Language'].focus();
				return false;
			}
			if (obj.form.elements['Locale'].value=="")
			{
				alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/Needalocale" ESCAPE="true" ENCODE="false"/>" );
				  obj.form.elements['Locale'].focus();
				return false;
			}
	
			var postPage = "OpenMarket/Xcelerate/Admin/LocalePost";
			
			obj.form.pagename.value = postPage;
			obj.form.submit();
			return false;
		}
		function GotoDelete(form)
		{
			var obj = document.forms[0].elements[0];
			var postPage = "OpenMarket/Xcelerate/Admin/LocalePost";
			
			obj.form.pagename.value = postPage;
			obj.form.submit();
			return false;
		}
	</SCRIPT>
	<STRING.ENCODE VARIABLE="Locale" VARNAME="Locale"/>
	<STRING.ENCODE VARIABLE="action" VARNAME="action"/>
	<STRING.ENCODE VARIABLE="cs_environment" VARNAME="cs_environment"/>
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>
<STRING.ENCODE VARIABLE="cs_formmode" VARNAME="cs_formmode"/>
	<IF COND="Variables.action=cancel">
	<THEN>
		<XLAT.LOOKUP KEY="dvin/UI/Cancelsuccessful" VARNAME="msgtext"/>
		<div class="width-outer-70">
		<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
         <argument NAME="severity" VALUE="info"/>
		</callelement>
		</div>
	</THEN>
	</IF>

   <IF COND="Variables.action=confirmdelete">
	<THEN>
		<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
			<tr><td>
				<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/LocaleLocale"/></span>
			</td></tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
		</table>
                                
       <XLAT.LOOKUP KEY="dvin/UI/AssetMgt/Delete-AreYouSure?" atdescription="Variables.atdescription" name="Variables.name" EVALALL="false" VARNAME="_xlat_delete"/>
       <div class="width-outer-70">
       <callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
           <argument NAME="msgtext" VALUE="Variables._xlat_delete"/>
           <argument NAME="severity" VALUE="info"/>
       </callelement>
       </div>
       <!--
		<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
			<argument NAME="elem" VALUE="DeleteLocaleWarning"/>
			<argument NAME="severity" VALUE="warning"/>
		</callelement>
        -->
		<div class="width-outer-70">
		<XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/>
		<A HREF="javascript:void(0);" ONCLICK="return GotoDelete(this.form);" ONMOUSEOVER="window.status='Variables._XLAT_';return true;" ONMOUSEOUT="window.status='';return true" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/DeleteLocale"/></CALLELEMENT></A>
		<INPUT TYPE="HIDDEN" NAME="Locale" VALUE="Variables.Locale" REPLACEALL="Variables.Locale"/>
		<INPUT TYPE="HIDDEN" NAME="action" VALUE="delete"/>
		<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_XLAT_" ESCAPE="true"/>
        <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/LocaleFront" outstring="urlocalefront">
            <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
            <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                         <satellite.argument name="action" value="cancel"/>
                                          </SATELLITE.LINK>
		<A HREF="Variables.urlocalefront" ONMOUSEOVER="window.status='Variables._XLAT_';return true;" ONMOUSEOUT="window.status='';return true" REPLACEALL="Variables.urlocalefront,Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
		</div>
	</THEN>
	<ELSE>
		<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
			<tr><td>
				<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/LocaleManager"/></span>
			</td></tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
		</table>

		<SETVAR NAME="errno" VALUE="0"/>
		<SETVAR NAME="tablename" VALUE="SystemLocaleString"/>
		<EXECSQL SQL="SELECT DISTINCT locale FROM Variables.tablename ORDER BY locale" LIST="lAvailable"/>
		
		<SETVAR NAME="errno" VALUE="0"/>
		<SETVAR NAME="tablename" VALUE="LocaleMap"/>
		<EXECSQL SQL="SELECT * FROM Variables.tablename ORDER BY ordinal,language" LIST="lServerLocales"/>
		
		<!-- always display the details page and possibly display inputs for an edit -->
		
		<TABLE class="width-outer-30" BORDER="0" CELLSPACING="0" CELLPADDING="0">
			<TR>
				<TD></TD>
				<TD CLASS="tile-dark" HEIGHT="1">
					<IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/>
				</TD>
				<TD></TD>
			</TR>
			<TR>
				<TD CLASS="tile-dark" VALIGN="top" WIDTH="1" nowrap="true">
					<BR />
				</TD>
				<TD >
					<TABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0" BGCOLOR="#ffffff">
						<TR>
							<TD COLSPAN="10" CLASS="tile-highlight">
								<IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/>
							</TD>
						</TR>
						<TR>
							<TD CLASS="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</TD>
							<TD CLASS="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</TD>
							<TD CLASS="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</TD>
							<TD CLASS="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
								<DIV CLASS="new-table-title">
									<XLAT.STREAM KEY="dvin/UI/Admin/Language"/>
								</DIV>
							</TD>
							<TD CLASS="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</TD>
							<TD CLASS="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
								<DIV CLASS="new-table-title">
									<XLAT.STREAM KEY="dvin/UI/Admin/Locale"/>
								</DIV>
							</TD>
							<TD CLASS="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</TD>
							<TD CLASS="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
								<DIV CLASS="new-table-title" style="text-align:center;">
									<XLAT.STREAM KEY="dvin/UI/Admin/Default"/>
								</DIV>
							</TD>
							<TD CLASS="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</TD>
						</TR>
						<TR>
							<TD COLSPAN="10" CLASS="tile-dark">
								<IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/>
							</TD>
						</TR>
						<!-- Loop over all search results. -->
						<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
						<SETVAR NAME="separatorLine" VALUE="0"/>
						<LOOP LIST="lServerLocales">
							<IF COND="Variables.separatorLine=1">
							<THEN>
								<TR>
									<!--<TD COLSPAN="10" CLASS="light-line-color">
										<IMG HEIGHT="1" WIDTH="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/>
									</TD>-->
								</TR>
							</THEN>
							<ELSE>
								<SETVAR NAME="separatorLine" VALUE="1"/>
							</ELSE>
							</IF>
							
							<TR CLASS="Variables.rowStyle"  REPLACEALL="Variables.rowStyle">
								<TD>
									<BR />
								</TD>
								<TD VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
									<XLAT.LOOKUP KEY="dvin/Common/Edit" VARNAME="_XLAT_" ESCAPE="true"/>
									<XLAT.LOOKUP KEY="dvin/UI/Admin/EditThisState" VARNAME="_ALT_"/>
                                    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/LocaleFront" outstring="urlocalefront">
                                        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                         <satellite.argument name="Locale" value="lServerLocales.id"/>
                                          </SATELLITE.LINK>
									<A HREF="Variables.urlocalefront" ONMOUSEOVER="window.status='Variables._XLAT_';return true;" ONMOUSEOUT="window.status='';return true" REPLACEALL="Variables.urlocalefront,Variables._XLAT_">
										<IMG HEIGHT="14" WIDTH="14" vspace="4" HSPACE="2" src="Variables.cs_imagedir/graphics/common/icon/iconEditContent.gif"  BORDER="0" ALT="Variables._ALT_" title="Variables._ALT_"  REPLACEALL="Variables.cs_imagedir,Variables._ALT_"/>
									</A>
									<XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/>
									<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisState" VARNAME="_ALT_"/>
									<IF COND="lServerLocales.#curRow!=1">
									<THEN>
                                    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/LocaleFront" outstring="urlocalefront">
                                        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                         <satellite.argument name="Locale" value="lServerLocales.id"/>
                                         <satellite.argument name="action" value="confirmdelete"/>
                                          </SATELLITE.LINK>
                              <A HREF="Variables.urlocalefront" ONMOUSEOVER="window.status='Variables._XLAT_';return true;" ONMOUSEOUT="window.status='';return true" REPLACEALL="Variables.urlocalefront,Variables._XLAT_">
											<IMG HEIGHT="14" WIDTH="14" HSPACE="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContent.gif"  BORDER="0" ALT="Variables._ALT_" title="Variables._ALT_" REPLACEALL="Variables.cs_imagedir,Variables._ALT_"/>
										</A>
									</THEN>
									<ELSE>
										<IMG HEIGHT="14" WIDTH="14" HSPACE="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContentX.gif"  BORDER="0" ALT="Variables._ALT_" REPLACEALL="Variables.cs_imagedir,Variables._ALT_"/>
									</ELSE>
									</IF>
								</TD>
								<TD>
									<BR />
								</TD>
								<TD VALIGN="TOP" ALIGN="LEFT">
									<DIV CLASS="small-text-inset">
										<IF COND="Variables.Locale=lServerLocales.id">
										<THEN>
											<INPUT TYPE="TEXT" NAME="Language" VALUE="lServerLocales.language" REPLACEALL="lServerLocales.language"/>
										</THEN>
										<ELSE>
											<STRING.STREAM LIST="lServerLocales" COLUMN="language"/>
										</ELSE>
										</IF>
									</DIV>
								</TD>
								<TD>
									<BR />
								</TD>
								<TD VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
									<DIV CLASS="small-text-inset">
										<STRING.STREAM LIST="lServerLocales" COLUMN="id"/>
                           </DIV>
								</TD>
								<TD>
									<BR />
								</TD>
								<TD VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="CENTER">
									<DIV CLASS="small-text-inset">
										<IF COND="Variables.Locale=lServerLocales.id">
										<THEN>
											<IF COND="lServerLocales.#curRow=1">
											<THEN>
												<INPUT TYPE="RADIO" CHECKED="yes" NAME="Default" VALUE="lServerLocales.id" REPLACEALL="lServerLocales.id"/>
											</THEN>
											<ELSE>
												<INPUT TYPE="RADIO" NAME="Default" VALUE="lServerLocales.id" REPLACEALL="lServerLocales.id"/>
											</ELSE>
											</IF>
										</THEN>
										<ELSE>
											<IF COND="lServerLocales.#curRow=1">
											<THEN>
												<INPUT TYPE="RADIO" CHECKED="yes" NAME="Default" VALUE="lServerLocales.id" REPLACEALL="lServerLocales.id"/>
											</THEN>
											</IF>
										</ELSE>
										</IF>
									</DIV>
								</TD>
								<TD>
									<BR />
								</TD>
							</TR>
							<IF COND="Variables.rowStyle=tile-row-normal">
								<THEN>
									<SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
								</THEN>
								<ELSE>
									<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
								</ELSE>
							</IF>
						</LOOP>
	
						<!-- if adding a new entry, add a blank row to fill in -->
						<IF COND="Variables.action=new">
						<THEN>
							<INPUT TYPE="HIDDEN" NAME="action" VALUE="new"/>
							<IF COND="Variables.separatorLine=1">
								<THEN>
									<TR>
										<!--<TD COLSPAN="10" CLASS="light-line-color">
											<IMG HEIGHT="1" WIDTH="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/>
										</TD>-->
									</TR>
								</THEN>
								</IF>
								
								<TR CLASS="Variables.rowStyle"  REPLACEALL="Variables.rowStyle">
									<TD>
										<BR />
									</TD>
									<TD VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
									</TD>
									<TD>
										<BR />
									</TD>
									<TD VALIGN="TOP" ALIGN="LEFT">
										<DIV CLASS="small-text-inset">
											<INPUT TYPE="TEXT" NAME="Language" VALUE="Variables.empty" REPLACEALL="Variables.empty"/>
										</DIV>
									</TD>
									<TD>
										<BR />
									</TD>
									<TD VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
										<DIV CLASS="small-text-inset">
											<INPUT TYPE="TEXT" NAME="Locale" SIZE="7" VALUE="Variables.empty" REPLACEALL="Variables.empty"/>
										</DIV>
									</TD>
									<TD>
										<BR />
									</TD>
									<TD VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="CENTER">
										<DIV CLASS="small-text-inset">
											<INPUT TYPE="RADIO" NAME="Default" VALUE="new"/>
										</DIV>
									</TD>
									<TD>
										<BR />
									</TD>
								</TR>
							</THEN>
							</IF>
					</TABLE>
				</TD>
				<TD CLASS="tile-dark" VALIGN="top" WIDTH="1" nowrap="true">
					<BR />
				</TD>
			</TR>
			<TR>
				<TD COLSPAN="3" CLASS="tile-dark" VALIGN="TOP" HEIGHT="1">
					<IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/>
				</TD>
			</TR>
			<TR>
				<TD></TD>
				<TD background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir">
					<IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/>
				</TD>
				<TD></TD>
			</TR>
		</TABLE>
		<div class="width-outer-70">
		<IF COND="IsVariable.Locale=true">
		<THEN>
		<table><tr><td>
			<XLAT.LOOKUP KEY="dvin/UI/Save" VARNAME="_XLAT_" ESCAPE="true"/>
			<A HREF="javascript:void(0);" ONCLICK="return GotoNextStep(this.form);" ONMOUSEOVER="window.status='Variables._XLAT_';return true;" ONMOUSEOUT="window.status='';return true" REPLACEALL="Variables._XLAT_">
				<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Save"/></CALLELEMENT>
			</A>
			</td><td>
			<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_XLAT_" ESCAPE="true"/>
            <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/LocaleFront" outstring="urlocalefront">
                <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                         <satellite.argument name="action" value="cancel"/>
                                          </SATELLITE.LINK>
			<A HREF="Variables.urlocalefront" ONMOUSEOVER="window.status='Variables._XLAT_';return true;" ONMOUSEOUT="window.status='';return true" REPLACEALL="Variables.urlocalefront,Variables._XLAT_">
				<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT>
			</A>
			<INPUT TYPE="HIDDEN" NAME="Locale" VALUE="Variables.Locale" REPLACEALL="Variables.Locale"/>
		</td></tr></table>
		</THEN>
		<ELSE>			
			<IF COND="Variables.action=new">
			<THEN>
				<table><tr><td>
				<XLAT.LOOKUP KEY="dvin/UI/Save" VARNAME="_XLAT_" ESCAPE="true"/>
				<A HREF="javascript:void(0);" ONCLICK="return GotoNextStep(this.form);" ONMOUSEOVER="window.status='Variables._XLAT_';return true;" ONMOUSEOUT="window.status='';return true" REPLACEALL="Variables._XLAT_">
					<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Save"/></CALLELEMENT>
				</A>
				</td><td>
				<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_XLAT_" ESCAPE="true"/>
                <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/LocaleFront" outstring="urlocalefront">
                    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                         <satellite.argument name="action" value="cancel"/>
                                          </SATELLITE.LINK>
				<A HREF="Variables.urlocalefront" ONMOUSEOVER="window.status='Variables._XLAT_';return true;" ONMOUSEOUT="window.status='';return true" REPLACEALL="Variables.urlocalefront,Variables._XLAT_">
					<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT>
				</A>
				</td></tr></table>
			</THEN>
			<ELSE>
				<XLAT.LOOKUP KEY="dvin/Common/New" VARNAME="_XLAT_" ESCAPE="true"/>
                <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/LocaleFront" outstring="urlocalefront">
                    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                         <satellite.argument name="action" value="new"/>
                                          </SATELLITE.LINK>
				<A HREF="Variables.urlocalefront" ONMOUSEOVER="window.status='Variables._XLAT_';return true;" ONMOUSEOUT="window.status='';return true" REPLACEALL="Variables.urlocalefront,Variables._XLAT_">
					<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNew"/></CALLELEMENT>
				</A>
			</ELSE>
			</IF>			
		</ELSE>
		</IF>
		</div>
	</ELSE>
	</IF>
	<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/LocalePost"/>


</FTCS> 
