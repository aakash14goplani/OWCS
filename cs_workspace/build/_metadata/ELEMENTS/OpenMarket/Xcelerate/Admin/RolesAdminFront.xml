<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateC/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Admin/RolesAdmin.xml $ 

-->
<!-- OpenMarket/Xcelerate/Admin/RolesAdmin

 INPUT

 OUTPUT

 HISTORY
 [2007-09-18 KGF]
 * XSS fixes (adapted from 6.3 fixes):
   * isCleanString function usage
   * CSVAR -> STRING.STREAM
 * changed definitions of 'obj' to just forms[0] (not .elements[0])
 [2008-02-25 KGF]
 * further XSS fix: encode html special chars in description field
-->
<CALLELEMENT NAME="OpenMarket/Xcelerate/Scripts/ValidateInputForXSS" />
<SCRIPT LANGUAGE="JavaScript">
<![CDATA[
function checkfields()
{
	var obj = document.forms[0];
	//Don't allow backslash in role name
	var isclean = isCleanString(obj.elements['name'].value,'\\');
	if (!isclean) {
		alert("]]><XLAT.STREAM KEY="dvin/FlexibleAssets/Attributes/ApostropheNotAllowed" ESCAPE="true" ENCODE="false"/><![CDATA[");
		return false;
	}
	if ( (obj.elements['name'].value.length == 0) ||
		 (obj.elements['name'].value.match(/^[\s]/) != null) ||
		 (obj.elements['name'].value.substr(obj.elements['name'].value.length - 1) == ' ') ) {
	
	//Here means something is wrong, let us figure out what
	
			if (obj.elements['name'].value.length == 0) {
				]]>
				alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/Youmustspecifyanameforthisrole" ESCAPE="true" ENCODE="false"/>");
				<![CDATA[
			}
			
			if ( obj.elements['name'].value.match(/^[\s]/) != null ) {
				]]>
				alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/Rolenamescannotstartwithaspace" ESCAPE="true" ENCODE="false"/>");
				<![CDATA[
			}
			
			if ( obj.elements['name'].value.substr(obj.elements['name'].value.length - 1) == ' ' ) {
				]]>
				alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/Rolenamescannotendwithaspace" ESCAPE="true" ENCODE="false"/>");
				<![CDATA[
			}
			obj.elements['name'].focus();
			return false;
	}
	if (obj.elements['description'].value=="")
	{
		]]>
		alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/mustspecifydescriptionrole" ESCAPE="true" ENCODE="false"/>");
		<![CDATA[
		obj.elements['description'].focus();
		return false;
	}
	return true;
}

]]>
</SCRIPT>


<STRING.ENCODE VARIABLE="cs_environment" VARNAME="cs_environment"/>
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>
<STRING.ENCODE VARIABLE="cs_formmode" VARNAME="cs_formmode"/>
    <setvar NAME="doform" VALUE="false"/>
<IF COND="Variables.action=list">
<THEN>

	<IF COND="IsVariable.orderby!=true">
	<THEN>
		<SETVAR NAME="orderby" VALUE="id"/>
	</THEN>
	</IF>
	
<ROLEMANAGER.GETROLENAMES LISTVARNAME="LstAcl"/>
<IF COND="Variables.showtitle!=false">
<THEN>                                          
	<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
	<tr><td>
		<span class="title-text"><XLAT.STREAM KEY="dvin/Common/Roles"/></span>
	</td></tr>
	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
	</table>
</THEN>
</IF>

	<table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-50">
		<tr>
			<td></td><td class="tile-dark" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
		</tr>
		<tr>
			<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
			<td >
				<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff"><tr><td colspan="7" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
					<tr><td class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
                                        <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/RolesAdminFront" outstring="urlrolesadminfront">
                                            <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                            <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="list"/>
                                                          </SATELLITE.LINK>
                                        <A HREF="Variables.urlrolesadminfront" REPLACEALL="Variables.urlrolesadminfront"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/AT/Common/Name"/></DIV></A></td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
                                        <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/RolesAdminFront" outstring="urlrolesadminfront">
                                            <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                            <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="list"/>
                                                         <satellite.argument name="orderby" value="description"/>
                                                          </SATELLITE.LINK>
                                        <A HREF="Variables.urlrolesadminfront" REPLACEALL="Variables.urlrolesadminfront"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/AT/Common/Description"/></DIV></A></td>
						<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
					</tr>
					<tr><td colspan="7" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
						<!-- Loop over all search results. -->
			   			<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
						<SETVAR NAME="separatorLine" VALUE="0"/>
						<LOOP LIST="LstAcl">
		<substitute STR="LstAcl.aclname" WITH="%20" WHAT="/XCEL-SEP/" OUTSTR="rolename"/>

	  <ROLEMANAGER.LOAD NAME="Variables.rolename" OBJVARNAME="roleInst"/>
	  <ROLE.GETDESCRIPTION NAME="roleInst" VARNAME="roleDescription"/>
							<IF COND="Variables.separatorLine=1">
							<THEN>
								<!--<tr>
									<td colspan="7" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>-->
							</THEN>
							</IF>
							<SETVAR NAME="separatorLine" VALUE="1"/>
			
							<tr class="Variables.rowStyle"  REPLACEALL="Variables.rowStyle"><td><BR /></td>
							<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
	    <!-- construct encoded urls -->
            <ics.encode base="ContentServer" session="true" output="inspect">
                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/RolesAdminFront"/>
                <ics.argument name="action" value="details"/>
                <ics.argument name="name" value="Variables.rolename"/>
            </ics.encode>
            <ics.encode base="ContentServer" session="true" output="edit">
                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/RolesAdminFront"/>
                <ics.argument name="action" value="edit"/>
                <ics.argument name="name" value="Variables.rolename"/>
            </ics.encode>
            <ics.encode base="ContentServer" session="true" output="delete">
                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/RolesAdminFront"/>
                <ics.argument name="action" value="confirmdelete"/>
                <ics.argument name="name" value="Variables.rolename"/>
            </ics.encode>
							<XLAT.LOOKUP KEY="dvin/Common/Inspect" VARNAME="_XLAT_" ESCAPE="true"/>
							<XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisRole" VARNAME="_alt_"/>
							<A HREF="Variables.inspect" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.inspect,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconInspectContent.gif"  border="0" alt="Variables._alt_" title="Variables._alt_"  REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
							<XLAT.LOOKUP KEY="dvin/Common/Edit" VARNAME="_XLAT_" ESCAPE="true"/>
							<XLAT.LOOKUP KEY="dvin/UI/Admin/EditThisRole" VARNAME="_alt_"/>
							<A HREF="Variables.edit" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.edit,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconEditContent.gif"  border="0" alt="Variables._alt_" title="Variables._alt_"  REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
							<XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/>
							<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisRole" VARNAME="_alt_"/>
							<A HREF="Variables.delete" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.delete,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContent.gif"  border="0" alt="Variables._alt_" title="Variables._alt_"  REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
							
							</td>
					                <td><BR /></td><td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
					                    <DIV class="small-text-inset">
                  							<XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisRole" VARNAME="_XLAT_" ESCAPE="true"/>
											<A HREF="Variables.inspect" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true"  REPLACEALL="Variables._XLAT_,Variables.inspect"><STRING.STREAM VARIABLE="rolename"/></A>
										</DIV>
									</td>
									<td><BR /></td><td VALIGN="TOP" ALIGN="LEFT">
					                    <DIV class="small-text-inset">
					                    <STRING.STREAM VARIABLE="roleDescription"/>
					                    </DIV>
					                 </td>
					                 	<td><BR /></td></tr>
					            <IF COND="Variables.rowStyle=tile-row-normal">
					            <THEN><SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
					            </THEN>
					            <ELSE><SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
					            </ELSE>
					            </IF>
							</LOOP>
							</table>
						</td>
						<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
						</tr>
					<tr>
					<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
					</tr>
					<tr>
					<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
					</tr>
					</table> 

    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/RolesAdminFront" outstring="AddRoleFrontURL">
        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="new"/>
                                                          </SATELLITE.LINK>
<div class="width-outer-70">
<A HREF="Variables.AddRoleFrontURL" REPLACEALL="Variables.AddRoleFrontURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNewRole"/></CALLELEMENT></A>
</div>    		

</THEN>
</IF> <!-- end action=list -->

    <if COND="Variables.action=details">
    <then>
	  <setvar NAME="existingrole" VALUE="true"/>
	<substitute STR="Variables.name" WITH="%20" WHAT="/XCEL-SEP/" OUTSTR="name"/>
	  <INPUT TYPE="HIDDEN" NAME="existingrole" VALUE="Variables.existingrole" REPLACEALL="Variables.existingrole"/> 
  	  <setvar NAME="errno" VALUE="0"/>
	  <ROLEMANAGER.LOAD NAME="Variables.name" OBJVARNAME="roleInst"/>
	  <ROLE.GETDESCRIPTION NAME="roleInst" VARNAME="roleDescription"/>
	  <ROLE.GETNAME NAME="roleInst" VARNAME="roleName"/>
      <IF COND="Variables.showtitle!=false">
      <THEN>                                          
		<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
			<tr><td>
				<span class="title-text"><XLAT.STREAM KEY="dvin/Common/Role"/>: <STRING.STREAM VARIABLE="roleName"/></span>
			</td></tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
		</table>
       </THEN>
       </IF>   
		                                                    
<table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-30 margin-top-zero">
	<tr><td>
		<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<tr>
				<td class="form-label-text" colspan="3">
				<table class="legacyAbar" border="0" cellpadding="0" cellspacing="0">
				<tr>
			    <!-- construct encoded urls -->
		            <ics.encode base="ContentServer" session="true" output="inspect">
		                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/RolesAdminFront"/>
		                <ics.argument name="action" value="details"/>
		                <ics.argument name="name" value="Variables.name"/>
		            </ics.encode>
		            <ics.encode base="ContentServer" session="true" output="edit">
		                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/RolesAdminFront"/>
		                <ics.argument name="action" value="edit"/>
		                <ics.argument name="name" value="Variables.name"/>
		            </ics.encode>
		            <ics.encode base="ContentServer" session="true" output="delete">
		                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/RolesAdminFront"/>
		                <ics.argument name="action" value="confirmdelete"/>
		                <ics.argument name="name" value="Variables.name"/>
		            </ics.encode>
					<td><XLAT.LOOKUP KEY="dvin/Common/Inspect" VARNAME="_XLAT_" ESCAPE="true"/>
					<XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisRole" VARNAME="_alt_"/>
					<A HREF="Variables.inspect" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.inspect,Variables._XLAT_"><img height="14" width="14" hspace="2" src="Variables.cs_imagedir/graphics/common/icon/iconInspectContentUp.gif"  border="0" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A></td>
					<td>
					<A HREF="Variables.inspect" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.inspect,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Inspect"/></span></A></td>
					<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
					<td><XLAT.LOOKUP KEY="dvin/Common/Edit" VARNAME="_XLAT_" ESCAPE="true"/>
					<XLAT.LOOKUP KEY="dvin/UI/Admin/EditThisRole" VARNAME="_alt_"/>
					<A HREF="Variables.edit" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.edit,Variables._XLAT_"><img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconEditContentUp.gif" hspace="2" border="0" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A></td>
					<td>
					<A HREF="Variables.edit" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.edit,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Edit"/></span></A></td>
					<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
					<td><XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/>
					<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisRole" VARNAME="_alt_"/>
					<A HREF="Variables.delete" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.delete,Variables._XLAT_"><img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContentUp.gif" hspace="2" border="0" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A></td>
					<td>
					<A HREF="Variables.delete" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.delete,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Delete"/></span></A></td>
					<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
					</tr>
					</table>
				</td>
			</tr></table>
			<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<!--<tr>
				<td colspan="2" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			</tr>-->
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text"><XLAT.STREAM KEY="dvin/AT/Common/Name"/>:</td>
				<td class="form-inset">
					<STRING.STREAM VARIABLE="name"/>
				</td>
			</tr>
			<!--<tr>
				<td colspan="2" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			</tr>-->
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" WIDTH="30%"><XLAT.STREAM KEY="dvin/AT/Common/Description"/>:</td>
				<td class="form-inset" WIDTH="70%">
					<NOBR><IF COND="IsVariable.roleDescription=true">
						  <THEN><STRING.STREAM VARIABLE="roleDescription"/></THEN></IF></NOBR>
				</td>
			</tr>
			</table>

	</td></tr>
</table>

    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/RolesAdminFront" outstring="urlrolesadminfront">
        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="list"/>
                                                          </SATELLITE.LINK>
<DIV class="width-outer-70"><A HREF="Variables.urlrolesadminfront" REPLACEALL="Variables.urlrolesadminfront"><IMG src="Variables.cs_imagedir/graphics/common/icon/doubleArrow.gif" WIDTH="15" HEIGHT="12" BORDER="0" REPLACEALL="Variables.cs_imagedir"/><XLAT.STREAM KEY="dvin/UI/Admin/Listallroles"/></A>
</DIV>

    </then>
    <else>
        <setvar NAME="doform" VALUE="true"/>
    </else>
    </if>

    <if COND="Variables.doform=true">
    <then>
		<if COND="Variables.action=new">
            <then>
	  <setvar NAME="existingrole" VALUE="false"/>
	  <INPUT TYPE="HIDDEN" NAME="existingrole" VALUE="Variables.existingrole" REPLACEALL="Variables.existingrole"/> 
  			<IF COND="Variables.showtitle!=false">
            <THEN>                                          
				<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
					<tr><td>
						<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/AddNewRole"/></span>
					</td></tr>
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
				</table>
			</THEN>
			</IF>       
			                              
    <table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-30">
	<tr><td>
		<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/AT/Common/Name"/>:
				</td>
				<td class="form-inset">
						<INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="32" NAME="name" VALUE=""/>
				</td><td><BR /></td>
			</tr>
			<!--<tr>
				<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			</tr>-->
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/AT/Common/Description"/>:
				</td>
				<td class="form-inset">
                  	   <INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="255" NAME="description" VALUE=""/>
				</td>
			</tr>
			<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/RolesAdminPost"/>                
			<INPUT TYPE="HIDDEN" NAME="action" VALUE="new"/>
			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/RolesAdminFront" outstring="RolesAdminFrontURL">
				<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
				<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
				 <satellite.argument name="action" value="list"/>
				  </SATELLITE.LINK>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
			<TR>
				<TD class="form-label-text"></TD><TD class="form-inset">
					<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_status_" ESCAPE="true"/>
					<A HREF="Variables.RolesAdminFrontURL" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.RolesAdminFrontURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
					<XLAT.LOOKUP KEY="dvin/UI/AddRole" VARNAME="_XLAT_" ESCAPE="true"/>
					<A HREF="javascript:void(0);" onClick="if(checkfields()!=false){document.forms['AppForm'].submit(); return false;}" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNewRole"/></CALLELEMENT></A>
				</TD>
			</TR>
			</table>
	</td></tr>
</table>
   	</then>
    	</if>    



<!-- ************** edit ****************-->

		<STRING.ENCODE VARIABLE="name" VARNAME="name"/>
		<if COND="Variables.action=edit">
            <then>
			<ROLEMANAGER.LOAD NAME="Variables.name" OBJVARNAME="roleInst"/>
			<ROLE.GETDESCRIPTION NAME="roleInst" VARNAME="roleDescription"/>
			<IF COND="IsVariable.roleDescription=false">
			<THEN>
				<SETVAR NAME="roleDescription" VALUE="Variables.empty"/>
			</THEN>
			</IF>
	  		<INPUT TYPE="HIDDEN" NAME="existingrole" VALUE="true"/>
			<STRING.ENCODE VARIABLE="name" VARNAME="name"/>
	  		<INPUT TYPE="HIDDEN" NAME="name" VALUE="Variables.name" REPLACEALL="Variables.name"/>
	  		<INPUT TYPE="HIDDEN" NAME="edit" VALUE="yes"/>
			<IF COND="Variables.showtitle!=false">
            <THEN>                                          
				<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
					<tr><td>
						<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/EditRole"/>: <STRING.STREAM VARIABLE="roleDescription"/></span>
					</td></tr>
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
				</table>                                       
             </THEN>
             </IF> 
                                                  
    <table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-30">
	<tr><td>
		<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/AT/Common/Name"/>:
				</td>
				<td class="form-inset">
					<STRING.STREAM VARIABLE="name"/>
				</td><td><BR /></td>
			</tr>
			<!--<tr>
				<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			</tr>-->
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/AT/Common/Description"/>:
				</td>
				<td class="form-inset">
					<SETVAR NAME="OutputQString" VALUE="Variables.empty"/>
					<STRING.ENCODE VARIABLE="roleDescription" VARNAME="OutputQString"/>
                 	<INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="255" NAME="description" VALUE="Variables.OutputQString" REPLACEALL="Variables.OutputQString"/>
				</td>
			</tr>
			<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/RolesAdminPost"/>                
			<INPUT TYPE="HIDDEN" NAME="action" VALUE="new"/> 
			<!-- construct encoded url -->
			<ics.encode base="ContentServer" session="true" output="inspect">
				<ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/RolesAdminFront"/>
				<ics.argument name="action" value="details"/>
				<ics.argument name="name" value="Variables.name"/>
			</ics.encode>                          
			<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_status_" ESCAPE="true"/>
			<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_ALT_"/>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
			<TR>
				<TD class="form-label-text"></TD><TD class="form-inset">
				<A HREF="Variables.inspect" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.inspect"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
				<XLAT.LOOKUP KEY="dvin/UI/SaveRole" VARNAME="_XLAT_" ESCAPE="true"/>
				<XLAT.LOOKUP KEY="dvin/UI/SaveRole" VARNAME="_ALT_"/>
				<A HREF="javascript:void(0);" onClick="if(checkfields()!=false){document.forms['AppForm'].submit(); return false;}" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Save"/></CALLELEMENT></A>
				</TD>
			</TR>
			</table>
	</td></tr>
</table>
<div class="width-outer-70">
 </div>  
    	</then>
    	</if>    
    	
    	
 <IF COND="Variables.action=confirmdelete">
<THEN>
	<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
	<tr><td>
		<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/DeleteRole"/></span>
	</td></tr>
	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
	</table>
	
 	<setvar NAME="existingrole" VALUE="true"/>
	<substitute STR="Variables.name" WITH="%20" WHAT="/XCEL-SEP/" OUTSTR="name"/>
	  <INPUT TYPE="HIDDEN" NAME="existingrole" VALUE="Variables.existingrole" REPLACEALL="Variables.existingrole"/> 
  	  <setvar NAME="errno" VALUE="0"/>
	  <ROLEMANAGER.LOAD NAME="Variables.name" OBJVARNAME="roleInst"/>
	  <ROLE.GETDESCRIPTION NAME="roleInst" VARNAME="roleDescription"/>
		
		<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteAclWarning" ENCODE="false" VARNAME="deletemessage"/>
		<div class="width-outer-70">
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
				<argument NAME="msgtext" VALUE="Variables.deletemessage"/>
				<argument NAME="severity" VALUE="warning"/>
			</callelement>							
		</div>
							
	<table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-30">
	<tr><td>
		<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">	
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/AT/Common/Name"/>:
				</td>
				<td class="form-inset">
					<STRING.ENCODE VARIABLE="name" VARNAME="name"/>
					<INPUT TYPE="HIDDEN" NAME="name" VALUE="Variables.name" REPLACEALL="Variables.name"/>
					<CSVAR NAME="Variables.name"/>
				</td>
			</tr>
			<!--<tr>
				<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			</tr>-->
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/AT/Common/Description"/>:
				</td>
				<td class="form-inset">
					<STRING.STREAM VARIABLE="roleDescription"/>
				</td>
			</tr>
			<!-- construct encoded url -->
            <ics.encode base="ContentServer" session="true" output="inspect">
                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/RolesAdminFront"/>
                <ics.argument name="action" value="details"/>
                <ics.argument name="name" value="Variables.name"/>
            </ics.encode>    

			<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_status_" ESCAPE="true"/>
			<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_ALT_"/>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
			<TR>
				<TD class="form-label-text"></TD><TD class="form-inset">
					<A HREF="Variables.inspect" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.inspect"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
					<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteRole" VARNAME="_XLAT_" ESCAPE="true"/>
					<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteRole" VARNAME="_ALT_"/>
					<A HREF="javascript:void(0);" onclick="document.forms['AppForm'].submit(); return false;" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/DeleteRole"/></CALLELEMENT></A>
				</TD>
			</TR>			     
		</table>
	</td></tr>
</table>


<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/RolesAdminPost"/>
<INPUT TYPE="HIDDEN" NAME="action" VALUE="delete"/>
	       
        </THEN>
        </IF>

    	</then>
    	</if>    


</FTCS> 
