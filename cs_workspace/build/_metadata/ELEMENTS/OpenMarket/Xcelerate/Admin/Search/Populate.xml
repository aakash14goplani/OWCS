<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateD/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Admin/Search/Populate.xml $ 
$Revision: 15 $ 
$Modtime: 9/03/04 10:48a $ 
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- SearchPopulate.xml
-
- DESCRIPTION
-    Add all assets to the SE index.
-
- ENVIRONMENT
-    Input:
-        Variables.AssetType
-	 Variables.seindex: fully specified argument for INDEXADD
-
-    HTML display:
-        "+" ticker to keep HTTP connection alive
-
-
- HISTORY 
-->


<!-- Get a list of all of the assets -->

<setvar NAME="errno" VALUE="0"/>
<SELECTTO LIST="asset" FROM="Variables.AssetType" WHAT="*"/>

<if COND="Variables.errno=-101">
  <then>
    <XLAT.LOOKUP KEY="dvin/UI/Admin/TherearenoAssetTypeassetsinthecatalog" VARNAME="msgtext"/>
    <div class="width-outer-70">
    <CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
	<ARGUMENT NAME="msgtext" VALUE="Variables.msgtext"/>
	<ARGUMENT NAME="severity" VALUE="info"/>
    </CALLELEMENT>
    </div>
  </then>
  <else>

	<!--Index all rows, all fields-->
	<setcounter NAME="ticker" VALUE="0"/>

	<UL>
	<setvar NAME="therewererecords" VALUE="0"/>
	<loop LIST="asset">

    		<if COND="asset.status!=VO">
    		<then>
    		<setvar NAME="therewererecords" VALUE="1"/>

    		<!--Remove comment bracket for debugging
    		<LI/>Indexing <CSVAR NAME="asset.id"/>.
    		-->

    		<if COND="Counters.ticker=0">
    		<then>
        		+ <!-- Progress ticker.  Keeps HTTP link alive. -->
        		<setcounter NAME="ticker" VALUE="10"/>
        		<STREAM.FLUSH/>
    		</then>
    		<else>
        		<inccounter NAME="ticker" VALUE="-1"/>
    		</else>
    		</if>

    		<!--detailArg should not be empty, so use any old junk-->
    		<setvar NAME="detailArg" VALUE="fnord"/>

    		<!--
			Add entity to index.
    		-->
    		<callelement NAME="OpenMarket/Xcelerate/AssetType/Variables.AssetType/IndexAdd"/>

    		<if COND="Variables.errno!=0">
    		<then>
			<FONT COLOR="red">(<XLAT.STREAM KEY="dvin/UI/Admin/indexerror"/> = <csvar NAME="Variables.errno"/>)</FONT>
    		</then>
    		</if>

    	</then>
    	</if>
	</loop>
	</UL>
</else>
</if>


</FTCS> 
