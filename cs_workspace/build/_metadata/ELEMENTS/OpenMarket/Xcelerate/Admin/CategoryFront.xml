<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateC/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Admin/CategoryFront.xml $ 

-->

<!--
 Confidential and Proprietary Information of FutureTense Inc.
					All Rights Reserved.

 Category.xml

 DESCRIPTION
	Admin things about a category

 HISTORY 
-->
<STRING.ENCODE VARIABLE="cs_environment" VARNAME="cs_environment"/>
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>
<STRING.ENCODE VARIABLE="cs_formmode" VARNAME="cs_formmode"/>
<STRING.ENCODE VARIABLE="assettype" VARNAME="assettype"/>
<STRING.ENCODE VARNAME="description" VARIABLE="description"/>
<SCRIPT LANGUAGE="JavaScript">
<![CDATA[
function checkfields()
{
var obj = document.forms[0].elements[0];

	if ( ( obj.form.elements['description'].value.search(/['"?;:]/) != -1 ) ||
			 ( obj.form.elements['description'].value.length == 0 ) ||
       ( obj.form.elements['description'].value.match(/^[\s]/) != null ) ) {
	
	//Here means something is wrong, let us figure out what
	
			if ( ( obj.form.elements['description'].value.search(/['"?;:]/) != -1 ) ) {
                 var replacestr=/\bVariables.description\b/   ;
                 var xlatstr= ']]><XLAT.STREAM KEY="dvin/UI/Admin/Error/Invalidcharacterindescription" ESCAPE="true" ENCODE="false"/><![CDATA[' ;
                 var newstr=xlatstr.replace(replacestr, obj.form.elements['description'].value) ;
                 alert(newstr);
			}
	
			if (obj.form.elements['description'].value.length == 0) {
				]]>
				alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/mustspecifydesccategory" ESCAPE="true" ENCODE="false"/>");
				<![CDATA[
				
			}
			
			if ( obj.form.elements['description'].value.match(/^[\s]/) != null ) {
				]]>
				alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/Descnotstartspace" ESCAPE="true" ENCODE="false"/>");
				<![CDATA[
			}
			obj.form.elements['description'].focus();
			return false;
	}
					
	if (obj.form.elements['category'].value.search(/\S/) == -1)
	{
		]]>
		alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/mustspecifycategorycodecategory" ESCAPE="true" ENCODE="false"/>");
		<![CDATA[
		obj.form.elements['category'].focus();
		return false;
	}
	return true;
}
]]>
</SCRIPT>


<ASSETTYPE.LOAD NAME="theAssetType" TYPE="Variables.assettype"/>
	
<ASSETTYPE.SCATTER NAME="theAssetType" PREFIX="at"/>
<!-- type is either front or post -->




    <setvar NAME="doform" VALUE="false"/>
	<IF COND="Variables.action=list">
	<THEN>
	<!-- list all categories for this assettype -->
          <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
              <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
              <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                         <satellite.argument name="action" value="details"/>
                                         <satellite.argument name="assettype" value="Variables.assettype"/>
                                          </SATELLITE.LINK>
 	<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
		<tr><td>
    	<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/CategoriesforAssetType"/>: <A HREF="Variables.urlassettypefront" REPLACEALL="Variables.urlassettypefront"><IMG src="Variables.cs_imagedir/graphics/common/icon/doubleArrow.gif" WIDTH="15" HEIGHT="12" BORDER="0" REPLACEALL="Variables.cs_imagedir"/><STRING.STREAM VALUE="Variables.at:description"/></A></span>
	 	</td></tr>
		<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
	</table>   

		<IF COND="IsVariable.orderby!=true">
		<THEN>
			<SETVAR NAME="orderby" VALUE="description"/>
		</THEN>
		</IF>
        <ics.literal table="Category" column="assettype" string="Variables.assettype"
         output="literal"/>
          <SETVAR NAME="tablename" VALUE="Category"/>
		<EXECSQL LIST="AssetDetails" SQL="SELECT * FROM Category WHERE assettype=Variables.literal ORDER BY Variables.orderby"/>
    	<IF COND="IsList.AssetDetails=true">
    	<THEN>
    		
    					
				<table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-30">
					<tr>
						<td></td><td class="tile-dark" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
					</tr>
					<tr>
						<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
						<td >
							<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff"><tr><td colspan="7" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
							<tr><td class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
								<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
					            <td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
                                                    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/CategoryFront" outstring="urlcatfront">
                                                        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                                        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="list"/>
                                                         <satellite.argument name="assettype" value="Variables.assettype"/>
                                                         <satellite.argument name="orderby" value="description"/>
                                                          </SATELLITE.LINK>
                                                    <A HREF="Variables.urlcatfront" REPLACEALL="Variables.urlcatfront"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/AT/Common/Description"/></DIV></A></td>
					            <td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" nowrap="true" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
                                                    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/CategoryFront" outstring="urlcatfront">
                                                        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                                        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="list"/>
                                                         <satellite.argument name="assettype" value="Variables.assettype"/>
                                                         <satellite.argument name="orderby" value="category"/>
                                                          </SATELLITE.LINK>
                                                    <A HREF="Variables.urlcatfront" REPLACEALL="Variables.urlcatfront"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/UI/Admin/CategoryCode"/></DIV></A></td>
								<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
							</tr>
							<tr><td colspan="7" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
							<!-- Loop over all search results. -->
					   			<setvar NAME="rowStyle" VALUE="tile-row-normal"/>
								<SETVAR NAME="separatorLine" VALUE="0"/>
							<LOOP LIST="AssetDetails">

									<IF COND="Variables.separatorLine=1">
									<THEN>
										<tr>
											<!--<td colspan="7" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
										</tr>
									</THEN>
									</IF>
									<SETVAR NAME="separatorLine" VALUE="1"/>
			
							<tr class="Variables.rowStyle"  REPLACEALL="Variables.rowStyle"><td><BR /></td>
							<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
            <ics.encode base="ContentServer" session="true" output="inspect">
                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/CategoryFront"/>
                <ics.argument name="action" value="details"/>
                <ics.argument name="assettype" value="Variables.assettype"/>
                <ics.argument name="category" value="AssetDetails.category"/>
            </ics.encode>
            <ics.encode base="ContentServer" session="true" output="edit">
                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/CategoryFront"/>
                <ics.argument name="action" value="edit"/>
                <ics.argument name="assettype" value="Variables.assettype"/>
                <ics.argument name="category" value="AssetDetails.category"/>
            </ics.encode>
            <ics.encode base="ContentServer" session="true" output="delete">
                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/CategoryFront"/>
                <ics.argument name="action" value="confirmdelete"/>
                <ics.argument name="assettype" value="Variables.assettype"/>
                <ics.argument name="category" value="AssetDetails.category"/>
            </ics.encode>
							<XLAT.LOOKUP KEY="dvin/Common/Inspect" VARNAME="_XLAT_" ESCAPE="true"/>
							<XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisCategory" VARNAME="_alt_"/>
							<A HREF="Variables.inspect" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.inspect,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconInspectContent.gif"  border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
							<XLAT.LOOKUP KEY="dvin/Common/Edit" VARNAME="_XLAT_" ESCAPE="true"/>
							<XLAT.LOOKUP KEY="dvin/UI/Admin/EditThisCategory" VARNAME="_alt_"/>
							<A HREF="Variables.edit" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.edit,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconEditContent.gif"  border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
							<XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/>
							<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisCategory" VARNAME="_alt_"/>
							<A HREF="Variables.delete" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.delete,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContent.gif"  border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
							
							</td>
					                <td><BR /></td><td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
					                    <DIV class="small-text-inset">
					                    <XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisCategory" VARNAME="_XLAT_" ESCAPE="true"/>
										<A HREF="Variables.inspect" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.inspect,Variables._XLAT_"><STRING.STREAM VALUE="AssetDetails.description"/></A>
										</DIV>
									</td>
									<td><BR /></td><td VALIGN="TOP" ALIGN="LEFT">
					                    <DIV class="small-text-inset">
					                    <STRING.STREAM VALUE="AssetDetails.category"/>
					                    </DIV>
					                 </td>
					                 	<td><BR /></td></tr>
					            <IF COND="Variables.rowStyle=tile-row-normal">
					            <THEN><SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
					            </THEN>
					            <ELSE><SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
					            </ELSE>
					            </IF>
							</LOOP>
							</table>
						</td>
						<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
						</tr>
					<tr>
					<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
					</tr>
					<tr>
					<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
					</tr>
					</table> 

    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/CategoryFront" outstring="AddCategoryFrontURL">
        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
		<satellite.argument name="action" value="new"/>
		<satellite.argument name="assettype" value="Variables.assettype"/>
	</SATELLITE.LINK>
		<div class="width-outer-70">
		<A HREF="Variables.AddCategoryFrontURL" REPLACEALL="Variables.AddCategoryFrontURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNewCategory"/></CALLELEMENT></A>
    	</div>
    	</THEN>
    	<ELSE>
    	
    	</ELSE>
    	</IF>
	</THEN>
	</IF>
	
	
    <if COND="Variables.action=details">
    <then>

            <ics.literal table="Category" column="assettype" string="Variables.assettype"
             output="literal"/>
             <ics.literal table="Category" column="category" string="Variables.category"
             output="1literal"/>

 


        <setvar NAME="tablename" VALUE="Category"/>
        <execsql LIST="AssetDetails" SQL="SELECT * FROM Category WHERE
                                          category=Variables.1literal AND
                                          assettype=Variables.literal"/>
            <IF COND="Variables.showheader!=false">
            <THEN>
				<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
					<tr><td>                                          
						<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/Category"/>: <STRING.STREAM VALUE="AssetDetails.description"/></span>
					</td></tr>
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
				</table>
              </THEN>
              </IF>
        
    <table class="width-outer-30 margin-top-zero" BORDER="0" CELLSPACING="0" CELLPADDING="0">
	<tr><td>
		<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<tr>
				<td class="form-label-text" colspan="3">
				<table class="legacyAbar" border="0" cellpadding="0" cellspacing="0">
				<tr>

			    <ics.encode base="ContentServer" session="true" output="inspect">
		                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/CategoryFront"/>
		                <ics.argument name="action" value="details"/>
		                <ics.argument name="assettype" value="Variables.assettype"/>
		                <ics.argument name="category" value="AssetDetails.category"/>
		            </ics.encode>
			    <ics.encode base="ContentServer" session="true" output="edit">
		                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/CategoryFront"/>
		                <ics.argument name="action" value="edit"/>
		                <ics.argument name="assettype" value="Variables.assettype"/>
		                <ics.argument name="category" value="AssetDetails.category"/>
		            </ics.encode>
			    <ics.encode base="ContentServer" session="true" output="delete">
		                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/CategoryFront"/>
		                <ics.argument name="action" value="confirmdelete"/>
		                <ics.argument name="assettype" value="Variables.assettype"/>
		                <ics.argument name="category" value="AssetDetails.category"/>
		            </ics.encode>

				<td><XLAT.LOOKUP KEY="dvin/Common/Inspect" VARNAME="_XLAT_" ESCAPE="true"/>
				<XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisCategory" VARNAME="_alt_"/>
				<A HREF="Variables.inspect" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.inspect,Variables._XLAT_"><img height="14" width="14" hspace="2" src="Variables.cs_imagedir/graphics/common/icon/iconInspectContentUp.gif"  border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A></td>
				<td>
				<A HREF="Variables.inspect" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.inspect,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Inspect"/></span></A></td>
				<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
				<td><XLAT.LOOKUP KEY="dvin/Common/Edit" VARNAME="_XLAT_" ESCAPE="true"/>
				<XLAT.LOOKUP KEY="dvin/UI/Admin/EditThisCategory" VARNAME="_alt_"/>
				<A HREF="Variables.edit" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.edit,Variables._XLAT_"><img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconEditContentUp.gif" hspace="2" border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A></td>
				<td>
				<A HREF="Variables.edit" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.edit,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Edit"/></span></A></td>

				<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>

				<td><XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/>
				<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisCategory" VARNAME="_alt_"/>
				<A HREF="Variables.delete" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.delete,Variables._XLAT_"><img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContentUp.gif" hspace="2" border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A></td>
				<td>
				<A HREF="Variables.delete" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.delete,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Delete"/></span></A></td>

				<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
				</tr>
				</table>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/AT/Common/Description"/>:
				</td>
				<td class="form-inset">
					<STRING.STREAM VALUE="AssetDetails.description"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<XLAT.STREAM KEY="dvin/UI/Admin/CategoryCode"/>:
				</td>
				<td class="form-inset">
					<STRING.STREAM VALUE="AssetDetails.category"/>
				</td>
			</tr>			
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>			
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/AssetType"/>:
				</td>
				<td class="form-inset">
                        <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
                            <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                            <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                         <satellite.argument name="action" value="details"/>
                                         <satellite.argument name="assettype" value="Variables.assettype"/>
                                          </SATELLITE.LINK>
						<A HREF="Variables.urlassettypefront" REPLACEALL="Variables.urlassettypefront"><STRING.STREAM VALUE="Variables.at:description"/></A>
				</td><td><BR /></td>
			</tr>
		</table>
	</td></tr>
</table>
<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/CategoryFront" outstring="urlcatfront">
    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="list"/>
                                                         <satellite.argument name="assettype" value="Variables.assettype"/>
                                                          </SATELLITE.LINK>
<DIV class="width-outer-70"><A HREF="Variables.urlcatfront" REPLACEALL="Variables.urlcatfront"><IMG src="Variables.cs_imagedir/graphics/common/icon/doubleArrow.gif" WIDTH="15" HEIGHT="12" BORDER="0" REPLACEALL="Variables.cs_imagedir"/><XLAT.STREAM KEY="dvin/UI/Admin/Listallcatatdescription"/></A>
</DIV>
        
    </then>
    <else>
        <setvar NAME="doform" VALUE="true"/>
    </else>
    </if>

    <if COND="Variables.doform=true">
    <then>
        <if COND="Variables.action=edit">
        <then>
        <ics.literal table="Category" column="assettype" string="Variables.assettype"
             output="literal"/>
         <ics.literal table="Category" column="category" string="Variables.category"
         output="1literal"/>

 

        <setvar NAME="tablename" VALUE="Category"/>
        <execsql LIST="AssetDetails" SQL="SELECT * FROM Category WHERE
                                          category=Variables.1literal AND
                                          assettype=Variables.literal"/>
            <IF COND="Variables.showheader!=false">
            <THEN>     
	            <table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
					<tr><td>                                     
					<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/EditCategory"/>: <STRING.STREAM VALUE="AssetDetails.description"/></span>
					</td></tr>
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
				</table>
			</THEN>
            </IF>
		<STRING.ENCODE LIST="AssetDetails" COLUMN="id" VARNAME="AssetDetailsid"/>
        <INPUT type="HIDDEN" NAME="id" VALUE="Variables.AssetDetailsid" REPLACEALL="Variables.AssetDetailsid"/>
        
   	<table class="width-outer-30" BORDER="0" CELLSPACING="0" CELLPADDING="0">
	<tr><td>
		<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/AT/Common/Description"/>:
				</td>
				<td class="form-inset">
				<STRING.ENCODE LIST="AssetDetails" COLUMN="description" VARNAME="AssetDetailsdescription"/>
                    <INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="64" NAME="description" VALUE="Variables.AssetDetailsdescription" REPLACEALL="Variables.AssetDetailsdescription"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/UI/Admin/CategoryCode"/>:
				</td>
				<td class="form-inset">
					<STRING.ENCODE LIST="AssetDetails" COLUMN="category" VARNAME="AssetDetailscategory"/>
					<INPUT TYPE="TEXT" SIZE="4" MAXLENGTH="4" NAME="category" VALUE="Variables.AssetDetailscategory" REPLACEALL="Variables.AssetDetailscategory"/>
					<INPUT TYPE="HIDDEN" NAME="origcategory" VALUE="AssetDetails.category" REPLACEALL="AssetDetails.category"/>
				</td>
			</tr>			
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>			
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/AssetType"/>:
				</td>
				<td class="form-inset">
                    <INPUT TYPE="HIDDEN" NAME="assettype" VALUE="Variables.assettype" REPLACEALL="Variables.assettype"/>
					<STRING.STREAM VALUE="Variables.at:description"/>
				</td><td><BR /></td>
			</tr>
			<ics.encode base="ContentServer" session="true" output="inspect">
		<ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/CategoryFront"/>
		<ics.argument name="action" value="details"/>
		<ics.argument name="assettype" value="Variables.assettype"/>
		<ics.argument name="category" value="AssetDetails.category"/>
			</ics.encode>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
			<TR>
				<TD class="form-label-text"></TD><TD class="form-inset">
					<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_status_" ESCAPE="true"/>
					<A HREF="Variables.inspect" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.inspect"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
					<XLAT.LOOKUP KEY="dvin/UI/SaveCategory" VARNAME="_XLAT_" ESCAPE="true"/>
					<A HREF="javascript:void(0);" onClick="if(checkfields()!=false){document.forms['AppForm'].submit(); return false;}" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Save"/></CALLELEMENT></A>
				</TD>
			</TR>
		</table>
	</td></tr>
</table>     
<INPUT TYPE="HIDDEN" NAME="action" VALUE="edit"/>

        </then>
        </if>
        <IF COND="Variables.action=new">
        <THEN>
        
 			<IF COND="Variables.showheader!=false">
            <THEN> 
	            <table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
					<tr><td>                                         
						<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/AddNewCategory"/></span>
					</td></tr>
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
				</table>			
			 </THEN>
             </IF>

        
   
		<table class="width-outer-70" BORDER="0" CELLSPACING="0" CELLPADDING="0">
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/AT/Common/Description"/>:
				</td>
				<td class="form-inset">
                    <INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="64" NAME="description" VALUE=""/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/UI/Admin/CategoryCode"/>:
				</td>
				<td class="form-inset">
	               <INPUT TYPE="TEXT" SIZE="4" MAXLENGTH="4" NAME="category" VALUE=""/>
				</td>
			</tr>			
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>			
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/AssetType"/>:
				</td>
				<td class="form-inset">
                    <INPUT TYPE="HIDDEN" NAME="assettype" VALUE="Variables.assettype" REPLACEALL="Variables.assettype"/>
					<STRING.STREAM VALUE="Variables.at:description"/>
				</td><td><BR /></td>
			</tr>
			<INPUT TYPE="HIDDEN" NAME="action" VALUE="new"/>
			<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_status_" ESCAPE="true"/>
			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/CategoryFront" outstring="CategoryFrontURL">
				<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
				<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
				 <satellite.argument name="action" value="list"/>
				 <satellite.argument name="assettype" value="Variables.assettype"/>
			</SATELLITE.LINK>

			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
			<TR>
				<TD class="form-label-text"></TD><TD class="form-inset">
					<A HREF="Variables.CategoryFrontURL" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.CategoryFrontURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
					<XLAT.LOOKUP KEY="dvin/UI/SaveCategory" VARNAME="_XLAT_" ESCAPE="true"/>
					<A HREF="javascript:void(0);" onClick="if(checkfields()!=false){document.forms['AppForm'].submit(); return false;}" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNewCategory"/></CALLELEMENT></A>
				</TD>
			</TR>
			
		</table>
	   
    
		</THEN>
		</IF>
 <IF COND="Variables.action=confirmdelete">
 <THEN>
            <ics.literal table="Category" column="assettype" string="Variables.assettype"
             output="literal"/>
             <ics.literal table="Category" column="category" string="Variables.category"
             output="1literal"/>

 

         <setvar NAME="tablename" VALUE="Category"/>
        <execsql LIST="AssetDetails" SQL="SELECT * FROM Category WHERE
                                          category=Variables.1literal AND
                                          assettype=Variables.literal"/>
  	

	 <IF COND="Variables.showheader!=false">
		<THEN>     
			<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
				<tr><td>                                     
				<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/DeleteCategory"/>: <STRING.STREAM VALUE="AssetDetails.description"/></span>
				</td></tr>
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
			</table>
		</THEN>
    </IF>
	

	<div class="width-outer-70">                                        
	<XLAT.LOOKUP KEY="dvin/UI/Admin/DeletethiscategoryQ" VARNAME="msgtext" ENCODE="false"/>                                
	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
		<argument NAME="severity" VALUE="warning"/>
	</callelement>							
	</div>						
	<table class="width-outer-30" BORDER="0" CELLSPACING="0" CELLPADDING="0">
	<tr><td>
		<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/Common/Description"/>:
				</td>
				<td class="form-inset">
					<STRING.STREAM VALUE="AssetDetails.description"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Admin/CategoryCode"/>:
				</td>
				<td class="form-inset">
					<STRING.STREAM VALUE="AssetDetails.category"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>			
			<tr>
				<td class="form-label-text">
					<NOBR><XLAT.STREAM KEY="dvin/UI/AssetType"/>:</NOBR>
				</td>
				<td class="form-inset">
					<INPUT TYPE="HIDDEN" NAME="assettype" VALUE="Variables.assettype" REPLACEALL="Variables.assettype"/>
					<STRING.STREAM VALUE="Variables.at:description"/>
				</td><td><BR /></td>
			</tr>
			<ics.encode base="ContentServer" session="true" output="inspect">
                <ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/CategoryFront"/>
                <ics.argument name="action" value="details"/>
                <ics.argument name="assettype" value="Variables.assettype"/>
                <ics.argument name="category" value="Variables.category"/>
            </ics.encode>
			
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
			<TR>
				<TD class="form-label-text"></TD><TD class="form-inset">			
				<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_status_" ESCAPE="true"/>
				<A HREF="Variables.inspect" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.inspect"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
				<XLAT.LOOKUP KEY="dvin/UI/DeleteCategory" VARNAME="_XLAT_" ESCAPE="true"/>
				<A HREF="javascript:void(0);" onclick="document.forms['AppForm'].submit(); return false;" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/DeleteCategory"/></CALLELEMENT></A>
				</TD>
			</TR>
		</table>
	</td></tr>
</table>

<INPUT TYPE="HIDDEN" NAME="id" VALUE="AssetDetails.id" REPLACEALL="AssetDetails.id"/>
<INPUT TYPE="HIDDEN" NAME="action" VALUE="delete"/>
	    
 </THEN>
 </IF>
   <INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/CategoryPost"/>                
    </then>
    </if>    



</FTCS>
