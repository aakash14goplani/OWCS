<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">

<FTCS Version="1.1">
<!--
$Logfile: /VerticalApps/XcelerateB/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Actions/Util/ShowError.xml $
$Revision: 22 $
$Modtime: 5/14/02 3:05p $
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- ShowError.xml
-
- DESCRIPTION
-    given an error code, display the
-    associated error file
-
- HISTORY
-->


<!-- Check to see if there was an error -->

	<IF COND="IsVariable.error=true">
		<THEN>
			<setvar name="errorcode" value="Variables.errno"/>
			<div class="width-outer-70">
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
				<argument NAME="elem" VALUE="Variables.error"/>
				<argument NAME="severity" VALUE="error"/>
			</callelement>
			</div>
					<!-- clear variable, so subsequent call to Show Message does not display old message -->
					<REMOVEVAR NAME="elem"/>
<!-- Send an email if requested -->

			<SETVAR NAME="errormsg" VALUE="Variables.errormsg"/>
			<IF COND="Variables.errorbyemail=true">
				<THEN>
					<!-- the errorbyemail flag is set
						 when an event is what drives
						 an Xcelerate function (such
						 as schedule publish) -->
					<sendmail TO="Variables.emailaddress" SUBJECT="divine CS Direct Error Message" BODY="Variables.error"/>
				</THEN>
				<ELSE>
					<!-- Put this back in when a debug flag is set
					<CSVAR NAME="Variables.errormsg"/>
					-->
				</ELSE>
			</IF>
		</THEN>
	</IF>
</FTCS>