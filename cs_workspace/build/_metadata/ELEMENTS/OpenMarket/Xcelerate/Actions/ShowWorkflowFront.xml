<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Xcelerate/Actions/ShowWorkflowFront

 INPUT

 OUTPUT

-->
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>
<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
		<tr><td>
			<span class="title-text"><XLAT.STREAM KEY="dvin/Common/Workflow"/></span>
		</td></tr>
		<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
</table>
<table border="0" cellpadding="0" cellspacing="0" class="width-outer-70">
	<tr>
		<td>
		
    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/ShowWorkListFront" outstring="ShowMyAssignmentsURL">
        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
    </SATELLITE.LINK>
    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/ShowCheckoutsFront" outstring="ShowMyCheckoutsURL">
        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
    </SATELLITE.LINK>
    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/ShowRecentFront" outstring="ShowRecentAssetsURL">
        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
    </SATELLITE.LINK>
    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/WorkflowReportFront" outstring="NewWFReportURL">
        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
    </SATELLITE.LINK>
    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/CreateWorkflowGroupFront" outstring="CreateWorkflowGroupURL">
        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
    </SATELLITE.LINK>
	<table border="0" cellpadding="0" cellspacing="0">

	<tr>
		<td><span class="table-header-text"><XLAT.STREAM KEY="dvin/UI/Pleaseselectoneofthefollowingitems"/></span><BR/>&nbsp;</td>
	</tr>
	<tr>
	<td><a href="Variables.NewWFReportURL" REPLACEALL="Variables.NewWFReportURL"><XLAT.STREAM KEY="dvin/UI/CreateaWorkflowReport"/></a></td><td></td>
	</tr>
	<tr><td>&nbsp;</td></tr>
	<tr>
	<td><a href="Variables.CreateWorkflowGroupURL" REPLACEALL="Variables.CreateWorkflowGroupURL"><XLAT.STREAM KEY="dvin/UI/CreateAWorkflowGroup"/></a></td><td></td>
	</tr>
	</table>
</td>
</tr>
</table>

<!-- Table header -->
	<table class="width-outer-70" BORDER="0" CELLSPACING="0" CELLPADDING="0"><tr><td class="title-value-text"><XLAT.STREAM KEY="dvin/UI/WorkflowGroups"/></td></tr>
		<tr>
			<td><img height="5" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
		</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
		</table>
     <table class="width-outer-70" BORDER="0" CELLSPACING="0" CELLPADDING="0">
     <tr>
		<td></td><td class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
	</tr>
	<tr>
	<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
	<td >
	<table cellpadding="0" cellspacing="0" border="0" class="width-inner-100"><tr><td colspan="10" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
		<tr><td class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
            <td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/AT/Common/Name"/></DIV></td>
            <td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/AT/Common/Description"/></DIV></td>
            <td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/WorkflowProcess"/></DIV></td>
            <td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/Items"/></DIV></td>
			<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
		</tr>
<tr><td colspan="10" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>

				<!-- Loop over all search results. -->
     			<setvar NAME="rowStyle" VALUE="tile-row-normal"/>
				<SETVAR NAME="separatorLine" VALUE="0"/>	
	<SELECTTO LIST="ActiveWfl" FROM="WorkflowGroups" WHAT="*" ORDERBY="description"/>
    	<LOOP LIST="ActiveWfl">
		<WORKFLOWENGINE.GETGROUPNAME NAME="ActiveWfl.name" OBJVARNAME="grpobj"/>
		<!-- show groups only specific to current site -->
		<WORKFLOWGROUP.GETSITES NAME="grpobj" OBJVARNAME="siteobj"/>
		<SITELIST.GETALL NAME="siteobj" VARNAME="sites"/>
		<if COND="SessionVariables.pubid=Variables.sites">
		<then>
				<IF COND="Variables.separatorLine=1">
					<THEN>
					<tr>
						<!--<td colspan="10" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
					</tr>
					</THEN>
				</IF>

				<SETVAR NAME="separatorLine" VALUE="1"/>

    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/WorkflowGroupDetailsFront" outstring="EditAGroupURL">
        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
        <satellite.argument name="id" value="ActiveWfl.id"/>
    </SATELLITE.LINK>

			<tr class="Variables.rowStyle"  REPLACEALL="Variables.rowStyle"><td><BR /></td>
                <td>
                <XLAT.LOOKUP KEY="dvin/Common/Inspect" VARNAME="_XLAT_" ESCAPE="true"/>
                <XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisGroup" VARNAME="_ALT_"/>
                <A HREF="Variables.EditAGroupURL" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.EditAGroupURL,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconInspectContent.gif" border="0" alt="Variables._ALT_" title="Variables._ALT_"  REPLACEALL="Variables.cs_imagedir,Variables._ALT_"/></A>
    <WORKFLOWENGINE.CANDELETEGROUP SITE="SessionVariables.pubid" ID="ActiveWfl.id" VARNAME="canedit"/>
    <WORKFLOWENGINE.GETGROUPMEMBERS GROUPID="ActiveWfl.id" PREFIX="GroupItems"/>
      <!-- Active Wf group cannot be edited -->
    <SETVAR NAME="isGroupActive" VALUE="false"/>
    <IF COND="Variables.GroupItemsTotal!=0">
    <THEN>
        <setcounter name="count" value="0"/>
            <LOOP FROM="0" COUNT="Variables.GroupItemsTotal">
            <WorkflowEngine.IsObjectAssignedToGroup OBJECT="GroupItemsCounters.count" VARNAME="isAssigned"/>
            <IF COND="Variables.isAssigned=true">
            <THEN>
                <SETVAR NAME="isGroupActive" VALUE="true"/>
            </THEN>
            </IF>
            <INCCounter Name="count" Value="1"/>
        </LOOP>
    </THEN>
    </IF>
    <IF COND="Variables.isGroupActive=true">
    <THEN>
        <SETVAR NAME="canedit" VALUE="false"/>
    </THEN>
    </IF>

	<if COND="Variables.canedit=true">
        <then>
            
             <XLAT.LOOKUP KEY="dvin/Common/Edit" VARNAME="_XLAT_" ESCAPE="true"/>
             <XLAT.LOOKUP KEY="dvin/UI/Admin/EditThisGroup" VARNAME="_ALT_"/>
             <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/EditWorkflowGroupFront" outstring="urlEditwfGroup">
                 <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                 <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                 <satellite.argument name="id" value="ActiveWfl.id"/>
                 <satellite.argument name="action" value="update"/>
             </SATELLITE.LINK>
             <A HREF="Variables.urlEditwfGroup" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlEditwfGroup,Variables._XLAT_"><img vspace="4" hspace="2" src="Variables.cs_imagedir/graphics/common/icon/iconEditContent.gif"  border="0" alt="Variables._ALT_" title="Variables._ALT_" REPLACEALL="Variables.cs_imagedir,Variables._ALT_"/></A>
            
			<IF COND="Variables.GroupItemsTotal=0">
			<THEN><XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/>
                              <XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisGroup" VARNAME="_ALT_"/>
          <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/DeleteGroupFront" outstring="urldelGroupfront">
              <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                          <satellite.argument name="id" value="ActiveWfl.id"/>
                                          <satellite.argument name="CancelReturn" value="ShowWorkflowFront"/>
                                           </SATELLITE.LINK>
			<A HREF="Variables.urldelGroupfront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urldelGroupfront,Variables._XLAT_"><img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContent.gif" hspace="2" vspace="4" border="0" alt="Variables._ALT_" title="Variables._ALT_"  REPLACEALL="Variables.cs_imagedir,Variables._ALT_"/></A></THEN>
             <ELSE><XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisGroup" VARNAME="_ALT_"/><img height="14" width="14" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContentX.gif" hspace="2" border="0" alt="Variables._ALT_" title="Variables._ALT_" REPLACEALL="Variables.cs_imagedir,Variables._ALT_"/></ELSE>
             </IF>
        </then>
        <else><XLAT.LOOKUP KEY="dvin/UI/Admin/notallowedtoeditthisgroup" VARNAME="_ALT_"/><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconEditContentX.gif"  border="0" alt="Variables._ALT_" title="Variables._ALT_"  REPLACEALL="Variables.cs_imagedir,Variables._ALT_"/><XLAT.LOOKUP KEY="dvin/UI/Admin/notallowedtodeletethisgroup" VARNAME="_ALT_"/><img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContentX.gif" hspace="2" vspace="4" border="0" alt="Variables._ALT_" title="Variables._ALT_" REPLACEALL="Variables.cs_imagedir,Variables._ALT_"/>
</else>
        </if>
                <BR /></td>
                
                <td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
                    <DIV class="small-text-inset">
					<a href="Variables.EditAGroupURL" REPLACEALL="Variables.EditAGroupURL"><STRING.STREAM VALUE="ActiveWfl.name"/></a>
					</DIV>
				</td>
				<td><BR /></td><td><DIV class="small-text-inset">
				<STRING.STREAM VALUE="ActiveWfl.description"/><BR />
				</DIV>
				</td>
                <td><BR /></td><td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
                    <DIV class="small-text-inset">
                    <WORKFLOWENGINE.GETPROCESSID ID="ActiveWfl.processid" OBJVARNAME="WflProcess"/>
                    <WORKFLOWPROCESS.GETPROCESSNAME NAME="WflProcess" VARNAME="processName"/>
                    <STRING.STREAM VALUE="Variables.processName"/><BR />
					</DIV>
				</td>

                <td><BR /></td><td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
			

                    <DIV class="small-text-inset">

                        <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/WorkflowGroupDetailsFront" outstring="SeeAssignmentsURL">
                            <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                            <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                              <satellite.argument name="id" value="ActiveWfl.id"/>
                                                              <satellite.argument name="action" value="contents"/>
                                                               </SATELLITE.LINK>
						<a href="Variables.SeeAssignmentsURL" REPLACEALL="Variables.SeeAssignmentsURL"><STRING.STREAM VALUE="Variables.GroupItemsTotal"/></a>

					</DIV>
				</td>			

                <td><BR /></td></tr>
            <IF COND="Variables.rowStyle=tile-row-normal">
            <THEN><SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
            </THEN>
            <ELSE><SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
            </ELSE>
            </IF>
				</then>
				</if>
				</LOOP>
			</table>
	</td>
		<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
		</tr>
<tr>
<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
</tr>
<tr>
<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
</tr>
</table>

<callelement NAME="OpenMarket/Xcelerate/Actions/wfReportAdmin" SCOPED="LOCAL">
    <ARGUMENT  NAME="allAssetTypes"  VALUE="all"/>
</callelement>
  
</FTCS> 
