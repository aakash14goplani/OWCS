<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateD/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Actions/Workflow/GroupedTileReportGuts.xml $ 
$Revision: 9 $ 
$Modtime: 8/10/04 11:24a $ 
-->
<!-- OpenMarket/Xcelerate/Actions/Workflow/GroupedTileReportGuts
-
- INPUT
-
- Scattered WorkflowAssigment objects, prefix "allAssignments:"
- A comma-separated string of indices, named "itemlist"
-
- OUTPUT
-
-->
    
	<STRINGLIST NAME="assignment_list" STR="Variables.itemlist" DELIM=","/>

	<SETCOUNTER NAME="assignment_count" VALUE="0"/>
	<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
	
	<LOOP LIST="assignment_list">

		<SETCOUNTER NAME="count" VALUE="assignment_list.ITEM"/>

		<WorkflowAssignment.GetID NAME="allAssignments:Counters.count" VARNAME="assignmentid"/>
		<WorkflowAssignment.GetAssignedObject NAME="allAssignments:Counters.count" OBJVARNAME="workflowObject"/>
		<WorkflowAsset.GetAssetId OBJECT="workflowObject" VARNAME="workflow_assetid" />
		<WorkflowAsset.GetAssetType OBJECT="workflowObject" VARNAME="workflow_assettype" />
		<SETVAR NAME="errno" VALUE="0"/>

		<!-- Mike: An ugly hack to filter out specific assettypes -->
		<IF COND="Variables.report_assets!=all">
		<THEN>
			<ISINLIST STR="Variables.assettypes" ITEM="Variables.workflow_assettype"/>
			<SETVAR NAME="doThisAsset" VALUE="Variables.errno"/>
		</THEN>
		<ELSE>
			<SETVAR NAME="doThisAsset" VALUE="1"/>
		</ELSE>
		</IF>

	<IF COND="Counters.assignment_count!=Variables.ResultLimit">
	<THEN>
	<IF COND="Variables.doThisAsset=1">
	<THEN>    
		<tr class="Variables.rowStyle" REPLACEALL="Variables.rowStyle">
		    <!--js-->
           <td><IMG WIDTH="10" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
		   <td style="padding : 0px;"><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
                              <PREVIEWURL.MAKEURL VARNAME="previewURL" ASSETTYPE="Variables.workflow_assettype" ASSETID="Variables.workflow_assetid" PUBID="SessionVariables.pubid"/>
                             <IF COND="IsVariable.previewURL=true">
                             <THEN>
                                 <XLAT.LOOKUP KEY="dvin/Common/PreviewThisItem" VARNAME="_XLAT_"/>
                                 <XLAT.LOOKUP KEY="dvin/Common/PreviewThisItem" VARNAME="mouseover" ESCAPE="true"/>
                                 <A HREF="javascript:void(0)" onclick="openPreview('Variables.previewURL');"
                                    onmouseover="window.status='Variables.mouseover';return true;" onmouseout="window.status='';return true"
                                    REPLACEALL="Variables.previewURL,Variables.mouseover"><img height="14" width="14" hspace="2" vspace="4"
                                    src="Variables.cs_imagedir/graphics/common/icon/iconPreviewContent.gif" border="0" title="Variables._XLAT_" alt="Variables._XLAT_"
                                    REPLACEALL="Variables.cs_imagedir,Variables._XLAT_"/></A>
                             </THEN>
                              </IF>

                            <XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="_XLAT_"/>
                            <XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="mouseover" ESCAPE="true"/>
                            <CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
                                <ARGUMENT NAME="assettype" VALUE="Variables.workflow_assettype"/>
                                <ARGUMENT NAME="assetid" VALUE="Variables.workflow_assetid"/>
                                <ARGUMENT NAME="varname" VALUE="urlInspectItem"/>
                                <ARGUMENT NAME="function" VALUE="inspect"/>
                            </CALLELEMENT>
                            <A href="Variables.urlInspectItem" OnMouseOver="window.status='Variables.mouseover'; return true"
                               OnMouseOut="return window.status='';" REPLACEALL="Variables.urlInspectItem,Variables.mouseover">
                                <img height="14" width="14" hspace="2" vspace="4"  src="Variables.cs_imagedir/graphics/common/icon/iconInspectContent.gif" border="0"
                                     title="Variables._XLAT_" alt="Variables._XLAT_" REPLACEALL="Variables.cs_imagedir,Variables._XLAT_"/></A>

                        <XLAT.LOOKUP KEY="dvin/Common/EditThisItem" VARNAME="_XLAT_"/>
                        <XLAT.LOOKUP KEY="dvin/Common/EditThisItem" VARNAME="mouseover" ESCAPE="true"/>
                        <CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
                            <ARGUMENT NAME="assettype" VALUE="Variables.workflow_assettype"/>
                            <ARGUMENT NAME="assetid" VALUE="Variables.workflow_assetid"/>
                            <ARGUMENT NAME="varname" VALUE="urlEditItem"/>
                            <ARGUMENT NAME="function" VALUE="edit"/>
                        </CALLELEMENT>

                        <IF COND="Variables.workflow_assettype=Template">
                        <THEN>
                            <IF COND="Variables.hasEditACL=true">
                            <THEN>
                                <A href="Variables.urlEditItem" OnMouseOver="window.status='Variables.mouseover'; return true" OnMouseOut="return window.status='';" REPLACEALL="Variables.urlEditItem,Variables.mouseover"><img vspace="4" hspace="2" src="Variables.cs_imagedir/graphics/common/icon/iconEditContent.gif" border="0" title="Variables._XLAT_" alt="Variables._XLAT_" REPLACEALL="Variables.cs_imagedir,Variables._XLAT_"/></A>
                            </THEN>
                            <ELSE>
                                    <XLAT.LOOKUP VARNAME="_XLAT_" KEY="dvin/AT/Template/Youdonthaveprivilegestoedit"/>
                                <img height="14" width="14" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconEditContentX.gif" border="0" hspace="2" title="Variables._XLAT_" alt="Variables._XLAT_" REPLACEALL="Variables.cs_imagedir,Variables._XLAT_"/>
                            </ELSE>
                            </IF>
                        </THEN>
                        <ELSE>
                            <A href="Variables.urlEditItem" OnMouseOver="window.status='Variables.mouseover'; return true" OnMouseOut="return window.status='';" REPLACEALL="Variables.urlEditItem,Variables.mouseover"><img vspace="4" hspace="2" src="Variables.cs_imagedir/graphics/common/icon/iconEditContent.gif" border="0" title="Variables._XLAT_" alt="Variables._XLAT_" REPLACEALL="Variables.cs_imagedir,Variables._XLAT_"/></A>
                        </ELSE>
                        </IF>
                 </td>
            <!--js-->

		<IF COND="Variables.showType=true">
		<THEN>

            <ASSETTYPE.LOAD NAME="currAT" TYPE="Variables.workflow_assettype"/>
            <ASSETTYPE.GET NAME="currAT" FIELD="description"/>
			<td style="padding : 0px;"><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
				<DIV class="small-text-inset"> 
					<STRING.STREAM VARIABLE="description"/> 
					<BR />
				</DIV> 
			</td>  
		</THEN>
		</IF>

		<IF COND="Variables.showId=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<STRING.STREAM VALUE="Variables.workflow_assetid"/>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>               
                
		<IF COND="Variables.showKey=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<XLAT.LOOKUP KEY="dvin/UI/ShowContent" VARNAME="_XLAT_" ESCAPE="true"/>
		 			<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
						<ARGUMENT NAME="assettype" VALUE="Variables.workflow_assettype"/>
						<ARGUMENT NAME="assetid" VALUE="Variables.workflow_assetid"/>
						<ARGUMENT NAME="varname" VALUE="urlInspectItem"/>
						<ARGUMENT NAME="function" VALUE="inspect"/>
					</CALLELEMENT>
					<ASSET.LIST TYPE="Variables.workflow_assettype" LIST="workflowasset" FIELD1="id" VALUE1="Variables.workflow_assetid"/>
					<A HREF="Variables.urlInspectItem"
							OnMouseOver="window.status='Variables._XLAT_'; return true"
							OnMouseOut="return window.status='';" REPLACEALL="Variables.urlInspectItem,Variables._XLAT_">
					<STRING.STREAM LIST="workflowasset" COLUMN="name"/>
					</A><BR />
				</DIV>
			</td>
		</THEN>
		</IF>               

		<IF COND="Variables.showDescription=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<STRING.STREAM LIST="workflowasset" COLUMN="description"/>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>               
                
		<IF COND="Variables.showAssignedTo=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<WorkflowAssignment.GetAssignedUserID NAME="allAssignments:Counters.count" VARNAME="workflow_assignedto" />
					<if COND="IsVariable.workflow_assignedto=true">
					<then>
						<WorkflowAssignment.GetAssignedUserRole NAME="allAssignments:Counters.count" VARNAME="workflow_assignedrole"/>
						<!-- getdisplayableusername will not return anything if the user has been deleted -->
						<XLAT.LOOKUP KEY="dvin/Common/deleted_user" VARNAME="uname"/>
						<UserManager.GetDisplayableUserName USER="Variables.workflow_assignedto" VARNAME="uname" />
						<STRING.STREAM VARIABLE="uname" />
						<if COND="IsVariable.workflow_assignedrole=true">
						<then>
							<STRING.STREAM VALUE="(Variables.workflow_assignedrole)"/>
						</then>
						</if>
					</then>
					<else>
						(<XLAT.STREAM KEY="dvin/Common/nobody"/>)
					</else>
					</if>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>

		<IF COND="Variables.showAssignedBy=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<WorkflowAssignment.GetAssignerUserID NAME="allAssignments:Counters.count" VARNAME="workflow_assignedby" />
					<if COND="IsVariable.workflow_assignedby=true">
					<then>
						<!-- getdisplayableusername will not return anything if the user has been deleted -->
						<XLAT.LOOKUP KEY="dvin/Common/deleted_user" VARNAME="uname"/>
						<UserManager.GetDisplayableUserName USER="Variables.workflow_assignedby" VARNAME="uname" />
						<STRING.STREAM VARIABLE="uname"/>
					</then>
					<else>
						(<XLAT.STREAM KEY="dvin/Common/lcunknown"/>)
					</else>
					</if>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>

		<IF COND="Variables.showAssignedDate=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<WorkflowAssignment.GetAssignDate NAME="allAssignments:Counters.count" VARNAME="workflow_assigndate" />
					<STRING.STREAM VALUE="Variables.workflow_assigndate"/>
					<BR />
				</DIV>
			</td>     
		</THEN>
		</IF>

		<IF COND="Variables.showActionToTake=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP"  ALIGN="LEFT">
				<DIV class="small-text-inset">
					<WorkflowAssignment.GetAssignmentComment NAME="allAssignments:Counters.count" VARNAME="workflow_assigncomment" />
					<if COND="IsVariable.workflow_assigncomment=true">
					<then>
						<STRING.LENGTH VALUE="Variables.workflow_assigncomment" VARNAME="mylength"/>
						<CALCULATOR.GO VALUE="Variables.mylength 20 GT" VARNAME="myflag"/>
						<IF COND="Variables.myflag=1">
						<THEN>
							<SUBSTRING STR="Variables.workflow_assigncomment" OUTSTR="truncated"
								INDEX="0" ENDINDEX="17"/>
							<XLAT.LOOKUP KEY="dvin/UI/ShowactionTotake" VARNAME="_XLAT_" ESCAPE="true"/>
                            <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/Workflow/ActionToTake" outstring="urlactiontotake">
                                <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                               <satellite.argument name="assignmentid" value="Variables.assignmentid"/>
                                                               </SATELLITE.LINK>
							<A HREF="javascript:void(0)" onclick="ActionText('Variables.urlactiontotake');"
								onmouseover="window.status='Variables._XLAT_';return true;"
								onmouseout="window.status='';return true;" REPLACEALL="Variables.urlactiontotake,Variables._XLAT_"><STRING.STREAM VALUE="Variables.truncated ..."/></A>
						</THEN>
						<ELSE>
							<STRING.STREAM VARIABLE="workflow_assigncomment"/>
						</ELSE>
						</IF>
					</then>
					<else>
						<XLAT.STREAM KEY="dvin/UI/Wf/Nocomment"/>
					</else>
					</if>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>

		<IF COND="Variables.showClearedBy=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<WorkflowAssignment.GetDispositionUserID NAME="allAssignments:Counters.count" VARNAME="workflow_clearedby" />
					<!-- getdisplayableusername will not return anything if the user has been deleted -->
					<XLAT.LOOKUP KEY="dvin/Common/deleted_user" VARNAME="uname"/>
					<UserManager.GetDisplayableUserName USER="Variables.workflow_clearedby" VARNAME="uname" />
					<STRING.STREAM VARIABLE="uname"/>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>

		<IF COND="Variables.showCheckout=true">
		<THEN>
			<td><br /></td>
			<td valign="top" align="left">
				<div class="small-text-inset">
				    <CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/RevisionTracking/CheckTrackingEnabled">
    				    <ARGUMENT NAME="AssetType" VALUE="Variables.workflow_assettype"/>
				    </CALLELEMENT>
				    <IF COND="Variables.trackingenabled=true">
				    <THEN>
				        <HISTORY TABLE="Variables.workflow_assettype" ASSET="Variables.workflow_assetid" LIST="ItsHistory"/>
				        <IF COND="ItsHistory.#numRows!=0">
				        <THEN>
				        	<XLAT.LOOKUP KEY="dvin/UI/AssetMgt/Checkedouttousername" lockedby="ItsHistory.lockedby" EVALALL="false" VARNAME="alttext"/>
							<img alt="Variables.alttext" src="Variables.cs_imagedir/graphics/common/icon/iconLocked.png" height="15" width="10" REPLACEALL="Variables.cs_imagedir,Variables.alttext"/>
				        </THEN>
				        </IF>
				    </THEN>
				    </IF>
				</div>
			</td>
		</THEN>
		</IF>

   
		<IF COND="Variables.showWorkflowStatus=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<!-- display the current workflow status -->
					<WorkflowAssignment.GetStateID NAME="allAssignments:Counters.count" VARNAME="workflow_stateid" />
					<WorkflowEngine.GetStateID ID="Variables.workflow_stateid" OBJVARNAME="workflow_state" />
					<WorkflowState.GetStateDescription NAME="workflow_state" VARNAME="workflow_statedescription" />
					<XLAT.LOOKUP KEY="dvin/UI/Showlowerstatus" VARNAME="_XLAT_"/>
					<XLAT.LOOKUP KEY="dvin/UI/Showlowerstatus" VARNAME="mouseover" ESCAPE="true"/>
                    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/StatusDetailsFront" outstring="urlstatusdetfront">
                        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                               <satellite.argument name="AssetType" value="Variables.workflow_assettype"/>
                                                              <satellite.argument name="id" value="Variables.workflow_assetid"/>
                                                               </SATELLITE.LINK>
					<A HREF="Variables.urlstatusdetfront" ONMOUSEOVER="window.status = 'Variables.mouseover'; return true;" ONMOUSEOUT="window.status='';return true;" REPLACEALL="Variables.urlstatusdetfront,Variables._XLAT_,Variables.mouseover" TITLE="Variables._XLAT_"><STRING.STREAM VALUE="Variables.workflow_statedescription"/></A>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>

		<IF COND="Variables.showDeadlocked=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<!-- display the current workflow status -->
					<WorkflowEngine.IsObjectDeadlocked OBJECT="workflowObject" VARNAME="isDeadlocked"/>
					<IF COND="Variables.isDeadlocked=true">
					<THEN>
						<SETVAR NAME="anyDeadlocked" VALUE="true"/>
						<IMG src="Variables.cs_imagedir/graphics/common/icon/warndeadlock.gif" HEIGHT="13" WIDTH="15" REPLACEALL="Variables.cs_imagedir"/>
					</THEN>
					</IF>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>

		<IF COND="Variables.showStepTaken=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<WorkflowAssignment.GetQueuedWorkflowStepID NAME="allAssignments:Counters.count" VARNAME="workflow_stepid" />
					<if COND="IsVariable.workflow_stepid=true">
					<then>
						<WorkflowEngine.GetStepID ID="Variables.workflow_stepid" OBJVARNAME="wfStepObj"/>
						<WorkflowStep.GetName NAME="wfStepObj" VARNAME="workflow_stepname"/>
						<STRING.STREAM VARIABLE="workflow_stepname"/>
					</then>
					<else>
						<WorkflowAssignment.GetGroupedWorkflowStepID NAME="allAssignments:Counters.count" VARNAME="workflow_stepid" />
						<if COND="IsVariable.workflow_stepid=true">
						<then>
							<WorkflowEngine.GetStepID ID="Variables.workflow_stepid" OBJVARNAME="wfStepObj"/>
							<WorkflowStep.GetName NAME="wfStepObj" VARNAME="workflow_stepname"/>
							<STRING.STREAM VARIABLE="workflow_stepname"/>
						</then>
						<else>
							-
						</else>
						</if>
					</else>
					</if>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>

		<IF COND="Variables.showClearedDate=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<WorkflowAssignment.GetDispositionDate NAME="allAssignments:Counters.count" VARNAME="workflow_cleardate" />
					<if COND="IsVariable.workflow_cleardate=true">
					<then>
						<STRING.STREAM VALUE="Variables.workflow_cleardate"/>
					</then>
					<else>
						<XLAT.STREAM KEY="dvin/UI/Wf/Stillactive"/>
					</else>
					</if>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>

		<IF COND="Variables.showDueDate=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<WorkflowAssignment.GetAssignDate NAME="allAssignments:Counters.count" VARNAME="workflow_assigndate" />
					<WorkflowAssignment.GetDeadline NAME="allAssignments:Counters.count" VARNAME="workflow_deadline" />
					<IF COND="Variables.workflow_deadline!=0">
					<THEN>
					<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Workflow/FormatDeadline" SCOPED="STACKED">
						<ARGUMENT NAME="deadline" VALUE="Variables.workflow_deadline"/>
						<ARGUMENT NAME="assigndate" VALUE="Variables.workflow_assigndate"/>
					</CALLELEMENT>
					</THEN>
					<ELSE>
					-	<BR />
					</ELSE>
					</IF>
				<!--					<WorkflowEngine.GetAbsDeadline OBJECT="workflowObject" VARNAME="workflowprocess_deadline"/>
					<IF COND="Variables.workflowprocess_deadline!=0">
					<THEN>
						<DATE.DEFAULTTZ VARNAME="tzone"/>
						<DATE.CLOCKLIST LISTVARNAME="ProcessDueDateList" TIMEZONE="Variables.tzone" CLOCK="Variables.workflowprocess_deadline"/>
						<setvar NAME="hour" VALUE="ProcessDueDateList.hour"/>
						<if COND="ProcessDueDateList.ampm=1">
						<then>
							<CALCULATOR.GO VALUE="ProcessDueDateList.hour 12 +" VARNAME="hour"/>
						</then>
						</if>

						<SETVAR NAME="pdeadline" VALUE="ProcessDueDateList.year-ProcessDueDateList.month-ProcessDueDateList.dayofmonth Variables.hour:ProcessDueDateList.minute:00"/>
						&nbsp;<STRING.STREAM VALUE="Variables.pdeadline"/><br/>
					</THEN>
					<ELSE>
					-	<BR />
					</ELSE>
					</IF> -->
				</DIV>
			</td>
		</THEN>
		</IF>

		<IF COND="Variables.showProcessDeadline=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<WorkflowEngine.GetAbsDeadline OBJECT="workflowObject" VARNAME="workflowprocess_deadline"/>
					<IF COND="Variables.workflowprocess_deadline!=0">
					<THEN>
						
						<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/ConvertJDBCDateTimeZone">
		  		<ARGUMENT NAME="inputDate" VALUE="Variables.workflowprocess_deadline" />
				<ARGUMENT NAME="inputDateType" VALUE="millis"/>
		  		<ARGUMENT NAME="fromTimeZone" VALUE="server"/>
		  		<ARGUMENT NAME="toTimeZone" VALUE="client"/>
		  </CALLELEMENT>
		  
		   <SETVAR NAME="pdeadline" VALUE="Variables.outputDate"/>
						
						&nbsp;<STRING.STREAM VALUE="Variables.pdeadline"/><br/>
					</THEN>
					<ELSE>
					-	<BR />
					</ELSE>
					</IF>
				
				</DIV>
			</td>
		</THEN>
		</IF>

		<IF COND="Variables.showActionTaken=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<WorkflowAssignment.GetDispositionComment NAME="allAssignments:Counters.count" VARNAME="workflow_clearcomment" />
					<if COND="IsVariable.workflow_clearcomment=true">
					<then>
						<STRING.LENGTH VALUE="Variables.workflow_clearcomment" VARNAME="mylength"/>
						<CALCULATOR.GO VALUE="Variables.mylength 20 GT" VARNAME="myflag"/>
						<IF COND="Variables.myflag=1">
						<THEN>
							<SUBSTRING STR="Variables.workflow_clearcomment" OUTSTR="truncated"
								INDEX="0" ENDINDEX="17"/>
							<XLAT.LOOKUP KEY="dvin/UI/Showactiontaken" VARNAME="_XLAT_" ESCAPE="true"/>
                            <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/Workflow/ActionTaken" outstring="urlactiontaken">
                                <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                               <satellite.argument name="assignmentid" value="Variables.assignmentid"/>
                                                               </SATELLITE.LINK>
							<A HREF="javascript:void(0)" onclick="ActionText('Variables.urlactiontaken');"
								onmouseover="window.status='Variables._XLAT_';return true;"
								onmouseout="window.status='';return true;" REPLACEALL="Variables.urlactiontaken,Variables._XLAT_"><STRING.STREAM VALUE="Variables.truncated ..."/></A>
						</THEN>
						<ELSE>
							<STRING.STREAM VARIABLE="workflow_clearcomment"/>
						</ELSE>
						</IF>
					</then>
					<else>
						<XLAT.STREAM KEY="dvin/UI/Wf/Nocomment"/>
					</else>
					</if>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>          

		<IF COND="Variables.showIsActive=true">
		<THEN>
			<td><BR /></td>
			<td VALIGN="TOP" ALIGN="LEFT">
				<DIV class="small-text-inset">
					<WorkflowAssignment.GetStatus NAME="allAssignments:Counters.count" VARNAME="workflow_status" />
					<if COND="Variables.workflow_status=notactive">
					<then>
						<WorkflowAssignment.GetDisposition NAME="allAssignments:Counters.count" VARNAME="workflow_status" />
					</then>
					</if>
					<STRING.STREAM VALUE="Variables.workflow_status"/>
					<BR />
				</DIV>
			</td>
		</THEN>
		</IF>
        
        <IF COND="Variables.showClearAssignment=true">
		<THEN>
			<td><BR /></td>
   			<td VALIGN="TOP" ALIGN="LEFT">
                <DIV class="small-text-inset">
                    <WorkflowAssignment.GetID NAME="allAssignments:Counters.count" VARNAME="assignmentid" />
   				    <INPUT TYPE="CHECKBOX" NAME="clearassignments" VALUE="Variables.assignmentid" REPLACEALL="Variables.assignmentid"/>
                    <BR />
                </DIV>
   			</td>
		</THEN>
		</IF>
      
		<td><BR /></td>
	</tr>
		<inccounter NAME="assignment_count" VALUE="1"/>
		<IF COND="Variables.rowStyle=tile-row-normal">
		<THEN>
			<SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
		</THEN>
		<ELSE>
			<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
		</ELSE>
		</IF>
	</THEN>
	</IF>
	</THEN>
	</IF><!-- Counters.Assignment_count not equal to ResultLimit -->
		</LOOP>

</FTCS> 
