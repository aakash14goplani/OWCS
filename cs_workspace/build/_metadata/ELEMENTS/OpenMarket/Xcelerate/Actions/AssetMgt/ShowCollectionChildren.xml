<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateC/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Actions/AssetMgt/ShowCollectionChildren.xml $ 
$Revision: 23 $ 
$Modtime: 3/01/04 9:15a $ 
-->

<!--
- Confidential and Proprietary Information of Open Market, Inc.
-					All Rights Reserved.
-
- DESCRIPTION
-	Show Collection Children
--	expects
--		Variables.assetname	- name of loaded collection for which we want children
--		Variables.allowremove - if true put up Remove checkbox
--		Variables.allowrankedit - if true allow changes to rank
-->


<ASSET.GET NAME="Variables.assetname" FIELD="subtype"/>
<ASSET.CHILDREN NAME="Variables.assetname" LIST="theAssetChildren" OBJECTTYPE="Variables.subtype" CODE="-" ORDER="nrank asc"/>

<table border="0" cellpadding="0" cellspacing="0">
  <tr>
		<td class="subtitle-text">
			<XLAT.STREAM KEY="dvin/UI/AssetMgt/Currentatplural"/>
		</td>
	</tr>
	<tr>
		<td><img height="5" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
	</tr>
</table>

     <SETCOUNTER NAME="colspan_count" VALUE="8"/>

	<IF COND="IsVariable.allowremove=true">
	<THEN>
		<INCCOUNTER NAME="colspan_count" VALUE="2"/>
	</THEN>
    </IF>
	
	<IF COND="Variables.doStartDate!=false">
		<THEN>
			<INCCOUNTER NAME="colspan_count" VALUE="2" />
		</THEN>
	</IF>

	<IF COND="Variables.doEndDate!=false">
		<THEN>
			<INCCOUNTER NAME="colspan_count" VALUE="2" />
		</THEN>
	</IF>
	
<IF COND="IsList.theAssetChildren=true">
	<THEN>

<table BORDER="0" CELLSPACING="0" CELLPADDING="0">
<tr>
	<td></td><td class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
</tr>
<tr>
<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
<td >
<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
	<tr><td colspan="Counters.colspan_count" REPLACEALL="Counters.colspan_count" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
	<tr><td class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
	
		<IF COND="IsVariable.allowremove=true">
		<THEN>
			<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/Rank"/></DIV></td>
		</THEN>
		</IF>
		
			<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/Remove"/></DIV></td>
			<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/AT/Common/Name"/></DIV></td>
			<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/AT/Common/Description"/></DIV></td>
	
			<IF COND="Variables.doStartDate!=false">
				<THEN>
					<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="fatwire/Alloy/UI/StartDate"/></DIV></td>
				</THEN>
			</IF>			

			<IF COND="Variables.doEndDate!=false">
				<THEN>
					<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="fatwire/Alloy/UI/EndDate"/></DIV></td>
				</THEN>
			</IF>			
		
		<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
		</tr>
	<tr><td colspan="Counters.colspan_count" REPLACEALL="Counters.colspan_count" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
     
	<SETCOUNTER NAME="assignment_count" VALUE="0"/>
	<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>

	<LOOP LIST="theAssetChildren">
		<IF COND="Variables.separatorLine=1">
			<THEN>
			<tr>
				<!--<td colspan="Counters.colspan_count" REPLACEALL="Counters.colspan_count" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
			</tr>
			</THEN>
		</IF>

	<setvar NAME="separatorLine" VALUE="1"/>
		<tr class="Variables.rowStyle" REPLACEALL="Variables.rowStyle">
		<td><BR /></td>

		<td><BR /></td>
		<td NOWRAP="NOWRAP" ALIGN="LEFT">
			<DIV class="small-text-inset">
				<IF COND="IsVariable.allowrankedit=true">
				<THEN>
					<INPUT TYPE="text" size="2" maxsize="2" NAME="Rank-theAssetChildren.oid,theAssetChildren.otype" VALUE="theAssetChildren.nrank" REPLACEALL="theAssetChildren.oid,theAssetChildren.nrank,theAssetChildren.otype"  onChange="setRank(this);"/>
				</THEN>
				<ELSE>
					<STRING.STREAM VALUE="theAssetChildren.nrank"/>
				</ELSE>
				</IF>
				<BR />
			</DIV>
		</td>  
		<IF COND="IsVariable.allowremove=true">
		<THEN>
					<td><BR /></td>
			<td NOWRAP="NOWRAP" ALIGN="CENTER">
				<DIV class="small-text-inset">
				<INPUT TYPE="checkbox" VALUE="theAssetChildren.nrank" NAME="Remove-theAssetChildren.oid,theAssetChildren.otype" onClick="removeRank(this,'Rank-theAssetChildren.oid,theAssetChildren.otype');" REPLACEALL="theAssetChildren.otype,theAssetChildren.oid,theAssetChildren.nrank"/>
				</DIV>
			</td>
		</THEN>
		</IF>
		<td><BR /></td>
		<td NOWRAP="NOWRAP" ALIGN="LEFT">
			<DIV class="small-text-inset">
				<XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="_XLAT_"/>
				<XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="mouseover" ESCAPE="true"/>
				<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
					<ARGUMENT NAME="assettype" VALUE="theAssetChildren.otype"/>
					<ARGUMENT NAME="assetid" VALUE="theAssetChildren.oid"/>
					<ARGUMENT NAME="varname" VALUE="urlInspectItem"/>
					<ARGUMENT NAME="function" VALUE="inspect"/>
				</CALLELEMENT>
				<A HREF="Variables.urlInspectItem" OnMouseOver="window.status='Variables.mouseover'; return true" OnMouseOut="return window.status='';" title="Variables._XLAT_"  REPLACEALL="Variables.urlInspectItem,Variables._XLAT_,Variables.mouseover">
				<STRING.STREAM LIST="theAssetChildren" COLUMN="name"/>
				</A><BR />
			</DIV>
		</td>

		<td><BR /></td>
		<td ALIGN="LEFT">
			<DIV class="small-text-inset">
				<STRING.STREAM LIST="theAssetChildren" COLUMN="description"/><BR />
			</DIV>
		</td>

		<IF COND="Variables.doStartDate!=false">
		<THEN>	
			<td><BR /></td>
			<td ALIGN="LEFT" NOWRAP="NOWRAP">
				<ICS.LISTGET LISTNAME="theAssetChildren" FIELDNAME="startdate" output="startDate"/>
				<IF COND="Variables.startDate!=Variables.empty">
				<THEN>
					
					<DATEFORMAT.CREATE NAME="dObject" DATESTYLE="SHORT" TIMESTYLE="SHORT" LOCALE="LocaleName" TIMEZONEID="SessionVariables.time.zone"/>
                    <DATEFORMAT.GETDATETIME NAME="dObject" VALUE="Variables.startDate" VALUETYPE="jdbcdate" VARNAME="startDateShortVersion" />
                    <DATEFORMAT.GETDATETIME NAME="_FormatDate_" VALUE="Variables.startDate" VALUETYPE="jdbcdate" VARNAME="startDateFullVersion" />
					<SPAN ID="startDateSpanId" TITLE="Variables.startDateFullVersion" REPLACEALL="Variables.startDateFullVersion">
						<STRING.STREAM VARIABLE="startDateShortVersion"/>
					</SPAN>
				</THEN>
				<ELSE>
					<STRING.STREAM VALUE="-" />
				</ELSE>
				</IF>
			</td>
		</THEN>			
		</IF>	

		<IF COND="Variables.doEndDate!=false">
		<THEN>	
			<td><BR /></td>
			<td ALIGN="LEFT" NOWRAP="NOWRAP">
				<ICS.LISTGET LISTNAME="theAssetChildren" FIELDNAME="enddate" output="endDate"/>
				<IF COND="Variables.endDate!=Variables.empty">
				<THEN>
                     <DATEFORMAT.CREATE NAME="dObject" DATESTYLE="SHORT" TIMESTYLE="SHORT" LOCALE="LocaleName" TIMEZONEID="SessionVariables.time.zone"/>
                     <DATEFORMAT.GETDATETIME NAME="dObject" VALUE="Variables.endDate" VALUETYPE="jdbcdate" VARNAME="endDateShortVersion" />
                     <DATEFORMAT.GETDATETIME NAME="_FormatDate_" VALUE="Variables.endDate" VALUETYPE="jdbcdate" VARNAME="endDateFullVersion" />
                     <SPAN ID="endDateSpanId" TITLE="Variables.endDateFullVersion" REPLACEALL="Variables.endDateFullVersion">
						<STRING.STREAM VARIABLE="endDateShortVersion"/>
					 </SPAN>					 
				</THEN>
				<ELSE>
					<STRING.STREAM VALUE="-" />
				</ELSE>
				</IF>
			</td>
		</THEN>			
		</IF>			
						
	<td><BR /></td>
	</tr>
		<inccounter NAME="assignment_count" VALUE="1"/>
		<IF COND="Variables.rowStyle=tile-row-normal">
		<THEN>
			<SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
		</THEN>
		<ELSE>
			<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
		</ELSE>
		</IF>

					</LOOP>
						</table>
		</td>
		<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
	</tr>
	<tr>
		<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
	</tr>
	<tr>
		<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
	</tr>
</table>

		</THEN>
		<ELSE>
		<!-- No children - no problem -->
  			<XLAT.LOOKUP KEY="dvin/AT/Collection/ShowCollectionChildren-NoAssets" VARNAME="_xlat_noassets"/>
			<div class="width-outer-70">
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
				<argument NAME="msgtext" VALUE="Variables._xlat_noassets"/>
				<argument NAME="severity" VALUE="info"/>
			</callelement>	
			</div>
			<SETVAR NAME="errno" VALUE="0"/>
		</ELSE>
		</IF>
</FTCS>
