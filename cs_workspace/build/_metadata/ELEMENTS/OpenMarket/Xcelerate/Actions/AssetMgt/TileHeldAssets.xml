<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Xcelerate/Actions/AssetMgt/TileHeldAssets

 INPUT
 Variables.list - list of blocking assets, as gotten from GetBlockingAssets or GetAllApprovedParents
 Variables.target - publish target id
 Variables.targetname - name of publish target
 Variables.heldassetid - id of held asset whose blocking assets these are
 Variables.docheckbox - true if assets needing approval should show check box, false for link
 OUTPUT

-->

<![CDATA[
<SCRIPT>
/* This function is called by the onClick handler for approving an asset. */
function checkApprove(obj)
{
	var formCnt = obj.form.elements.length;
	
	// copy this value to any other instances of this asset
	for (i=0; i  < formCnt; i++) {
        if (obj.form.elements[i].name == "approveIt") {
        		if ( obj.form.elements[i].value==obj.value ) {
        			obj.form.elements[i].checked=obj.checked;
        		}
        	}
	}
}

function changeRowColor(chbx) {
		tr = chbx.parentNode.parentNode;
		tr.style.backgroundColor = (chbx.checked) ? "#eaf4fd" : "#fff";
}


function checkall () {
	var obj = document.forms[0].elements[0];
	var formCnt = obj.form.elements.length;
	
	// check it
	for (i=0; i  < formCnt; i++) {
        if (obj.form.elements[i].name == "approveIt") {
    			obj.form.elements[i].checked=true;
				changeRowColor(obj.form.elements[i]);
        }
	}
		
}

function uncheckall () {
	var obj = document.forms[0].elements[0];
	var formCnt = obj.form.elements.length;
	
	// uncheck it
	for (i=0; i  < formCnt; i++) {
        if (obj.form.elements[i].name == "approveIt") {
    			obj.form.elements[i].checked=false;
				changeRowColor(obj.form.elements[i]);
        }
	}
		
}

function fwchangeCheckBoxes(val){
	if (val){
		checkall();
	} else {
		uncheckall();
	}
}
</SCRIPT>
]]>

<callelement NAME="OpenMarket/Xcelerate/Scripts/GotoPreview"/>
    <SETCOUNTER NAME="colspan_count" VALUE="20"/>

<if COND="Variables.list.#numRows!=0">
<then>			
	<table BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="100%">
	<tr>
		<td></td><td class="tile-dark" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
	</tr>
	<tr>
	<td class="tile-dark" WIDTH="1" NOWRAP="nowrap"><BR/></td>
	<td >
	<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
		<tr><td colspan="Counters.colspan_count" REPLACEALL="Counters.colspan_count" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
		<tr>
				<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"></td>
				<if COND="Variables.docheckbox=false"><then><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir" nowrap="nowrap"><DIV class="new-table-title">&nbsp;&nbsp;<XLAT.STREAM KEY="dvin/UI/AssetMgt/Approve"/></DIV></td></then><else><td style="vertical-align:middle;text-align:center;" class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><input type="checkbox" onclick="fwchangeCheckBoxes(this.checked);"/></td></else></if><td class="tile-b" NOWRAP="NOWRAP" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir" nowrap="nowrap"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/AssetType"/></DIV></td>
				<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir" nowrap="nowrap"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/Name"/></DIV></td>
				<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title">&nbsp;</DIV></td>
				<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><BR/></td><td NOWRAP="NOWRAP" class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/AT/Dimension/Locale"/></DIV></td>
				<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir" nowrap="nowrap"><DIV class="new-table-title"><XLAT.STREAM KEY="fatwire/Alloy/UI/StartDate"/></DIV></td>				
				<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir" nowrap="nowrap"><DIV class="new-table-title"><XLAT.STREAM KEY="fatwire/Alloy/UI/EndDate"/></DIV></td>								
				<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir" nowrap="nowrap"><DIV class="new-table-title"><XLAT.STREAM KEY="fatwire/Alloy/UI/DaysExpired"/></DIV></td>
				<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><BR /></DIV></td>
			<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
		</tr>
		<tr><td colspan="Counters.colspan_count" REPLACEALL="Counters.colspan_count" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
	     
		<SETCOUNTER NAME="assignment_count" VALUE="0"/>
		<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
		<!-- Loop over all search results. -->
	   
		<setvar NAME="separatorLine" VALUE="0"/>			
		<setvar NAME="isValidBlockingAsset" VALUE="true"/>

		<!-- Prepare the list of available asset type icons in a list -->
		<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GetImagePath"/>
		<FILELIST NAME="ImagesList" PATH="Variables.realPath" FILTER="*.gif" />	
		<SETVAR NAME="fileslist" VALUE="" />	
		<LOOP LIST="ImagesList">
			<ICS.LISTGET LISTNAME="ImagesList" FIELDNAME="NAME" OUTPUT="filename" />		
			<SETVAR NAME="fileslist" VALUE="Variables.fileslistVariables.filename%" />
		</LOOP>
		<STRINGLIST NAME="imageList" STR="Variables.fileslist" DELIM="%25" />
			
		<loop LIST="Variables.list">
						
		   <setvar NAME="assetid" VALUE="Variables.list.assetid"/>
			<!-- Note: this is not very efficient, loading each asset this way - candidate for performance improvemnet -->
			<ASSETTYPE.LOAD NAME="theAssetType" TYPE="Variables.list.assettype"/>
			<ASSETTYPE.GET NAME="theAssetType" FIELD="description" OUTPUT="atdescription"/>
			<ASSET.GETASSETTYPEPROPERTIES TYPE="Variables.list.assettype"/>
			<ASSET.LOAD NAME="blockAsset" TYPE="Variables.list.assettype" OBJECTID="Variables.assetid"/>
			<ASSET.GET NAME="blockAsset" FIELD="startdate" output="currentAssetStartDate" />
			<ASSET.GET NAME="blockAsset" FIELD="enddate" output="currentAssetEndDate" />
			<if COND="IsError.Variables.errno=false">
			<then>
				<ASSET.GET NAME="blockAsset" FIELD="name"/>
				<ASSET.GET NAME="blockAsset" FIELD="description"/>
				<ASSET.GET NAME="blockAsset" FIELD="updateddate"/>
				<ASSET.GET NAME="blockAsset" FIELD="id" OUTPUT="assetid"/>
				<ASSET.GET NAME="blockAsset" FIELD="status"/>
				<SETVAR NAME="assettype" VALUE="Variables.list.assettype"/>
				
				<IF COND="IsColumn.Variables.list.valid=true">
				<THEN>
					<SETVAR NAME="isValidBlockingAsset" VALUE="Variables.list.valid"/>
				</THEN>
				</IF>

				<IF COND="Variables.separatorLine=1">
					<THEN>
					<tr>
						<!--<td colspan="Counters.colspan_count" REPLACEALL="Counters.colspan_count" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
					</tr>
					</THEN>
				</IF>

				<setvar NAME="separatorLine" VALUE="1"/>
				<tr class="Variables.rowStyle" REPLACEALL="Variables.rowStyle">
							
				<td><BR /></td>
				<td style="vertical-align:middle;text-align:center;">
					<if COND="Variables.isValidBlockingAsset!=false">
					<then>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/AssetMgt/ApprovalStatus">
							<ARGUMENT NAME="target" VALUE="Variables.target"/>
							<ARGUMENT NAME="assetid" VALUE="Variables.assetid"/>
							<ARGUMENT NAME="assettype" VALUE="Variables.assettype"/>
							<ARGUMENT NAME="assetname" VALUE="anAsset"/>
						</CALLELEMENT>
						<if COND="Variables.approvalAction=approve">
						<then>
							<if COND="Variables.docheckbox=false">
							<then>
								<XLAT.LOOKUP KEY="dvin/UI/Approvethisitem" VARNAME="_XLAT_"/>
								<XLAT.LOOKUP KEY="dvin/UI/Approvethisitem" VARNAME="mouseover" ESCAPE="true"/>
                                				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/ApprovePost" outstring="urlapprpost">
				                                    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                				    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
	                                                            <satellite.argument name="type0" value="Variables.assettype"/>
        	                                                    <satellite.argument name="id0" value="Variables.assetid"/>
                	                                            <satellite.argument name="assetTotal" value="1"/>
                        	                                    <satellite.argument name="targetid" value="Variables.target"/>
                                                               </SATELLITE.LINK>
								<A HREF="Variables.urlapprpost" onmouseover="window.status='Variables.mouseover';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlapprpost,Variables._XLAT_,Variables.mouseover" TITLE="Variables._XLAT_"><STRING.STREAM VALUE="Variables.approvalState"/></A>
							</then>
							<else>
								<setvar NAME="hasCheckBox" VALUE="true"/>
								<INPUT TYPE="CHECKBOX" NAME="approveIt" VALUE="Variables.assettype,Variables.assetid" onClick="checkApprove(this);changeRowColor(this);" REPLACEALL="Variables.assettype,Variables.assetid"/>
							</else>
							</if>
						</then>
						<else>
						<if COND="Variables.approvalAction=releaseBlocking">
						<then>
							<XLAT.LOOKUP KEY="dvin/UI/Showassetspreventingthisitemfrompublish" VARNAME="_XLAT_"/>
							<XLAT.LOOKUP KEY="dvin/UI/Showassetspreventingthisitemfrompublish" VARNAME="mouseover" ESCAPE="true"/>
			                                <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/ShowBlockingAssetsFront" outstring="urlshblockasstfront">
                        				        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
				                                <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                <satellite.argument name="AssetType" value="Variables.assettype"/>
                                                <satellite.argument name="id" value="Variables.assetid"/>
                                                <satellite.argument name="target" value="Variables.target"/>
                                            </SATELLITE.LINK>
							<A HREF="Variables.urlshblockasstfront" ONMOUSEOVER="window.status='Variables.mouseover';return true;" ONMOUSEOUT="window.status='';return true" REPLACEALL="Variables.urlshblockasstfront,Variables._XLAT_,Variables.mouseover" TITLE="Variables._XLAT_"><STRING.STREAM VALUE="Variables.approvalState"/></A>
						</then>
						<else>
								<STRING.STREAM VALUE="Variables.approvalState"/>
						</else>
						</if>
						</else>
						</if>
					</then>
					<else>
						<!-- isValidBlocingAsset=false - means there is something fishhy with the data in the approval system
							  - approval dependencies should be recalculated-->
						<!-- need SystemLocaleString -->
						<XLAT.LOOKUP KEY="dvin/Common/Edit" ESCAPE="true" VARNAME="_XLAT_"/>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
							<ARGUMENT NAME="assettype" VALUE="Variables.assettype"/>
							<ARGUMENT NAME="assetid" VALUE="Variables.assetid"/>
							<ARGUMENT NAME="varname" VALUE="urlEditItem"/>
							<ARGUMENT NAME="function" VALUE="edit"/>
						</CALLELEMENT>
 						<A HREF="Variables.urlEditItem" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlEditItem,Variables._XLAT_">
						<XLAT.STREAM KEY="dvin/UI/InconsistentApprovalState"/></A>					
						
					</else>
					</if>
				</td>
				

				<td>
					<!-- 
						This section of code performs validation of the start date and end date of the current asset (the asset that is an approval dependent)
						The validation is done to check for two things 
							1) if the start date of the asset occurs in the future 
							2) if the end date of the asset occurs in the past
						If either of the above is true, then we need to warn the user in the approval screen (where we show the list of dependent assets)
						
						We show the warning by means of an image that is displayed near the approval check box of each asset in the dependent asset table.
						On mouse over this image shows the reason in the status bar (either 'Start date occurs in future' or 'End date occurs in the past' message)
						The validation is actually done in the JSP element CheckStartDateEndDateValidity.jsp, which takes the start date and end date as input
						and checks for the conditions (1 and 2 above). If any of the conditions match, the jsp element sets the appropriate message in the ICS variable
						called dateRangeFailureDetail, which can then later be used for the image mouseover.
						
						-Sathish Paul Leo for the Site Preview Proj, Sept 13th 2007
					-->
						<SETVAR NAME="dateRangeValid" VALUE="true" />
						<SETVAR NAME="dateRangeFailureDetail" VALUE=""/>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Util/CheckStartDateEndDateValidity">
							<ARGUMENT NAME="startDate" VALUE="Variables.currentAssetStartDate" />
							<ARGUMENT NAME="endDate" VALUE="Variables.currentAssetEndDate" />							
						</CALLELEMENT>
						<IF COND="Variables.dateRangeValid=false">
						<THEN>							
							<IMG NAME="imageForDates" HEIGHT="14" WIDTH="14" VSPACE="4" SRC="Variables.cs_imagedir/graphics/common/logo/startEndDateValidity.gif" TITLE="Variables.dateRangeFailureDetail" REPLACEALL="Variables.cs_imagedir,Variables.dateRangeFailureDetail"/>								
						</THEN>						
						</IF>				
				</td>

			<td style="vertical-align:middle" NOWRAP="NOWRAP" >
				<DIV class="small-text-inset">
					<!-- <CSVAR NAME="Variables.atdescription"/> -->
					<SETVAR NAME="currentAtype" VALUE="Variables.list.assettype.png" />
					<ISINLIST ITEM="Variables.currentAtype" LIST="imageList" />
					<STRING.ENCODE VARIABLE="atdescription" VARNAME="atdescription"/>
					<IF COND="Variables.errno=1">
					<THEN>
						<IMG NAME="assetTypeImage" SRC="Variables.cs_imagedir/OMTree/TreeImages/AssetTypes/Variables.list.assettype.png" TITLE="Variables.atdescription" REPLACEALL="Variables.cs_imagedir,Variables.list.assettype,Variables.atdescription" />
					</THEN>
					<ELSE>
						<IMG NAME="assetTypeImage" SRC="Variables.cs_imagedir/OMTree/TreeImages/default.png" TITLE="Variables.atdescription" REPLACEALL="Variables.cs_imagedir,Variables.atdescription" />
					</ELSE>
					</IF>
					<BR />
				</DIV>
			</td>

				<td><BR /></td>
				<td style="vertical-align:middle" NOWRAP="NOWRAP" >
				<DIV class="small-text-inset">
					<XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="_XLAT_"/>
					<XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="mouseover" ESCAPE="true"/>
					<STRING.LENGTH VALUE="Variables.name" VARNAME="strlen" />
					<CALCULATOR.GO VALUE="Variables.strlen 30 GT" VARNAME="result"/> 
					<IF COND="Variables.result=1">
					<THEN>
						<SUBSTRING STR="Variables.name" OUTSTR="shortName" ENDINDEX="25" />
						<SETVAR NAME="shortName" VALUE="Variables.shortName..."/>
					</THEN>
					<ELSE>
						<SETVAR NAME="shortName" VALUE="Variables.name" />
					</ELSE>
					</IF>
					
					<!-- Do not show the anchor link for AssetType = 'Device Group' and name = [Default Device Group] -->
					<IF COND='Variables.assettype=DeviceGroup'>
					<THEN>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Mobility/GetInfo">
							<ARGUMENT NAME="serviceName" VALUE="getDefaultDeviceGroup"/>
						</CALLELEMENT>
						<IF COND="Variables.result=Variables.name">
						<THEN>
							<STRING.STREAM VARIABLE="shortName"/>
						</THEN>
						<ELSE>
							<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
								<ARGUMENT NAME="assettype" VALUE="Variables.assettype"/>
								<ARGUMENT NAME="assetid" VALUE="Variables.assetid"/>
								<ARGUMENT NAME="varname" VALUE="urlInspectItem"/>
								<ARGUMENT NAME="function" VALUE="inspect"/>
							</CALLELEMENT>
							<A HREF="Variables.urlInspectItem" OnMouseOver="window.status='Variables.mouseover'; return true" OnMouseOut="return window.status='';" title="Variables._XLAT_"  REPLACEALL="Variables.urlInspectItem,Variables._XLAT_,Variables.mouseover">
								<STRING.STREAM VARIABLE="shortName"/>
							</A><BR />							
						</ELSE>
						</IF>
					</THEN>
					<ELSE>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
							<ARGUMENT NAME="assettype" VALUE="Variables.assettype"/>
							<ARGUMENT NAME="assetid" VALUE="Variables.assetid"/>
							<ARGUMENT NAME="varname" VALUE="urlInspectItem"/>
							<ARGUMENT NAME="function" VALUE="inspect"/>
						</CALLELEMENT>
						<A HREF="Variables.urlInspectItem" OnMouseOver="window.status='Variables.mouseover'; return true" OnMouseOut="return window.status='';" title="Variables._XLAT_"  REPLACEALL="Variables.urlInspectItem,Variables._XLAT_,Variables.mouseover">
						<STRING.STREAM VARIABLE="shortName"/>
						</A><BR />
					</ELSE>
					</IF>
					
				</DIV>
				</td>
		
				<td><BR /></td>
				<td style="vertical-align:middle" >
					<DIV class="small-text-inset">
						<IF COND="Variables.description=Variables.empty">
						<THEN>
							<XLAT.LOOKUP KEY="fatwire/Alloy/UI/AssetHasNoDescription" VARNAME="assetHasNoDescription" />
							<SETVAR NAME="description" VALUE="Variables.assetHasNoDescription" />							
						</THEN>
						<ELSE>
							<STRING.ENCODE VARIABLE="description" VARNAME="description"/>
						</ELSE>
						</IF>
						<IMG NAME="imageForDescription" SRC="Variables.cs_imagedir/graphics/common/logo/assetDescription.gif" TITLE="Variables.description" REPLACEALL="Variables.cs_imagedir,Variables.description" HEIGHT="15" WIDTH="15" />
					</DIV>
				</td>
				<td><BR/></td>
					<td style="vertical-align:middle" >
					<ASSETTYPE.LOAD TYPE="Variables.assettype" NAME="theCurrentAssetType" />
					<ASSETTYPE.GET NAME="theCurrentAssetType" FIELD="usedimension" OUTPUT="usedimensionVal" />
					<IF COND="Variables.usedimensionVal!=F">
					<THEN>
						<DIV class="small-text-inset">
						<ASSET.GETLOCALES TYPE="Variables.assettype" OBJECTID="Variables.assetid" LIST="asset:locales"/>
						<LOOP LIST="asset:locales">
						<STRING.STREAM LIST="asset:locales" COLUMN="NAME"/>
						</LOOP>
						<BR />
						</DIV>
					</THEN>
					</IF>
				</td>				
				<td><BR /></td>
				<td style="vertical-align:middle" NOWRAP="NOWRAP">
					<DIV class="small-text-inset">
						<DATEFORMAT.CREATE NAME="dObject" DATESTYLE="SHORT" TIMESTYLE="SHORT" LOCALE="LocaleName" TIMEZONEID="SessionVariables.time.zone"/>
						<DATEFORMAT.CREATE NAME="fObject" DATESTYLE="FULL" TIMESTYLE="FULL" LOCALE="LocaleName" TIMEZONEID="SessionVariables.time.zone"/>
						<DATEFORMAT.GETDATETIME NAME="dObject" VALUE="Variables.currentAssetStartDate" VALUETYPE="jdbcdate" VARNAME="startDateShortVersion" />
						<DATEFORMAT.GETDATETIME NAME="fObject" VALUE="Variables.currentAssetStartDate" VALUETYPE="jdbcdate"  VARNAME="startDateFullVersion"/>
						<IF COND="Variables.startDateShortVersion=Variables.empty">
						<THEN>
							<STRING.STREAM VALUE="-" />
						</THEN>
						<ELSE>
							<SPAN ID="startDateSpanId" TITLE="Variables.startDateFullVersion" REPLACEALL="Variables.startDateFullVersion"><CSVAR name="Variables.startDateShortVersion" /></SPAN>
						</ELSE>
						</IF>
					</DIV>
				</td>
	
				<td><BR /></td>
				<td style="vertical-align:middle" NOWRAP="NOWRAP">
					<DIV class="small-text-inset">
						<DATEFORMAT.GETDATETIME NAME="dObject" VALUE="Variables.currentAssetEndDate" VALUETYPE="jdbcdate" VARNAME="endDateShortVersion"/>
						<DATEFORMAT.GETDATETIME NAME="fObject" VALUE="Variables.currentAssetEndDate" VALUETYPE="jdbcdate"  VARNAME="endDateFullVersion"/>
						<IF COND="Variables.endDateShortVersion=Variables.empty">
						<THEN>
							<STRING.STREAM VALUE="-" />
						</THEN>
						<ELSE>
							<SPAN ID="endDateSpanId" TITLE="Variables.endDateFullVersion" REPLACEALL="Variables.endDateFullVersion"><CSVAR name="Variables.endDateShortVersion" /></SPAN>
						</ELSE>
						</IF>
					</DIV>
				</td>
				
				<td></td>
				<td style="vertical-align:middle" NOWRAP="NOWRAP">
					<DIV class="small-text-inset">
						<CSVAR NAME="Variables.daysExpired" />
					</DIV>
				</td>
					
				<td><BR /></td>					
				<td style="vertical-align:middle" NOWRAP="NOWRAP">
					<if COND="Variables.CanPreview=true">
					<then>
			                        <PREVIEWURL.MAKEURL VARNAME="previewURL" ASSETTYPE="Variables.assettype" ASSETID="Variables.assetid" PUBID="SessionVariables.pubid" TARGET="Variables.target"/>
                        			<IF COND="IsVariable.previewURL=true">
			                        <THEN>
	    						<XLAT.LOOKUP KEY="dvin/UI/Previewthisfortargetname" VARNAME="_XLAT_"/>
	    						<XLAT.LOOKUP KEY="dvin/UI/Previewthisfortargetname" VARNAME="mouseover" ESCAPE="true"/>
				                        <A HREF="javascript:void(0)" onclick="openPreview('Variables.previewURL');" onmouseover="window.status='Variables.mouseover';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables.previewURL,Variables.targetname,Variables.mouseover"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconPreviewContent.gif" border="0" title="Variables._XLAT_" alt="Variables._XLAT_" REPLACEALL="Variables.cs_imagedir,Variables._XLAT_"/></A>
			                        </THEN>
                        			</IF>
					</then>
					</if>
				</td>					

				</tr>
				<inccounter NAME="assignment_count" VALUE="1"/>
				<IF COND="Variables.rowStyle=tile-row-normal">
				<THEN>
					<SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
				</THEN>
				<ELSE>
					<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
				</ELSE>
				</IF>

			</then>
			<else>
				<tr>
				<td colspan="Counters.colspan_count" REPLACEALL="Counters.colspan_count">
				<XLAT.LOOKUP KEY="dvin/UI/Error/TileHeldAssets-AssetLoadFailed" errno="Variables.errno" assetid="Variables.assetid" list.assettype="Variables.list.assettype" EVALALL="false" VARNAME="_XLAT_"/>
            <callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
                <argument NAME="msgtext" VALUE="Variables._XLAT_"/>
                <argument NAME="severity" VALUE="error"/>
            </callelement>
            </td>
            </tr>  
			</else>
			</if>
		</loop>
	
	</table>
	</td>
			<td class="tile-dark" WIDTH="1" NOWRAP="nowrap"><BR /></td>
		</tr>
		<tr>
			<td colspan="3" class="tile-dark" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
		</tr>
		<tr>
			<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
		</tr>
	</table>
	
</then>
</if>

</FTCS> 
