<?XML VERSION="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateC/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Actions/SavewfReport.xml $ 
$Revision: 24 $ 
$Modtime: 4/26/04 4:45p $ 
-->
<!-- OpenMarket/Xcelerate/Actions/SavewfReport.xml
--
-	Form for Saving  wfReportes
-- INPUT
--			Criteria Name ,  Asset Type , Criteria String
-- OUTPUT
--
-- HISTORY 
-->
<!-- 
	 When this page is called, we need to have the wfReport object loaded with  all 
     the necessary Variables including the Filter String .  It should have :-  
        1. urlCritStr  - an output  Variable  which holds the the URL Criteria String
        2. ExcludeStr -  A String representing the variables that needs to be excluded 
          	 
         
-->
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>
<SCRIPT LANGUAGE="JavaScript">


  
function checkfields()
{
	var obj = document.forms[0].elements[0];
    obj.form.pagename.value='OpenMarket/Xcelerate/Actions/WorkflowReportPost';
    
    if (obj.form.elements['criterianame']) 
    {
         if (obj.form.elements['criterianame'].value=="")
        {
		    alert("<XLAT.STREAM KEY="dvin/UI/Search/Youmustspecifyanameforthiscriteria" ESCAPE="true" ENCODE="false"/>");
 		    obj.form.elements['criterianame'].focus();
            return false;
        }
    }

    
    obj.form.frompage.value='SavewfReport';
    obj.form.searchcmd.value='save';
    obj.form.submit();
	return false;
}

 
function shareThisSch()
{
   
  alert("<XLAT.STREAM KEY="dvin/UI/Search/ChooseRoles" ESCAPE="true" ENCODE="false"/>");
  return true;
}




function editthissearch()
{
	var obj = document.forms[0].elements[0];
    obj.form.pagename.value='OpenMarket/Xcelerate/Actions/EditwfReportFront';
     
    obj.form.frompage.value='SavewfReport';
    obj.form.searchcmd.value='edit';
    obj.form.submit();
	return false;
}
 
function SetCancelFlag () {
	var obj = document.forms[0].elements[0];

	obj.form.elements['cancelcmd'].value="cancel";
	obj.form.submit();
	return false;
}

   
   function CheckShared()
{
	var obj = document.forms[0].elements[0];
    
    if (obj.form.sharedRoles.value!="")
	{   
      if(obj.form.sharedRoles.length>0)
      {
         obj.form.Shared.checked='true';
        }
      else
      { 
         obj.form.Shared.checked='false';
       }
    } 
    else
    {           
         obj.form.Shared.checked='false'; 
     }
    
    return true;
 }


</SCRIPT>
 
<iNPUT TYPE="hidden" NAME="upcommand" VALUE="submit"/>
<INPUT TYPE="hidden" NAME="cancelcmd" VALUE="submit"/>
<INPUT TYPE="hidden" NAME="searchcmd" VALUE=""/>
<INPUT type="hidden" name="pagename" value="OpenMarket/Xcelerate/Actions/WorkflowReportPost"/>
<INPUT type="hidden" name="AssetType" value="Variables.AssetType" REPLACEALL="Variables.AssetType"/>
<INPUT type="hidden" name="ResultLimit" value="50"/>
<INPUT type="hidden" name="OrderBy" VALUE="name"/>
<STRING.ENCODE VARIABLE="ThisPage" VARNAME="ThisPage"/>
<INPUT type="hidden" name="frompage" VALUE="Variables.ThisPage" REPLACEALL="Variables.ThisPage"/>
<STRING.ENCODE VARIABLE="frontpage" VARNAME="frontpage"/>
<INPUT type="hidden" name="frontpage" VALUE="Variables.frontpage" REPLACEALL="Variables.frontpage"/>
<STRING.ENCODE VARIABLE="postpage" VARNAME="postpage"/>
<INPUT type="hidden" name="postpage" VALUE="Variables.postpage" REPLACEALL="Variables.postpage"/>
<STRING.ENCODE VARIABLE="SCritSTR" VARNAME="SCritSTR"/>
<INPUT type="hidden" name="ssurlCritSTR" VALUE="Variables.SCritSTR" REPLACEALL="Variables.SCritSTR"/>

 <IF COND="IsVariable.searchid=true">
<THEN>
	  <STRING.ENCODE VARIABLE="searchid" VARNAME="searchid"/>
      <input type="hidden"  name="searchid"   VALUE="Variables.searchid"  REPLACEALL="Variables.searchid"/>
</THEN>
</IF>   
  
<IF COND="IsVariable.criterianame!=true">
<THEN>
    <setvar NAME="criterianame"  VALUE="Variables.empty"/>
</THEN>
</IF>

<table class="width-outer-70" border="0" cellpadding="0" cellspacing="0">

	<!-- page title w/ asset name -->
	<assettype.list LIST="ThisAsset" FIELD1="assettype" VALUE1="Variables.AssetType"/>
    <XLAT.LOOKUP KEY="dvin/Common/SaveWorkflowReport" VARNAME="titletext"/>
	<tr>
		<td><span class="title-text"> <STRING.STREAM VALUE="Variables.titletext"/>: </span><span class="title-value-text"> <STRING.STREAM VALUE="Variables.criterianame"/> </span></td>
	</tr>
	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar">
		<argument NAME="SpaceBelow" VALUE="No"/>
	</callelement>

 	<tr>
		<td>
           <table class="width-inner-100" border="0" cellpadding="0" cellspacing="0">
           <callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
 		     <tr>
				<td class="form-label-text"><span class="alert-color">*</span><XLAT.STREAM KEY="dvin/AT/Common/Name"/>:</td>
				<td> <img height="1" width="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
 				<td class="form-inset">
				   <STRING.ENCODE VARIABLE="criterianame" VARNAME="criterianame"/>
   				   <input TYPE="TEXT" NAME="criterianame" SIZE="32" MAXLENGTH="32" VALUE="Variables.criterianame"  REPLACEALL="Variables.criterianame"/>
  				</td>
            </tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
            <tr>
				<td></td>
				<td> <img height="1" width="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
                  <td class="form-inset">
 				      <!-- <INPUT TYPE="CHECKBOX" NAME="Shared" CHECKED="true"  VALUE="on" onClick="return shareThisSch();" />  Share this Workflow Report -->
                       <IF COND="IsVariable.Shared!=true">
                       <THEN>
                              <setvar NAME="Shared.checked"  VALUE="true"/>
                         	  <INPUT TYPE="CHECKBOX" NAME="Shared"/>  <XLAT.STREAM KEY="dvin/UI/SharethisSearch"/>
                       </THEN>
                       <ELSE>
                              <setvar NAME="Shared.checked"  VALUE="true"/>
                         	  <INPUT TYPE="CHECKBOX" NAME="Shared" CHECKED=""/>  <XLAT.STREAM KEY="dvin/UI/SharethisSearch"/>
                       </ELSE>
                       </IF>
                  </td>
            </tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
             <TR>
    			<TD CLASS="form-label-text"><SPAN CLASS="alert-color"></SPAN><XLAT.STREAM KEY="dvin/UI/SharewithUsersofRoles"/>:</TD>
    			<TD><img height="1" width="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></TD>
    			<TD class="form-inset">
    				<SETVAR NAME="errno" VALUE="0"/>
                    <ROLEMANAGER.GETROLENAMES LISTVARNAME="acls"/>
          		    <STRINGLIST NAME="selectedRoles" STR="Variables.sharedRoles" DELIM=";"/>
    				<HASH.CREATE NAME="selRoles" LIST="selectedRoles" COLUMN="ITEM"/>
    				<IF COND="IsList.acls=true">
                    <THEN>
        				<SELECT NAME="sharedRoles" MULTIPLE="yes" SIZE="4">
        					<LOOP LIST="acls">
        						<HASH.CONTAINS NAME="selRoles" VALUE="acls.aclname" VARNAME="hasit"/>
        						<IF COND="Variables.hasit=true">
        						<THEN>
        							<OPTION SELECTED="yes"/><STRING.STREAM VALUE="acls.aclname"/>
        						</THEN>
        						<ELSE>
        							<OPTION/><STRING.STREAM VALUE="acls.aclname"/>
        						</ELSE>
        						</IF>
        					</LOOP>
        				</SELECT>
                     </THEN>
                     </IF>
    			</TD>
    		</TR>
              
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
            
 			<!--<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacerBar"/>-->
			<tr>
				<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/CreatedbyLowCase"/>:</td>
				<td></td>
			    <td valign="top" class="light-text-color" colspan="3">
				<USERMANAGER.GETDISPLAYABLELOGINUSERNAME VARNAME="loginusername"/>
				<STRING.STREAM VARIABLE="loginusername"/></td>
			</tr>
            
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
 
 			<!--<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacerBar"/>-->
 			<tr>
				<td class="form-label-text"><XLAT.STREAM KEY="dvin/UI/FilterString"/>:</td>
				<td></td>
			    <td valign="top" class="light-text-color" colspan="3"><IF COND="IsVariable.filterstring=true"><THEN><STRING.STREAM VALUE="Variables.filterstring"/></THEN></IF>
                
				 <img height="1" width="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/> 
                  <XLAT.LOOKUP KEY="dvin/UI/EditThisWorkflowReport" VARNAME="_XLAT_"/>
                  <XLAT.LOOKUP KEY="dvin/UI/EditThisWorkflowReport" VARNAME="mouseover" ESCAPE="true"/>
                  (<A HREF="javascript:editthissearch()" OnMouseOver="window.status='Variables.mouseover'; return true" OnMouseOut="return window.status='';" title="Variables._XLAT_" REPLACEALL="Variables._XLAT_,Variables.mouseover"><XLAT.STREAM KEY="dvin/UI/EditThisSearch"/></A>)
                 </td>
 			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
	
	<tr>
		<td><BR/></td><td><BR/></td><td align="left">
			<XLAT.LOOKUP KEY="dvin/Common/CancelChanges" VARNAME="_XLAT_"/>
			<XLAT.LOOKUP KEY="dvin/Common/CancelChanges" VARNAME="mouseover" ESCAPE="true"/>
			
			<A HREF="javascript:void(0)" onclick="return SetCancelFlag();" onmouseover="window.status='Variables.mouseover';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_,Variables.mouseover">
				<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT>
			</A>
		                
             <img height="1" width="10" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/>
              <XLAT.LOOKUP KEY="dvin/UI/Savelcthislcsearch" VARNAME="_XLAT_"/>
              <XLAT.LOOKUP KEY="dvin/UI/Savelcthislcsearch" VARNAME="mouseover" ESCAPE="true"/>
             <A HREF="javascript:void(0)" onclick="return checkfields();" OnMouseOver="window.status='Variables.mouseover'; return true" OnMouseOut="return window.status='';" title="Variables._XLAT_" REPLACEALL="Variables._XLAT_,Variables.mouseover">
             	<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Save"/></CALLELEMENT>
            </A>

      </td>

	</tr>
           </table> 
         </td>
	</tr>
	

	

</table>

</FTCS>
