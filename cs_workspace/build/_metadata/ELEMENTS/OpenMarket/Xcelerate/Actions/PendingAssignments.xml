<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!--
$Logfile: /VerticalApps/XcelerateC/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Actions/PendingAssignments.xml $
$Revision: 10 $
$Modtime: 2/27/04 2:46p $
-->
<!-- OpenMarket/Xcelerate/Actions/PendingAssignments
-
- INPUT
-
- OUTPUT
-
-->
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>

<table class="width-outer-70" border="0" cellpadding="0" cellspacing="0">
	<tr>
		<td class="title-value-text"><XLAT.STREAM KEY="dvin/UI/AssignmentsPending"/></td>
	</tr>
	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
</table>

		<IF COND="Variables.report_assignto=user">
		<THEN>
			<STRINGLIST NAME="userList" STR="Variables.users" DELIM=";"/>
		</THEN>
		</IF>
		<IF COND="Variables.report_assignto=user">
		<THEN>
			<IF COND="Variables.report_state=some">
			<THEN>
				<WorkflowEngine.GetFilteredAssignments STATUS="Variables.status" OVERDUE="Variables.doOverdue" STATEID="Variables.wfstateList" SITE="SessionVariables.pubid" ASSIGNEDTO="userList" PREFIX="allAssignments:" EXCLUDECOMMENTS="true"/>
			</THEN>
			<ELSE>
				<WorkflowEngine.GetFilteredAssignments STATUS="Variables.status" OVERDUE="Variables.doOverdue" SITE="SessionVariables.pubid" ASSIGNEDTO="userList" PREFIX="allAssignments:" EXCLUDECOMMENTS="true"/>
			</ELSE>
			</IF>
		</THEN>
		<ELSE>
			<IF COND="Variables.report_state=some">
			<THEN>
				<WorkflowEngine.GetFilteredAssignments STATUS="Variables.status" OVERDUE="Variables.doOverdue" STATEID="Variables.wfstateList" SITE="SessionVariables.pubid" PREFIX="allAssignments:" EXCLUDECOMMENTS="true"/>
			</THEN>
			<ELSE>
				<WorkflowEngine.GetFilteredAssignments STATUS="Variables.status" OVERDUE="Variables.doOverdue" STATEID="Variables.empty" SITE="SessionVariables.pubid" PREFIX="allAssignments:" EXCLUDECOMMENTS="true"/>
			</ELSE>
			</IF>
		</ELSE>
		</IF>


<table class="width-outer-70" border="0" cellpadding="0" cellspacing="0">
<tr>
	<td>
<IF COND="IsVariable.allAssignments:Total=true">
<THEN>
	<IF COND="Variables.allAssignments:Total=0">
	<THEN>
	<P/>		     
	<XLAT.STREAM KEY="dvin/UI/NothingFound"/><BR/>
	</THEN>
	<ELSE>
	<P/><BR/>
	<!-- We don't know how many results will be displayed, because some must be filtered out
	  -  manually during the tile.
	  -->
	<!-- <P/><CSVAR NAME="Variables.allAssignments:Total"/> items found:<BR />
	<P/> -->
	<XLAT.LOOKUP KEY="dvin/UI/AssetsFound" VARNAME="_XLAT_"/>
	<SETVAR NAME="TileText" VALUE="Variables._XLAT_"/>
	<XLAT.LOOKUP KEY="dvin/UI/NoAssetsFound" VARNAME="_XLAT_"/>
	<SETVAR NAME="NoTileText" VALUE="Variables._XLAT_"/>
	<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Workflow/TileReportAssignments">
	    <ARGUMENT NAME="showSelect" VALUE="false"/>
	    <ARGUMENT NAME="showType" VALUE="true"/>
	    <ARGUMENT NAME="showKey" VALUE="true"/>
	    <ARGUMENT NAME="showDescription" VALUE="false"/>
	    <ARGUMENT NAME="showId" VALUE="false"/>
	    <ARGUMENT NAME="showAssignedBy" VALUE="false"/>
	    <ARGUMENT NAME="showAssignedDate" VALUE="false"/>
	    <ARGUMENT NAME="showAssignedTo" VALUE="false"/>
	    <ARGUMENT NAME="showClearedBy" VALUE="false"/>
	    <ARGUMENT NAME="showClearedDate" VALUE="true"/>
	    <ARGUMENT NAME="showDueDate" VALUE="true"/>
	    <ARGUMENT NAME="showActionTaken" VALUE="false"/>
	    <ARGUMENT NAME="showActionToTake" VALUE="false"/>
	    <ARGUMENT NAME="showDeadlocked" VALUE="true"/>
	    <ARGUMENT NAME="showWorkflowStatus" VALUE="true"/>
	    <ARGUMENT NAME="showIsActive" VALUE="false"/>
	    <ARGUMENT NAME="showStepTaken" VALUE="true"/>
	    <ARGUMENT NAME="showClearAssignment" VALUE="false"/>
	    <ARGUMENT NAME="TileText" VALUE="Variables.TileText"/>
	    <ARGUMENT NAME="NoTileText" VALUE="Variables.NoTileText"/>
	</CALLELEMENT>
	<IF COND="Variables.anyDeadlocked=true">
	<THEN>
		<P class="small-text">
		(<IMG src="Variables.cs_imagedir/graphics/common/icon/warndeadlock.gif" HEIGHT="13" WIDTH="15" REPLACEALL="Variables.cs_imagedir"/> <XLAT.STREAM KEY="dvin/UI/Deadlocked"/>)
		</P>
	</THEN>
	</IF>
	</ELSE>
	</IF>
</THEN>
<ELSE>
	<XLAT.LOOKUP KEY="dvin/UI/Error/CannotGetPendingAssignmentsList" VARNAME="msgtext"/>
	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
		<argument NAME="msgtext" VALUE="Variables.msgtext"/>
		<argument NAME="severity" VALUE="error"/>
	</callelement>	

</ELSE>
</IF>
	</td>
</tr>
</table>

</FTCS> 
