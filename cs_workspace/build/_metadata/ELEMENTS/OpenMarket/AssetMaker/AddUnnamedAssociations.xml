<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/AssetMaker/AddUnnamedAssociations
-
- INPUT
-
- OUTPUT
-
-->

<!-- remove all unranked children, and add and rank all from the latest list -->
<ASSET.REMOVECHILDREN NAME="theCurrentAsset" CODE="-"/>
<IF COND="IsVariable._unnamed_associations=true">
<THEN>
	<STRINGLIST NAME="addChildList" STR="Variables._unnamed_associations" DELIM=";"/>
	<SETCOUNTER NAME="rank" VALUE="0"/>
	<LOOP LIST="addChildList">
		<INCCOUNTER NAME="rank" VALUE="1"/>
		<INDEXOF STR="addChildList.ITEM" WHAT="," OUTSTR="index"/>
		<SUBSTRING STR="addChildList.ITEM" OUTSTR="assetType" ENDINDEX="Variables.index"/>
		<SUBSTRING STR="addChildList.ITEM" OUTSTR="temp" INDEX="Variables.index"/>
		<SUBSTRING STR="Variables.temp" OUTSTR="childId" INDEX="1"/>
		<ASSET.ADDCHILD NAME="theCurrentAsset" TYPE="Variables.assetType" CHILDID="Variables.childId" RANK="Counters.rank"/>
		<IF COND="IsError.Variables.errno=true">
		<THEN>
			<CSVAR NAME="Variables.errno"/>
			<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Util/ShowError">
				<ARGUMENT NAME="error" VALUE="UpdateAssetRelationError"/>
				<ARGUMENT NAME="AssetType" VALUE="Variables.AssetType"/>
			</CALLELEMENT>
		</THEN>
		</IF>
	</LOOP>
</THEN>
</IF>


</FTCS> 
