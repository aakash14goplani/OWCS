<?XML VERSION="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.0">

<SCRIPT LANGUAGE="JavaScript">
<![CDATA[

function isKeyEntered(form)
{
	if ( (form.key.value == "") && (!form.form[1].checked) )
		form.key.value = "%";
	if ( (form.key.value == "%") && (form.form[1].checked) )
		form.key.value = "";

	return true;
}

function isElementnameEntered(form)
{
    if(form.elementname.value == "")
	{   
        alert(]]>
'<XLAT.STREAM KEY="dvin/UI/CSAdminForms/MustEnterElementName" ENCODE="false" ESCAPE="true"/>' <![CDATA[ );
               return false;
                }
    return true;
}

function isURLEntered(form)
{
    if(form.url.value == "")
	{           window.alert(']]><XLAT.STREAM KEY="dvin/UI/CSAdminForms/MustEnterUrlForUploadFile" ENCODE="false" ESCAPE="true"/><![CDATA[');
                return false;
    }
    return true;
}

function isURLTextEntered(form)
{
    if(form.url.value == "")
	{   
        window.alert(']]><XLAT.STREAM KEY="dvin/UI/CSAdminForms/MustEnterSomeTextToUpload" ENCODE="false" ESCAPE="true"/><![CDATA[');

        
        return false;
    }
    return true;
}

function checkAddElement(form)
{
	if (!isElementnameEntered(form))
		return false;

	checkUrlSubfolder(form);

	return isURLEntered(form);
}

function checkModifyElement(form)
{
	var selectedElement = form.elementname.value;
	if ( isSystemElement(selectedElement) )
	{  
		]]> var replacestr=/\bVariables.selectedElement\b/   ;
        var xlatstr= '<XLAT.STREAM KEY="dvin/UI/CSAdminForms/ModifyConfirmationQ" ENCODE="false" ESCAPE="true"/>' ;
        var newstr=xlatstr.replace(replacestr, selectedElement) ;
        if (!confirm(newstr)) <![CDATA[
            return false;
            

	}
    
}

function checkUpload(form)
{
	checkUrlSubfolder(form);

	if (!isURLEntered(form))
		return false;

	var selectedElement = form.elementname.value;
	if ( isSystemElement(selectedElement) )
	{   
        ]]> var replacestr=/\bVariables.selectedElement\b/   ;
        var xlatstr= '<XLAT.STREAM KEY="dvin/UI/CSAdminForms/UploadConfirmationQ" ENCODE="false" ESCAPE="true"/>' ;
        var newstr=xlatstr.replace(replacestr, selectedElement) ;
        if (!confirm(newstr)) <![CDATA[
            return false;
 
	}
	var filename = form.url_file.value;

        if (filename == "")
        {
		]]>
	var xlatstr= '<XLAT.STREAM KEY="dvin/UI/CSAdminForms/MustEnterFilename" ENCODE="false" ESCAPE="true"/>' ;
	alert(xlatstr);
		<![CDATA[
		return false;
	}
]]>
        var sname=filename.search(/\./);
	if (sname==-1) {
		var xlatstr= '<XLAT.STREAM KEY="dvin/UI/CSAdminForms/ExtensionRequired" ENCODE="false" ESCAPE="true"/>' ;
		alert(xlatstr);
                return false;
	<![CDATA[
	}
	return true;
}

function checkEdit(form)
{
	if (!isURLTextEntered(form))
		return false;

	var selectedElement = form.elementname.value;
	if ( isSystemElement(selectedElement) )
	{
 
      ]]> var replacestr=/\bVariables.selectedElement\b/   ;
        var xlatstr= '<XLAT.STREAM KEY="dvin/UI/CSAdminForms/EditConfirmationQ" ENCODE="false" ESCAPE="true"/>' ;
        var newstr=xlatstr.replace(replacestr, selectedElement) ;
        if (!confirm(newstr)) <![CDATA[
            return false;
 	}

	return true;
}

function checkUrlSubfolder(form)
{
	var subFolder = form.url_folder;
	var subFolderString = form.url_folder.value;
	for (trailing = subFolderString.charAt(subFolderString.length-1);
		 ((trailing == "/") || (trailing == "\\"));
		 (trailing = subFolderString.charAt(subFolderString.length-1))
		)
	{
		subFolderString = subFolderString.substring(0,subFolderString.length-1);
	}
	subFolder.value = subFolderString;
}

function setupDeleteParams(form)
{
	var userConfirmed = false;
	var counter=0;

	for(i=0 ; i < form.elements.length ; i++)
	{
        obj = form.elements[i];

        if(obj.name == "FTcheckbox" && obj.checked)
		{
			if (!userConfirmed)
			{   
				if (!confirm(']]><XLAT.STREAM KEY="dvin/UI/CSAdminForms/DeleteElementsConfirmationQ" ENCODE="false" ESCAPE="true"/><![CDATA['))
               					return false;
                   
			userConfirmed = true;
			}


			elementName = form.elements[i+1]

			var selectedElement = elementName.value;
			if ( isSystemElement(selectedElement) )
			{
                ]]> var replacestr=/\bVariables.selectedElement\b/   ;
                    var xlatstr= '<XLAT.STREAM KEY="dvin/UI/CSAdminForms/DeleteConfirmationQ" ENCODE="false" ESCAPE="true"/>' ;
                    var newstr=xlatstr.replace(replacestr, selectedElement) ;
     				if (!confirm(newstr)); <![CDATA[
 			        continue;
			}

            elementName.name += counter;
            counter++;
        }
    }

    if (counter > 0)
	{
		return true;
	}

	alert(]]>'<XLAT.STREAM KEY="dvin/UI/CSAdminForms/NoElementsSelected" ENCODE="false" ESCAPE="true"/>'<![CDATA[);
    
	return false;
}

function getSubFolder(fullPath)
{
	var subFolder = "";
	var forwardIndex = fullPath.lastIndexOf("/");
	var backwardIndex = fullPath.lastIndexOf("\\");
	var index = 0;
	if (forwardIndex > backwardIndex)
		index = forwardIndex;
	else
		index = backwardIndex;

	return fullPath.substring(0,index);
}

function selectAll(form,select,checkbox)
{
    for(i=0; i < form.elements.length; i++)
	{
        obj = form.elements[i];
        if(obj.name == checkbox)
			obj.checked = select;
	}
}

function isSystemElement(element)
{
	if ( element.indexOf("FutureTense/Apps/AdminForms") == 0 )
	   return true;
	return false;
}

function noMatches(query)
{
	alert(']]><XLAT.STREAM KEY="dvin/UI/CSAdminForms/NoElementsMatchWithPartialQuotes" ENCODE="false" ESCAPE="true"/><![CDATA[' + query + '"');
    
}

]]>
</SCRIPT>


</FTCS>
