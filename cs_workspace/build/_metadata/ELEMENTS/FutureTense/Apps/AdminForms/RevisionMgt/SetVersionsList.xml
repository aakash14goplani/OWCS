<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.0">

<!--
  - RevisionMgt/SetVersionList
  - Copyright (c) Open Market, Inc., 1999, 2000, 2001, All Rights Reserved
  - $Revision: 11 $
  -->

	<IF COND="IsVariable.table=true">
		<THEN>
			<SETSSVAR NAME="tablekey" VALUE="Variables.table"/>
		</THEN>
	</IF>
	<IF COND="IsVariable.asset=true">
		<THEN>
			<SETSSVAR NAME="assetkey" VALUE="Variables.asset"/>
		</THEN>
		<ELSE>
			<SETVAR NAME="asset" VALUE="Variables.empty"/>
		</ELSE>
	</IF>

	<SETVAR NAME="tblname" VALUE="Variables.table"/>
	<SELECTTO FROM="SystemInfo" WHAT="*" WHERE="tblname" LIST="ResultsList" ORDERBY="tblname"/>

		<IF COND="IsList.ResultsList=false">
			<THEN>
				<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
					<tr><td>
						<span class="title-text"><XLAT.STREAM KEY="dvin/AdminForms/Notrack"/></span>
					</td></tr>
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
				</table>
				<ics.encode base="ContentServer" output="url" session="true">
					<ics.argument name="pagename" value="FutureTense/Apps/AdminForms/AdminForm"/>
					<ics.argument name="tool" value="RevisionMgt"/>
					<ics.argument name="form" value="main"/>
				</ics.encode>
				<A HREF="Variables.url" REPLACEALL="Variables.url"><XLAT.STREAM KEY="dvin/UI/Back"/> </A>
			</THEN>
			<ELSE>
				<setvar NAME="nversions" VALUE="Variables.empty"/>
				<setvar NAME="dstorage" VALUE="Variables.empty"/>
				<setvar NAME="allowed" VALUE="false"/>
				<!-- query RTInfo table only if user is SiteGod -->
				<SETVAR NAME="errno" VALUE="0"/>
				<USERISMEMBER GROUP="SiteGod"/>
				<if COND="Variables.errno=1">
				<then> 
					<SETVAR NAME="tablename" VALUE="RTInfo"/>
					<SETVAR NAME="tblname" VALUE="Variables.table"/>
					<SELECTTO FROM="Variables.tablename" WHAT="*" LIST="rtinfolist" WHERE="tblname" />
					<setvar NAME="nversions" VALUE="rtinfolist.versions"/>
					<setvar NAME="dstorage" VALUE="rtinfolist.storage"/>
					<setvar NAME="allowed" VALUE="true"/>
				</then>
				</if>
				<SATELLITE.FORM ASSEMBLER="query" METHOD="POST" onSubmit="return verifyTableListParams(this,'dosetversions','catalogs')">
				<STRING.ENCODE VARIABLE="charset" VARNAME="OutputQString"/>
				<INPUT TYPE="HIDDEN" NAME="_charset_" VALUE="Variables.OutputQString" REPLACEALL="Variables.OutputQString"/>
				<STRING.ENCODE VARIABLE="cs_environment" VARNAME="OutputQString"/>
				<INPUT TYPE="hidden"  NAME="cs_environment" VALUE="Variables.OutputQString" REPLACEALL="Variables.OutputQString"/>
				<STRING.ENCODE VARIABLE="cs_formmode" VARNAME="OutputQString"/>
				<INPUT TYPE="hidden"  NAME="cs_formmode" VALUE="Variables.OutputQString" REPLACEALL="Variables.OutputQString"/>   
				<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
					<tr><td>
						<span class="title-text"><XLAT.STREAM KEY="dvin/AdminForms/SetCatalogRevisions"/></span>
					</td></tr>
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
				</table>				
                <TABLE class="width-outer-30" BGCOLOR="#FFFFFF" BORDER="0" CELLPADDING="0" CELLSPACING="0">
					<TR>
						<TD COLSPAN="2" HEIGHT="5"></TD>
					</TR>
					<if COND="Variables.allowed=true">
					<then>
					<if COND="Variables.table!=%">
					<then>
					<TR>
						<TD align="left" VALIGN="BASELINE" NOWRAP="true">
							<XLAT.STREAM KEY="dvin/AdminForms/FileStorageDirectory"/><BR/>
						</TD>
						<TD COLSPAN="2" align="left">
							<STRING.STREAM VARIABLE="dstorage"/>                                 
						</TD>
					</TR>
					</then>
					</if>
					</then>
					</if>
					<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<TR>
						<TD align="left" VALIGN="BASELINE" NOWRAP="true">
							<XLAT.STREAM KEY="dvin/UI/Admin/Enternumberofrevisionstokeep"/>&nbsp;
						</TD>
						<TD align="left">
								<if COND="Variables.table!=%">
								<then>
									<INPUT TYPE="text" NAME="numversions" SIZE="32" VALUE="Variables.nversions" REPLACEALL="Variables.nversions"/>
								</then>
								<else>
									<INPUT TYPE="text" NAME="numversions" SIZE="32" VALUE=""/>
								</else>
								</if>
						</TD>
					</TR>
					<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<TR>
						<TD NOWRAP="true">
							<XLAT.STREAM KEY="dvin/AdminForms/CheckcatalogSet"/>
						</TD>
						<TD  class="inline-right" NOWRAP="true" >
							<XLAT.LOOKUP KEY="dvin/Common/All" VARNAME="_XLAT_"/>
							<A onClick="selectAll(document.forms[0],true,'dosetversions');" HREF="#" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="dvin/Common/All"/></CALLELEMENT></A>
							<XLAT.LOOKUP KEY="dvin/Common/None" VARNAME="_XLAT_"/>
							<A onClick="selectAll(document.forms[0],false,'dosetversions');" HREF="#" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="dvin/Common/None"/></CALLELEMENT></A>
						</TD>
					</TR>
					<tr><td colspan="7">
					<TABLE width="100%" BORDER="0" CELLSPACING="0" CELLPADDING="0">
					<tr>
						<td></td>
						<td class="tile-dark" HEIGHT="1">
							<IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" 
							REPLACEALL="Variables.cs_imagedir"/> 
						</td>
						<td></td>
					</tr>
					<tr>
						<td class="tile-dark" VALIGN="top" WIDTH="1"><BR/></td>
						<td> 
							<TABLE width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
								<tr>
									<td colspan="7" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/>
									</td>
								</tr>
								<tr>
									<td class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td>
									<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/AdminForms/CatalogName"/> </DIV></td>
									<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td>
									<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td>
									<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title">	<XLAT.STREAM KEY="dvin/AdminForms/SetQ"/></DIV></td>
									<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td>
								</tr>
								<SETCOUNTER NAME="count" VALUE="0"/>
								<setvar NAME="rowStyle" VALUE="tile-row-normal"/>
								<SETVAR NAME="separatorLine" VALUE="0"/>
								<LOOP LIST="ResultsList">
									<IF COND="IsTracked.ResultsList.tblname=true">
										<THEN>
											<INCCOUNTER NAME="count" VALUE="1"/>
											<TR class="Variables.rowStyle"  REPLACEALL="Variables.rowStyle"><td><BR /></td>
												<TD class="small-text-inset" VALIGN="BASELINE">
													<INPUT TYPE="HIDDEN" NAME="setmeCounters.count" VALUE="ResultsList.tblname" REPLACEALL="ResultsList.tblname,Counters.count"/>
													<STRING.STREAM VALUE="ResultsList.tblname"/>
												</TD>
												<td><BR /></td>
												<td><BR /></td> 
												<TD class="small-text-inset" VALIGN="BASELINE">
													<INPUT TYPE="checkbox" NAME="dosetversionsCounters.count" VALUE="true" REPLACEALL="Counters.count"/>
												</TD>
												<td><BR /></td>
											</TR>
										</THEN>
									</IF>
									<IF COND="Variables.rowStyle=tile-row-normal">
									<THEN>
										<SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
									</THEN>
									<ELSE>
										<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
									</ELSE>
									</IF>
								</LOOP>
								</TABLE>
						</td><td class="tile-dark" VALIGN="top" WIDTH="1"><BR /></td>
					</tr>
					<tr>
						<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
					</tr>
					<tr>
						<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
					</tr>
					</TABLE> 
					</td></tr>
					<TR>
						<TD COLSPAN="2" HEIGHT="5"></TD>
					</TR>
					<TR>
						<TD align="LEFT" COLSPAN="2">
							<INPUT TYPE="hidden" NAME="pagename" VALUE="FutureTense/Apps/AdminForms/AdminForm"/>
							<INPUT TYPE="hidden" NAME="tool" VALUE="RevisionMgt"/>
							<INPUT TYPE="hidden" NAME="form" VALUE="SetVersions"/>
							<INPUT TYPE="hidden" NAME="numtables" VALUE="Counters.count" REPLACEALL="Counters.count"/>
							<XLAT.LOOKUP KEY="dvin/UI/Admin/SetRevisions" VARNAME="_XLAT_"/>
							<A onClick="document.forms[0].submit();" HREF="#" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="dvin/UI/Admin/SetRevisions"/></CALLELEMENT></A>
						</TD>
					</TR>
				</TABLE>
				</SATELLITE.FORM>
			</ELSE>
		</IF>
</FTCS>
