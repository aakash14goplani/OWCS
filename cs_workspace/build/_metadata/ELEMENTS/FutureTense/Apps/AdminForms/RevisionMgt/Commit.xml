<?XML VERSION="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.0">
<div class="width-outer-70">
<IF COND="IsVariable.annotation=false">
     <THEN>
          <SETVAR NAME="annotation" VALUE="Variables.empty"/>
     </THEN>
</IF>

<SETCOUNTER NAME="CommitCounter" VALUE="1"/>
<LOOP UNTIL="Counters.CommitCounter=Variables.numcommits">
    <SETVAR NAME="shouldCommit" VALUE="Variables.docommitCounters.CommitCounter"/>
    <IF COND="Variables.shouldCommit=true"><THEN>
        <!-- clear out errno -->
        <SETVAR NAME="errno" VALUE="0"/>

        <SETVAR NAME="commitTable" VALUE="Variables.commitmeTableCounters.CommitCounter"/>
        <SETVAR NAME="commitAsset" VALUE="Variables.commitmeAssetCounters.CommitCounter"/>
        <SETVAR NAME="shouldKeepLocked" VALUE="Variables.dokeeplockedCounters.CommitCounter"/>
        <!-- do the commit -->
        <COMMIT TABLE="Variables.commitTable"
                ASSET="Variables.commitAsset"
                KEEPLOCKED="Variables.shouldKeepLocked"
                ANNOTATION="Variables.annotation"/>

        <!-- See if commit succeeded -->
        <IF COND="Variables.errno=0">
             <THEN>
                  <!-- if succeeded, brag about it -->
                <XLAT.LOOKUP KEY="dvin/AdminForms/CommitSucceed" VARNAME="commitsucceed"/>
				<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
					<ARGUMENT NAME="msgtext" VALUE="Variables.commitsucceed"/>
					<ARGUMENT NAME="severity" VALUE="info"/>
				</CALLELEMENT>
             </THEN>
             <ELSE>
                  <!-- otherwise, call an error reporting element -->
                  <XLAT.LOOKUP KEY="dvin/AdminForms/Commitfailed" VARNAME="commitfailed"/> 
				  <CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
						<ARGUMENT NAME="msgtext" VALUE="Variables.commitfailed"/>
						<ARGUMENT NAME="severity" VALUE="error"/>
				  </CALLELEMENT>
                  <CALLELEMENT NAME="FutureTense/Apps/AdminForms/RevisionMgt/errors"/>
             </ELSE>
        </IF>
    </THEN></IF>
    <INCCOUNTER NAME="CommitCounter" VALUE="1"/>
</LOOP>
</div>
</FTCS>
