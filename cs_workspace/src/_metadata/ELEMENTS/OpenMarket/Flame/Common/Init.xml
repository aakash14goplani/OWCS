<?xml version="1.0" ?>
<!DOCTYPE ftcs SYSTEM "futuretense_cs.dtd">
<ftcs version="1.2">
<!-- OpenMarket/Flame/Common/Init
-
- INPUT
-
- OUTPUT
-
-->

<!-- Copy from PrologActions/LoginPost -->
<SETVAR NAME="errno" VALUE="0"/>
<USERMANAGER.GETLOGINUSERNAME VARNAME="username"/>
<SETVAR NAME="numrows" VALUE="0"/>
<PROPERTY.GET PARAM="xcelelem.manageuserpub" INIFILE="futuretense_xcel.ini" VARNAME="propmanageuserpub"/>
<USERMANAGER.GETLOGINUSER VARNAME="loginuser"/>

<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/SetLocale">
    <ARGUMENT NAME="loginuser" VALUE="Variables.loginuser"/>
</CALLELEMENT>

<CALLELEMENT NAME="Variables.propmanageuserpub">
    <ARGUMENT NAME="upcommand" VALUE="GetPublications"/>
    <ARGUMENT NAME="qryprefix" VALUE="UP"/>
    <ARGUMENT NAME="username" VALUE="Variables.loginuser"/>
</CALLELEMENT>

<IF COND="Variables.numrows=1">
<THEN>
    <SETSSVAR NAME="pubid" VALUE="UP.pubid"/>
    <SETSSVAR NAME="showSiteTree" VALUE="false"/>
    <SETSSVAR NAME="usePortal" VALUE="true"/>
    <CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Security/SetPublicationName"/>
</THEN>
</IF>

</ftcs>