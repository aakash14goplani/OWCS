<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.2">
<!-- OpenMarket/CSClient/Initialize
-
- INPUT
-
- OUTPUT
-
-->
<!-- first level will be a list of sites for the logged in user -->

<USERMANAGER.GETLOGINUSER VARNAME="loginuser"/>

<PROPERTY.GET PARAM="xcelelem.manageuserpub" INIFILE="futuretense_xcel.ini" VARNAME="propmanageuserpub"/>
<CALLELEMENT NAME="Variables.propmanageuserpub">
	<ARGUMENT NAME="upcommand" VALUE="GetPublications"/>
	<ARGUMENT NAME="qryprefix" VALUE="UP"/>
	<ARGUMENT NAME="username" VALUE="Variables.loginuser"/>
</CALLELEMENT>

<IF COND="IsList.UP=true">
<THEN>
	<IF COND="UP.#numRows!=0">
	<THEN>
		<NODE NAME="Root" ID="1">
			<COLUMNS>
            <XLAT.LOOKUP KEY="dvin/Common/Name" VARNAME="_XLAT_Name"/>
				<COLUMN NAME="Variables._XLAT_Name" REPLACEALL="Variables._XLAT_Name"/>
            <XLAT.LOOKUP KEY="dvin/Common/ID" VARNAME="_XLAT_ID"/>
				<COLUMN NAME="Variables._XLAT_ID" REPLACEALL="Variables._XLAT_ID"/>
				<XLAT.LOOKUP KEY="dvin/Common/Description" VARNAME="_XLAT_Desc"/>
				<COLUMN NAME="Variables._XLAT_Desc" REPLACEALL="Variables._XLAT_Desc"/>
			</COLUMNS>
			<CHILDREN>
				<LOOP LIST="UP">
               <STRING.ENCODE LIST="UP" COLUMN="name" VARNAME="packedName"/>
               <STRING.ENCODE LIST="UP" COLUMN="description" VARNAME="packedDesc"/>
					<CHILD Folder="true" ID="UP.pubid" NAME="Variables.packedName" REPLACEALL="UP.pubid,Variables.packedName">
						<ATTRIBUTES>
							<ATTRIBUTE NAME="Variables._XLAT_Name" VALUE="Variables.packedName" DataType="String" READONLY="true" REPLACEALL="Variables.packedName,Variables._XLAT_Name"/>
							<ATTRIBUTE NAME="Variables._XLAT_ID" VALUE="UP.pubid" DataType="String" READONLY="true" REPLACEALL="UP.pubid,Variables._XLAT_ID"/>
							<ATTRIBUTE NAME="Variables._XLAT_Desc" VALUE="Variables.packedDesc" DataType="String" READONLY="true" REPLACEALL="Variables.packedDesc,Variables._XLAT_Desc"/>
						</ATTRIBUTES>
						<COMMANDS>
						<XLAT.LOOKUP KEY="dvin/CSDocLink/Open" VARNAME="_XLAT_"/>
						<IF COND="IsSessionVariable.usessoVal=true">
							<THEN>
								<COMMAND NAME="Variables._XLAT_" URI="Variables.cgipathapprootContentServer?pagename=OpenMarket/CSClient/CSClientPage(?)CSCPage=ShowFlexFamily(?)pubid=UP.pubid(?)op=init" REPLACEALL="UP.pubid,Variables.cgipathapproot,Variables._XLAT_" DEFAULT="true" TYPE="tree"/>
							</THEN >
							<ELSE>            
								<COMMAND NAME="Variables._XLAT_" URI="Variables.cgipathapprootContentServer?pagename=OpenMarket/CSClient/CSClientPage(?)CSCPage=ShowFlexFamily(?)pubid=UP.pubid(?)op=init(?)username=(Username)(?)password=(Password)" REPLACEALL="UP.pubid,Variables.cgipathapproot,Variables._XLAT_" DEFAULT="true" TYPE="tree"/>
							</ELSE>
						</IF >
						</COMMANDS>

						<IF COND="IsSessionVariable.usessoVal=true">
							<THEN>
								<OPENURI URI="Variables.cgipathapprootContentServer?pagename=OpenMarket/CSClient/CSClientPage(?)CSCPage=ShowFlexFamily(?)pubid=UP.pubid(?)op=init" REPLACEALL="UP.pubid,Variables.cgipathapproot"/>
							</THEN >
							<ELSE>
								<OPENURI URI="Variables.cgipathapprootContentServer?pagename=OpenMarket/CSClient/CSClientPage(?)CSCPage=ShowFlexFamily(?)pubid=UP.pubid(?)op=init(?)username=(Username)(?)password=(Password)" REPLACEALL="UP.pubid,Variables.cgipathapproot"/>
							</ELSE>
						</IF >
					</CHILD>
				</LOOP>
			</CHILDREN>
		</NODE>
	</THEN>
	</IF>
</THEN>
</IF>

</FTCS> 
