<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Revision: 11 $ 
$Modtime: 7/02/04 4:23p $ 
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- ContentDetailsChkBox.xml
-
- DESCRIPTION
-
- HISTORY 
-->
<setvar NAME="checksourcetype" VALUE="Variables.assetmaker/property/Variables.fieldname/inputform/sourcetype"/>
<STRINGLIST NAME="fieldvaluelist" STR="Variables.fieldvalue" DELIM=";"/>
<SETVAR NAME="spacer" VALUE="Variables.empty"/>
<if COND="Variables.checksourcetype=TABLE">
<then>
	<setvar NAME="tablename" VALUE="Variables.assetmaker/property/Variables.fieldname/inputform/tablename"/>
	<setvar NAME="errno" VALUE="0"/>
	<setvar NAME="cbvaluekey" VALUE="Variables.assetmaker/property/Variables.fieldname/inputform/cbvaluekey"/>
	<setvar NAME="cbdesckey" VALUE="Variables.assetmaker/property/Variables.fieldname/inputform/cbdesckey"/>
	<loop LIST="fieldvaluelist">
		 <callelement NAME="OpenMarket/Xcelerate/Util/validateFields">
			<ARGUMENT NAME="columnvalue" VALUE="fieldvaluelist.ITEM"/>
			<ARGUMENT NAME="type" VALUE="String"/>		 
		 </callelement>
		 <if cond="Variables.validatedstatus=true">
		 <then>
		 <STRING.STREAM VALUE="Variables.spacer"/>
		 <setvar NAME="fieldstoragetype" VALUE="Variables.assetmaker/property/Variables.fieldname/storage/type"/>
		 <ISINLIST ITEM="Variables.fieldstoragetype" STR="VARCHAR,LONGVARCHAR,CHAR"/>
		 <if COND="Variables.errno=1">
		 <then>
			<setvar NAME="errno" VALUE="0"/>
			<EXECSQL LIST="DetailsCheckBox" SQL="SELECT Variables.cbdesckey FROM Variables.tablename 
					WHERE Variables.cbvaluekey='fieldvaluelist.ITEM'"/>
   	 </then>
   	 <else>
			<setvar NAME="errno" VALUE="0"/>
			<EXECSQL LIST="DetailsCheckBox" SQL="SELECT Variables.cbdesckey FROM Variables.tablename 
					WHERE Variables.cbvaluekey=fieldvaluelist.ITEM"/>
		 </else>
		 </if>  	 
		<if COND="Variables.errno=0">
		<then>
			<STRING.STREAM LIST="DetailsCheckBox" COLUMN="Variables.cbdesckey"/>
		</then>
		</if>
		<setvar NAME="spacer" VALUE=", "/>
		</then>
		</if>
	</loop>
</then>
</if>

<if COND="Variables.checksourcetype=STRING">
<then>
	<setvar NAME="cbvalues" VALUE="Variables.assetmaker/property/Variables.fieldname/inputform/cbvalues"/>
	<setvar NAME="cbdescriptions" VALUE="Variables.assetmaker/property/Variables.fieldname/inputform/cbdescriptions"/>
	<stringlist NAME="cbvlist" STR="Variables.cbvalues" DELIM=","/>
	<stringlist NAME="cbdesclist" STR="Variables.cbdescriptions" DELIM=","/>

	<loop LIST="fieldvaluelist">
		<STRING.STREAM VALUE="Variables.spacer"/>
		<setrow LIST="cbvlist" ACTION="FIRST"/>
		<setrow LIST="cbdesclist" ACTION="FIRST"/>
		<loop LIST="cbvlist">
			<if COND="cbvlist.ITEM=fieldvaluelist.ITEM">
			<then>
				<STRING.STREAM VALUE="cbdesclist.ITEM"/>
			</then>
			</if>
			<setrow LIST="cbdesclist" ACTION="NEXT"/>
		</loop>
		<setvar NAME="spacer" VALUE=", "/>
	</loop>
</then>
</if>
</FTCS> 
