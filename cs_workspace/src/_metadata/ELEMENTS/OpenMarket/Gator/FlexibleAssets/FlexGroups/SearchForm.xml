<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">

<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateB/install/Gator/Populate/ElementCatalog/OpenMarket/Gator/FlexibleAssets/FlexGroups/SearchForm.xml $ 
$Revision: 28 $ 
$Modtime: 6/18/02 11:14a $ 
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- SearchForm.xml
-
- DESCRIPTION
-	
-
- HISTORY 
- 25 March 1999, BobP
-       Add DirectQuery form field, conditional on whether SE searching is
-       enabled.  Remove onClick from Submit button if SE searching is
-       enabled.
-->

<SCRIPT LANGUAGE="JavaScript">
function Fixpagename(ourPage, nextstep)
{
	var obj = document.forms[0].elements[0];
	
	var basePage = "OpenMarket/Xcelerate/Actions/";
	
 
	var	newpage = basePage + ourPage;
    obj.form.pagename.value = newpage;
	
 	obj.form.SearchNextStep.value = nextstep;
    
    if(obj.form.UpdatedBefore)
    {
        formatjSetDate(obj.form.UpdatedBeforeText.value, obj, obj.form.UpdatedBefore);
    }
    if(obj.form.UpdatedAfter)
    {
        formatjSetDate(obj.form.UpdatedAfterText.value, obj, obj.form.UpdatedAfter);
    }
   	
	document.forms[0].submit();

	return false;
}
  
</SCRIPT>

<INPUT TYPE="HIDDEN"  NAME="SearchNextStep"  VALUE=""/>
<IF COND="IsVariable.SelectedAttrs=true">
<THEN>
  <INPUT TYPE="HIDDEN"  NAME="SelectedAttrs"  VALUE="Variables.SelectedAttrs" REPLACEALL="Variables.SelectedAttrs"/>
  <STRINGLIST NAME="alist" STR="Variables.SelectedAttrs" DELIM=","/>
  
  <if COND="Variables.SearchNextStep!=AttrSearchForm">
  <then>
      <loop LIST="alist">
          <IF  COND="IsVariable.alist.ITEM=true">
          <THEN>
            <setvar NAME="tempvar"  VALUE="Variables.alist.ITEM"/>
            <INPUT TYPE="HIDDEN"  NAME="alist.ITEM"  VALUE="Variables.tempvar" REPLACEALL="Variables.tempvar,alist.ITEM"/>
          </THEN>
          </IF>
      </loop>
  </then>
  </if>
  
</THEN>
</IF>


                    
<IF COND="IsVariable.frontpage=true">
<THEN>
   <setvar NAME="fpage"  VALUE="Variables.frontpage"/>
</THEN>
<ELSE>
    <setvar NAME="fpage"  VALUE="Variables.ThisPage"/>
</ELSE>
</IF>

 


<if COND="IsVariable.SearchNextStep=true">
<then>
 	<callelement NAME="OpenMarket/Gator/FlexibleAssets/Common/Variables.SearchNextStep"/>
</then>
<else>
  <callelement NAME="OpenMarket/Gator/FlexibleAssets/FlexGroups/SearchForm1"/>
</else>
</if>

</FTCS>
