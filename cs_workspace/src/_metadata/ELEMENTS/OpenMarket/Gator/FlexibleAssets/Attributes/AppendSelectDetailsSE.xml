<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">

<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateB/install/Gator/Populate/ElementCatalog/OpenMarket/Gator/FlexibleAssets/Attributes/AppendSelectDetailsSE.xml $ 
$Revision: 18 $ 
$Modtime: 11/11/02 2:44p $ 
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- AppendSelectDetailsSE.xml
-
- DESCRIPTION
-	Add to search engine query for Article-specific search parameters 
-	(as defined by Article/SearchForm.xml).
-
- ARGUMENTS
-   seQuery
-       SEARCH WHAT query string.  Append to this.
-   seType
-       SEARCH TYPE value.  Change it or leave it alone.
-   seRelevance
-       SEARCH RELEVANCE value.  Change it or leave it alone.
-   sqlQueryend
-       Tail end of WHERE expression for secondary SQL query.
-   (FORM fields)
-       All form fields defined by SearchForm.xml
-   seLeft, seRight
-       Left and right strings.  Used as 
-		fieldname Variables.seLeft fieldvalue Variables.seRight
-
- HISTORY 
-->

 
<callelement NAME="OpenMarket/Gator/FlexibleAssets/Common/AppendSelectDetailsSE"/>


<!-- These are the additional fields specific to AttrTypes

Type
AssetTypes
ValueStyle
AttrTypes
Editing
Storage
ExternalId
ExternalColumn
DirectQuery

-->

<IF COND="IsVariable.AttrTypes=true">
<THEN>
	<callelement NAME="OpenMarket/Xcelerate/Util/validateFields">
	  <ARGUMENT NAME="columnvalue" VALUE="Variables.AttrTypes"/>
	  <ARGUMENT NAME="type" VALUE="String"/>
   </callelement>
   <if cond="Variables.validatedstatus=true">
   <then>
   		<SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType.attributetype = Variables.AttrTypes"/>
		<!-- append to the Filterstrings -->
   		<XLAT.LOOKUP KEY="dvin/FlexibleAssets/Attributes/AttrEditis" VARNAME="_XLAT_"/>
    	<SETVAR NAME="filterstring" VALUE="Variables.filterstring : Variables._XLAT_ 'Variables.AttrTypes'"/>
	</then>
	</if>
</THEN>
</IF>

 
<IF COND="IsVariable.Type=true">
<THEN>
<callelement NAME="OpenMarket/Xcelerate/Util/validateFields">
	  <ARGUMENT NAME="columnvalue" VALUE="Variables.Type"/>
	  <ARGUMENT NAME="type" VALUE="String"/>
   </callelement>
   <if cond="Variables.validatedstatus=true">
   <then>
	   	<SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType_Extension.type  LIKE  'Variables.Type'"/>
   		<!-- append to the Filterstrings -->
   		<XLAT.LOOKUP KEY="dvin/FlexibleAssets/FlexAssets/Typeis" VARNAME="_XLAT_"/>
    	<SETVAR NAME="filterstring" VALUE="Variables.filterstring  Variables._XLAT_ 'Variables.Type'"/>
	</then>
	</if>
</THEN>
</IF>


 


<IF COND="IsVariable.DirectQuery=true">
<THEN>
<callelement NAME="OpenMarket/Xcelerate/Util/validateFields">
	  <ARGUMENT NAME="columnvalue" VALUE="Variables.DirectQuery"/>
	  <ARGUMENT NAME="type" VALUE="SQL"/>
   </callelement>
   <if cond="Variables.validatedstatus=true">
   <then>
   		<SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType.directquery = Variables.DirectQuery"/>
</THEN>
</IF>

<!-- append to the Filterstrings -->

<if COND="IsVariable.DirectQuery=true">
   <then>    
       <XLAT.LOOKUP KEY="dvin/Common/AT/SQLquery" VARNAME="_XLAT_"/>
       <SETVAR NAME="filterstring" VALUE="Variables.filterstring Variables._XLAT_ 'Variables.DirectQuery'"/>
   </then>
</if>



<IF COND="IsVariable.ExternalColumn=true">
<THEN>
<callelement NAME="OpenMarket/Xcelerate/Util/validateFields">
	  <ARGUMENT NAME="columnvalue" VALUE="Variables.ExternalColumn"/>
	  <ARGUMENT NAME="type" VALUE="String"/>
   </callelement>
   <if cond="Variables.validatedstatus=true">
   <then>
  		 <SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType_Extension.externalcolumn LIKE 'Variables.ExternalColumn'"/>
   		 <!-- append to the Filterstrings -->
   		 <XLAT.LOOKUP KEY="dvin/FlexibleAssets/Attributes/ExternalColumnnocolon" VARNAME="_XLAT_"/>
   		 <SETVAR NAME="filterstring" VALUE="Variables.filterstring  Variables._XLAT_ 'Variables.ExternalColumn'"/>
	</then>
	</if>
</THEN>
</IF>

 

<IF COND="IsVariable.ExternalId=true">
<THEN>
<callelement NAME="OpenMarket/Xcelerate/Util/validateFields">
	  <ARGUMENT NAME="columnvalue" VALUE="Variables.ExternalId"/>
	  <ARGUMENT NAME="type" VALUE="String"/>
   </callelement>
   <if cond="Variables.validatedstatus=true">
   <then>
   		<SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType_Extension.externalid = Variables.ExternalId"/>
		<!-- append to the Filterstrings -->
   		<XLAT.LOOKUP KEY="dvin/FlexibleAssets/Attributes/ExternalIDnocolon" VARNAME="_XLAT_"/>
   		<SETVAR NAME="filterstring" VALUE="Variables.filterstring  Variables._XLAT_ 'Variables.ExternalId'"/>
	</then>
	</if>
</THEN>
</IF>


 
<IF COND="IsVariable.Storage=true">
<THEN>
<callelement NAME="OpenMarket/Xcelerate/Util/validateFields">
	  <ARGUMENT NAME="columnvalue" VALUE="Variables.Storage"/>
	  <ARGUMENT NAME="type" VALUE="String"/>
   </callelement>
   <if cond="Variables.validatedstatus=true">
   <then>
   		<SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType_Extension.storage LIKE 'Variables.Storage'"/>
		<!-- append to the Filterstrings -->
   		<XLAT.LOOKUP KEY="dvin/FlexibleAssets/Attributes/StorageStylenocolon" VARNAME="_XLAT_"/>
   		<SETVAR NAME="filterstring" VALUE="Variables.filterstring  Variables._XLAT_ 'Variables.Storage'"/>
 	</then>
 	</if>
</THEN>
</IF>

 
<IF COND="IsVariable.Editing=true">
<THEN>
<callelement NAME="OpenMarket/Xcelerate/Util/validateFields">
	  <ARGUMENT NAME="columnvalue" VALUE="Variables.Editing"/>
	  <ARGUMENT NAME="type" VALUE="String"/>
   </callelement>
   <if cond="Variables.validatedstatus=true">
   <then>
   		<SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType_Extension.editing LIKE  'Variables.Editing'"/>
 		<!-- append to the Filterstrings -->
   		<XLAT.LOOKUP KEY="dvin/FlexibleAssets/Attributes/EditingStyleNocolon" VARNAME="_XLAT_"/>
    	<SETVAR NAME="filterstring" VALUE="Variables.filterstring  Variables._XLAT_ 'Variables.Editing'"/>
    </then>
    </if>
 </THEN>
</IF>

  
<IF COND="IsVariable.ValueStyle=true">
<THEN>
<callelement NAME="OpenMarket/Xcelerate/Util/validateFields">
	  <ARGUMENT NAME="columnvalue" VALUE="Variables.ValueStyle"/>
	  <ARGUMENT NAME="type" VALUE="String"/>
   </callelement>
   <if cond="Variables.validatedstatus=true">
   <then>
    	<SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType_Extension.valuestyle LIKE  'Variables.ValueStyle'"/>
 		<!-- append to the Filterstrings -->
    	<XLAT.LOOKUP KEY="dvin/FlexibleAssets/Attributes/NumberValueis" VARNAME="_XLAT_"/>
    	<SETVAR NAME="filterstring" VALUE="Variables.filterstring Variables._XLAT_ 'Variables.ValueStyle'"/>
  </then>
  </if>
</THEN>
</IF>


<IF COND="IsVariable.AssetTypes=true">
<THEN>
<callelement NAME="OpenMarket/Xcelerate/Util/validateFields">
	  <ARGUMENT NAME="columnvalue" VALUE="Variables.AssetTypes"/>
	  <ARGUMENT NAME="type" VALUE="String"/>
   </callelement>
   <if cond="Variables.validatedstatus=true">
   <then>
    	<SETVAR NAME="sqlQueryend" VALUE="Variables.sqlQueryend AND Variables.AssetType_Extension.assettypename LIKE  'Variables.AssetTypes'"/>
 		<!-- append to the Filterstrings -->
    	<XLAT.LOOKUP KEY="dvin/FlexibleAssets/Attributes/AssetTypeis" VARNAME="_XLAT_"/>
      	<SETVAR NAME="filterstring" VALUE="Variables.filterstring  Variables._XLAT_ 'Variables.AssetTypes'"/>
	</then>
	</if>
</THEN>
</IF>

  
</FTCS>
