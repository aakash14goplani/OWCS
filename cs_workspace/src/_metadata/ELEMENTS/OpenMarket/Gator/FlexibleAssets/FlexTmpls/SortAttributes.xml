<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Gator/FlexibleAssets/FlexTmpls/SortAttributes
--
-- INPUT
--
-- OUTPUT
--
-->

<if COND="Variables.TemplateType=asset">
<then>
	<fttm.getattributetype  ASSETTYPE="Variables.AssetType"  VARNAME="attributetype"/>
	<fttm.gettemplatetype  ASSETTYPE="Variables.AssetType"  VARNAME="templatetype"/> 
</then>
<else>
	<fgttm.getattributetype  ASSETTYPE="Variables.AssetType"  VARNAME="attributetype"/>
	<setvar NAME="templatetype"  VALUE="Variables.AssetType"/>
</else>
</if>

<setvar NAME="errno" VALUE="0"/>
<if COND="IsList.ContentDetails:Attributes=true">
<then>
	<loop  LIST="ContentDetails:Attributes">
		<setvar NAME="OContentDetails:Attributes.assetid"  VALUE="ContentDetails:Attributes.ordinal"/>
	</loop>
</then>
</if>

<INPUT TYPE="HIDDEN" NAME="fromSortAttr" VALUE="true"/>

<IF COND="IsVariable.sMyParentTmpls=true">
<THEN> 
	<INPUT TYPE="HIDDEN" NAME="sMyParentTmpls" VALUE="Variables.sMyParentTmpls" REPLACEALL="Variables.sMyParentTmpls"/>
</THEN>
</IF>

<IF COND="IsVariable.sMyTmplAttributes=true">
<THEN>
	<INPUT TYPE="HIDDEN" NAME="sMyTmplAttributes" VALUE="Variables.sMyTmplAttributes" REPLACEALL="Variables.sMyTmplAttributes"/>
</THEN>
</IF>

<IF COND="IsVariable.sOptAttributes=true">
<THEN>
	<INPUT TYPE="HIDDEN" NAME="sOptAttributes" VALUE="Variables.sOptAttributes" REPLACEALL="Variables.sOptAttributes"/>
</THEN>
</IF>

<setvar NAME="FlexName"  VALUE="Variables.FlexTmpls:name"/>
<setvar NAME="FlexDescription"  VALUE="Variables.FlexTmpls:description"/>
<setvar NAME="FlexRenderid" VALUE="Variables.FlexTmpls:template"/>

<IF COND="IsVariable.FlexTmpls:template=true">
<THEN>
	<INPUT TYPE="hidden" NAME="FlexTmpls:template" VALUE="Variables.FlexRenderid" REPLACEALL="Variables.FlexRenderid"/>
</THEN>
</IF>
<IF COND="IsVariable.FlexTmpls:description=true">
<THEN>
	<INPUT TYPE="hidden" NAME="FlexTmpls:description" VALUE="Variables.FlexDescription" REPLACEALL="Variables.FlexDescription"/>
</THEN>
</IF>

<table border="0" cellpadding="0" cellspacing="0">

	<!-- page title w/ asset name -->
	<assettype.list LIST="ThisAsset" FIELD1="assettype" VALUE1="Variables.AssetType"/>
	<tr>
		<if COND="Variables.updatetype!=setformdefaults">
		<then>
			<td><span class="title-text"><STRING.STREAM VALUE="ThisAsset.description"/>: </span>
					<span class="title-value-text"><STRING.STREAM VALUE="Variables.FlexName"/></span></td>
		</then>
		<else>
			<td><span class="title-text"><XLAT.STREAM KEY="dvin/FlexibleAssets/FlexAssets/NewAssetDes"/>  </span></td>
		</else>
		</if>
	</tr>

	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
	
	<tr>
		<td><table border="0" cellpadding="0" cellspacing="0">

			<tr>
				<td class="form-label-text"><span class="alert-color">*</span><XLAT.STREAM KEY="dvin/AT/Common/Name"/> :</td>
				<td><img height="1" width="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
				<td class="form-inset">
					<input TYPE="TEXT" NAME="FlexTmpls:name" SIZE="32" MAXLENGTH="48" VALUE="Variables.FlexName" REPLACEALL="Variables.FlexName"/>
				</td>
			</tr>
		
		<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
		<tr>
			<td class="form-label-text" valign="top"><XLAT.STREAM KEY="dvin/FlexibleAssets/FlexTmpls/OrderofAttr"/> :</td>
			<td></td>
			<td class="form-inset">
				<SETCOUNTER NAME="ordinalCount" VALUE="1"/>
				
				<!--  Both Required and Optional Attributes -->
				<if COND="IsVariable.sMyTmplAttributes=true">
				<then>
					<STRINGLIST NAME="attrlist" STR="Variables.sMyTmplAttributes" DELIM=";"/>
					<if COND="IsList.attrlist=true">
					<then>
						 <if COND="attrlist.#numRows!=0">
						 <then> 
								<loop LIST="attrlist"> 
									<setvar NAME="attrid"  VALUE="attrlist.ITEM"/>
									<ASSET.LIST TYPE="Variables.attributetype" LIST="Attr" FIELD1="id" VALUE1="Variables.attrid"/>
									<setvar NAME="attrOrdinal"  VALUE="Variables.empty"/>

									<IF COND="Variables.updatetype=setformdefaults">
									<THEN>
										<setvar NAME="attrOrdinal" VALUE="Counters.ordinalCount"/>
										<INCCOUNTER NAME="ordinalCount" VALUE="1"/>
									</THEN>
									</IF>
													
									 <if COND="IsList.ContentDetails:Attributes=true">
									 <then>
										 <if COND="ContentDetails:Attributes.#numRows!=0">
										 <then>
												<setvar NAME="OVariables.attrid"  VALUE="Variables.OVariables.attrid"/>
												<setvar NAME="attrOrdinal"  VALUE="Variables.OVariables.attrid"/>
												<setvar NAME="errno"  VALUE="0"/>
												<BEGINS STR="Variables.attrOrdinal" WHAT="Variables."/>
												<if COND="Variables.errno=1">
												<then>
													<setvar NAME="attrOrdinal" VALUE="Variables.empty"/>
												</then>
												</if>
											</then>
											</if>
										</then>
										</if>

										<input TYPE="TEXT" NAME="Variables.attrid" SIZE="3" MAXLENGTH="4" VALUE="Variables.attrOrdinal" REPLACEALL="Variables.attrid,Variables.attrOrdinal"/>
										<STRING.STREAM VALUE="Attr.name"/>
										<br/>
									</loop>

									<if COND="IsVariable.sOptAttributes=true">
									<then>
										<STRINGLIST NAME="attrlist" STR="Variables.sOptAttributes" DELIM=";"/>
										<if COND="IsList.attrlist=true">
										<then>
											<if COND="attrlist.#numRows!=0">
											<then> 
												<loop LIST="attrlist">  
													 <setvar NAME="attrid"  VALUE="attrlist.ITEM"/>
													<ASSET.LIST TYPE="Variables.attributetype" LIST="Attr" FIELD1="id" VALUE1="Variables.attrid"/>
													<setvar NAME="attrOrdinal"  VALUE="Variables.empty"/>
													
													<IF COND="Variables.updatetype=setformdefaults">
													<THEN>
														<setvar NAME="attrOrdinal" VALUE="Counters.ordinalCount"/>
														<INCCOUNTER NAME="ordinalCount" VALUE="1"/>
													</THEN>
													</IF>
													 <if COND="IsList.ContentDetails:Attributes=true">
													 <then>
														 <if COND="ContentDetails:Attributes.#numRows!=0">
														 <then>
																<setvar NAME="OVariables.attrid"  VALUE="Variables.OVariables.attrid"/>
																<setvar NAME="attrOrdinal"  VALUE="Variables.OVariables.attrid"/>
																<setvar NAME="errno"  VALUE="0"/>
																<BEGINS STR="Variables.attrOrdinal" WHAT="Variables."/>
																<if COND="Variables.errno=1">
																<then>
																	<setvar NAME="attrOrdinal" VALUE="Variables.empty"/>
																</then>
																</if>
															</then>
															</if>
														</then>
														</if>

													 
													 <input TYPE="TEXT" NAME="Variables.attrid" SIZE="3" MAXLENGTH="4" VALUE="Variables.attrOrdinal" REPLACEALL="Variables.attrid,Variables.attrOrdinal"/>
													 <STRING.STREAM VALUE="Attr.name"/>
													 <br/>
												</loop>
											</then>
											</if>
										</then>
										</if>
									</then>
									</if>	 <!--END TEST for sOptAttributes -->
								</then>
								</if>
						</then>
						</if>
					 </then>
					 <else>
						 <!-- Only Optional Attributes -->
						 <if COND="IsVariable.sOptAttributes=true">
						 <then>
								<STRINGLIST NAME="attrlist" STR="Variables.sOptAttributes" DELIM=";"/>
								<if COND="IsList.attrlist=true">
								<then>
									<if COND="attrlist.#numRows!=0">
									<then> 
										<loop LIST="attrlist">  
											<setvar NAME="attrid"  VALUE="attrlist.ITEM"/>
											<ASSET.LIST TYPE="Variables.attributetype" LIST="Attr" FIELD1="id" VALUE1="Variables.attrid"/>
											
											<setvar NAME="attrOrdinal"  VALUE="Variables.empty"/>
											<IF COND="Variables.updatetype=setformdefaults">
											<THEN>
												<setvar NAME="attrOrdinal" VALUE="Counters.ordinalCount"/>
												<INCCOUNTER NAME="ordinalCount" VALUE="1"/>
											</THEN>
											</IF>
													
											<if COND="IsList.ContentDetails:Attributes=true">
											<then>
												<if COND="ContentDetails:Attributes.#numRows!=0">
												<then>
													<setvar NAME="OVariables.attrid"  VALUE="Variables.OVariables.attrid"/>
													<setvar NAME="attrOrdinal"  VALUE="Variables.OVariables.attrid"/>
													<setvar NAME="errno"  VALUE="0"/>
													<BEGINS STR="Variables.attrOrdinal" WHAT="Variables."/>
													<if COND="Variables.errno=1">
													<then>
														<setvar NAME="attrOrdinal"  VALUE="Variables.empty"/>
													</then>
													</if>
												</then>
												</if>
											</then>
											</if>

											<input TYPE="TEXT" NAME="Variables.attrid" SIZE="3" MAXLENGTH="4" VALUE="Variables.attrOrdinal" REPLACEALL="Variables.attrid,Variables.attrOrdinal"/>
											<STRING.STREAM VALUE="Attr.name"/>
											<br/>
									</loop>
									</then>
									</if>
								</then>
								</if>
							</then>
							</if>
					 </else>
					</if>

					<if COND="IsVariable.sOptAttributes=true">
					<then>
					</then>
					<else>
						<if COND="IsVariable.sMyTmplAttributes=true">
						<then>
						</then>
						<else>
							(<XLAT.STREAM KEY="dvin/FlexibleAssets/FlexTmpls/NoAttrsSelected"/> )       
						</else>
						</if>
					</else>
					</if>
			</td>
		</tr>
		</table><!--end of body--></td>
	</tr>

	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>

	<!-- form buttons -->
	<tr>
		<td align="left">
			<XLAT.LOOKUP KEY="dvin/Common/SaveChanges" VARNAME="SaveChanges" ESCAPE="true"/>
            <XLAT.LOOKUP KEY="dvin/FlexibleAssets/Attributes/ALTSaveAssetDes" VARNAME="ALTSave"/>
            <A HREF="javascript:void(0)" onclick="document.forms[0].submit(); return false;" onmouseover="window.status='Variables.SaveChanges';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables.SaveChanges">
				<IMG src="Variables.cs_imagedir/graphics/SessionVariables.locale/button/content/images/save_changes.gif" ALT="Variables.ALTSave" VSPACE="10" BORDER="0" REPLACEALL="Variables.cs_imagedir,Variables.ALTSave,SessionVariables.locale,Variables.AssetTypeObj:description,Variables.SaveChanges"/>
			</A>
		</td>
	</tr>
</table>

</FTCS> 
