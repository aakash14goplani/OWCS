<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">

<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateC/install/Gator/Populate/ElementCatalog/OpenMarket/Gator/FlexibleAssets/FlexTmpls/AssocAttrDetails.xml $ 
$Revision: 34 $ 
$Modtime: 2/18/04 2:36p $ 
-->
						
<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
-AssocAttrDetails.xml
-
- DESCRIPTION
-	
-                                                         
- HISTORY 
-->

<!---  ******************INPUTS**********************
      HARDCODED  :  TYPE="Attributes"
			-->
       
<!--FlexGroupTmpls/AssocAttrDetail,0.xml-->
<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/validateFields">
	<ARGUMENT NAME="columnvalue" VALUE="Variables.AssetType"/>
	<ARGUMENT NAME="type" VALUE="String"/>
</CALLELEMENT>
<if COND="Variables.TemplateType=asset">
<then>
	<fttm.getattributetype ASSETTYPE="Variables.AssetType" VARNAME="attributetype"/> 
	<fttm.gettemplatetype  ASSETTYPE="Variables.AssetType"  VARNAME="templatetype"/>
	<!--fttm.getfiltertype ASSETTYPE="Variables.AssetType" VARNAME="filtertype"/-->
	<SETVAR NAME="errno" VALUE="0"/>
	<SETVAR NAME="tablename" VALUE="FlexTmplTypes"/>
	<IF COND="Variables.validatedstatus=true">
	<THEN>
		<EXECSQL SQL="SELECT assetfilter FROM Variables.tablename WHERE assettype='Variables.AssetType'" LIST="flextmpltypes"/>
	</THEN>
	</IF>
	<SETVAR NAME="filtertype" VALUE="flextmpltypes.assetfilter"/>
</then>
<else>
	<fgttm.getattributetype ASSETTYPE="Variables.AssetType" VARNAME="attributetype"/>
	<setvar NAME="templatetype" VALUE="Variables.AssetType"/> 
	<SETVAR NAME="errno" VALUE="0"/>
	<SETVAR NAME="tablename" VALUE="FlexGrpTmplTypes"/>
	<IF COND="Variables.validatedstatus=true">
	<THEN>
		<EXECSQL SQL="SELECT assetfilter FROM Variables.tablename WHERE assettype='Variables.AssetType'" LIST="flextmpltypes"/>
	</THEN>
	</IF>
	<SETVAR NAME="filtertype" VALUE="flextmpltypes.assetfilter"/>
</else>
</if>

<!-- Parent Types, if any -->
    

<tr>
	<td valign="top" class="form-label-text"><XLAT.STREAM KEY="dvin/FlexibleAssets/FlexTmpls/ParentDefs"/>:</td>
	<td></td>
	<td class="form-inset">
		<copylist LIST="tmplGrouplist" FROM="ContentDetails:Groups"/>

		<if COND="IsList.tmplGrouplist!=true">
		<then>
			<XLAT.STREAM KEY="dvin/Common/PnoneP"/> 
		</then>
		<else>
			<if COND="tmplGrouplist.#numRows=0">
			<then>
				<XLAT.STREAM KEY="dvin/Common/PnoneP"/> 
			</then>
			<else>
				<!-- Reusing this template for the New/Alloy/CS7 UI requires that we create another list to store the output -->
				<LISTOBJECT.CREATE NAME="tempList" COLUMNS="ParentAssetType,ParentAssetDefName,ValueStyle,Required,id"/>
				<setvar NAME="separatorTag" VALUE="0"/>
				<loop LIST="tmplGrouplist">  
					<setvar NAME="grpid"  VALUE="tmplGrouplist.assetid"/>
					<ASSET.LOAD TYPE="Variables.templatetype" NAME="PGtmpls" OBJECTID="tmplGrouplist.assetid"/> 
					<setvar NAME="errno"   VALUE="0"/>
					<ASSET.GET NAME="PGtmpls" FIELD="name" OUTPUT="gnamevar"/>
					<IF COND="tmplGrouplist.multiple=true">
					<THEN>
						<setvar NAME="gnamevar" VALUE="Variables.gnamevar (M)"/>
					</THEN>
					<ELSE>
						<setvar NAME="gnamevar" VALUE="Variables.gnamevar (S)"/>
					</ELSE>
					</IF>
					<if COND="Variables.separatorTag=1">
					<then>
						<br/>
					</then>
					</if>
					<if COND="tmplGrouplist.required=true">
					<then>
						<span class="alert-color">*</span>
					</then>
					<else>
						&nbsp;&nbsp;
					</else>
					</if>
					<XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="InspectThisItem" ESCAPE="true"/>

                    <!-- Generate Link only if from advanced UI.. will throw exception from dash UI -->
                    <if COND="IsVariable.dashUI=false">
                    <then>
                        <CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
                            <ARGUMENT NAME="assettype" VALUE="Variables.templatetype"/>
                            <ARGUMENT NAME="assetid" VALUE="Variables.grpid"/>
                            <ARGUMENT NAME="varname" VALUE="urlInspectItem"/>
                            <ARGUMENT NAME="function" VALUE="inspect"/>
                        </CALLELEMENT>
                    </then>
                    </if>

               <a href="Variables.urlInspectItem" onmouseover="window.status='Variables.InspectThisItem';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlInspectItem,Variables.InspectThisItem">
					<STRING.STREAM VARIABLE="gnamevar"/></a>
					<ASSET.GET NAME="PGtmpls" FIELD="name" OUTPUT="ParentAssetDefName"/>
					<LISTOBJECT.ADDROW NAME="tempList" ParentAssetType="Variables.templatetype" ParentAssetDefName="Variables.ParentAssetDefName" ValueStyle="tmplGrouplist.multiple" Required="tmplGrouplist.required" id="tmplGrouplist.assetid" />
					<setvar NAME="separatorTag" VALUE="1"/>
				</loop>
				<LISTOBJECT.TOLIST NAME="tempList" LISTVARNAME="ListofParentDefs"/>
			</else>
			</if>
		</else>
		</if>
	</td>
</tr>

<!-- Type-specific Attribute Names, if any -->
 <callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>  
 			
<tr>
	<td class="form-label-text" valign="top"><XLAT.STREAM KEY="dvin/FlexibleAssets/FlexTmpls/AttrNames"/>:</td>
	<td></td>
	<td class="form-inset">
        <ATM.LOCATE TYPE="Variables.AssetType" VARNAME="ptmgr"/>
        <FLEXTEMPLATES.GETATTRIBUTEINFO NAME="ptmgr" ID="Variables.id" LISTVARNAME="tmpattrlist" />
		
        <if COND="IsList.tmpattrlist!=true">
		<then>
			<XLAT.STREAM KEY="dvin/Common/PnoneP"/> 
		</then>
		<else>
				<if COND="tmpattrlist.#numRows=0">
				<then>
					<XLAT.STREAM KEY="dvin/Common/PnoneP"/> 
				</then>
				<else>
					<setvar NAME="separatorTag" VALUE="0"/>
					<!-- Reusing this template for the New/Alloy/CS7 UI requires that we create another list to store the output -->
                    <LISTOBJECT.CREATE NAME="tempList" COLUMNS="AttributeID,AttributeType,Required"/>
					<loop LIST="tmpattrlist">
						<setvar NAME="errno" VALUE="0"/>
						<setvar NAME="errno" VALUE="0"/>
						<if COND="Variables.separatorTag=1">
						<then>
							<br/>
						</then>
						</if>
                        <if COND="tmpattrlist.required=T">
						<then>
							<span class="alert-color">*</span>
						</then>
						<else>
							&nbsp;&nbsp;
						</else>
						</if>
              <XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="InspectThisItem" ESCAPE="true"/>
              <if COND="IsVariable.dashUI=false">
                    <then>
				              <CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
				                  <ARGUMENT NAME="assettype" VALUE="Variables.attributetype"/>
				                  <ARGUMENT NAME="assetid" VALUE="tmpattrlist.assetid"/>
				                  <ARGUMENT NAME="varname" VALUE="urlInspectItem"/>
				                  <ARGUMENT NAME="function" VALUE="inspect"/>
				              </CALLELEMENT>
										</then>
              </if>
                        <setvar name="currentAttrName" value="tmpattrlist.name"/>    
                    	<if COND="tmpattrlist.valuestyle=O">
	                    <then>
	                    	<setvar name="currentAttrValueStyle" value="M"/>
	                    </then>
	                    <else>
	                    	<setvar name="currentAttrValueStyle" value="tmpattrlist.valuestyle"/>
	                    </else>
	                    </if>                    
                        <a href="Variables.urlInspectItem" onmouseover="window.status='Variables.InspectThisItem';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlInspectItem,Variables.InspectThisIteme">
                  <STRING.STREAM VARIABLE="currentAttrName" />&nbsp;(<STRING.STREAM VARIABLE="currentAttrValueStyle"/>) </a>
                        <LISTOBJECT.ADDROW NAME="tempList" AttributeID="tmpattrlist.assetid" AttributeType="Variables.attributetype" Required="tmpattrlist.required"/>
							<setvar NAME="separatorTag" VALUE="1"/>
					</loop>
					<LISTOBJECT.TOLIST NAME="tempList" LISTVARNAME="ListofAttributes"/> 
				</else>
				</if>
		</else>
		</if>
	</td>
</tr>

</FTCS>

