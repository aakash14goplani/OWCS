<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<SETVAR NAME="cs.contenttype" VALUE="text/html; charset=UTF-8"/>

<!-- OpenMarket/Gator/UIFramework/LoadAdminAssetParents
-
- INPUT
-
- OUTPUT
-
-->
						
<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/BasicEnvironment"/>

<!-- AssetType will always be set.  If op=init then load dummy node.
  -- If op=load then load remaining nodes
  -->

<ics.literal table="AssetType" column="assettype" string="Variables.AssetType" output="literal"/>
<setvar NAME="errno" VALUE="0"/>
<setvar NAME="tablename" VALUE="AssetType"/>
	
<execsql LIST="ThisAsset" 
		 SQL="SELECT AssetType.assettype, AssetType.description, AssetType.id
		 FROM    AssetType
		 WHERE	 AssetType.assettype=Variables.literal"/>
	
<if COND="Variables.errno=0">
<then>
		<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/GetDefaultNodeBehavior" />
		
		<IF COND="Variables.op=init">
		<THEN>
			<setvar NAME="errno" VALUE="0"/>
							
			<!-- 			
				// Not A flex asset then it should be 
				// basic AND/OR Admin so just search for given assettype.			
			 -->
			 		
			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/LoadTab" outstring="browseURL">
					<satellite.argument name="AssetType" value="Variables.AssetType"/>
					<satellite.argument name="populate" value="OpenMarket/Xcelerate/AssetType/Variables.AssetType/LoadTree"/>
					<satellite.argument name="op" value="load"/>
					<satellite.argument name="AssetType" value="Variables.AssetType" /> 																														
			</SATELLITE.LINK>							
				
			<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
				<ARGUMENT NAME="AdHoc" VALUE="Variables.AssetType"/>
				<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
			</CALLELEMENT>
								
			<IF COND="IsVariable.LoadURL=true">
			<THEN>
			   <setvar NAME="okFunctions" VALUE="treerefresh"/>			
			</THEN>
			<else>
			   <REMOVEVAR NAME="okFunctions"/>	
			</else>
			</IF>
																																	
			<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
				<ARGUMENT NAME="Label" VALUE="ThisAsset.description"/>
				<ARGUMENT NAME="ID"    VALUE="Variables.TreeNodeID"/>			
					
				<ARGUMENT NAME="executeFunction" VALUE="Variables.cs_defaultFunctionParent" />																					
			</CALLELEMENT>					
		</THEN>
		</IF>
	</then>
	</if>
</FTCS> 
