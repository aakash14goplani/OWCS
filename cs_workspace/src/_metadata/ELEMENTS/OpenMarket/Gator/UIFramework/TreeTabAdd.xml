<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Gator/UIFramework/TreeTabAdd
-
- INPUT
-
- OUTPUT
-
-->

<SATELLITE.LINK ASSEMBLER="query" OUTSTRING="urlglobalpopupuri" PAGENAME="OpenMarket/Gator/UIFramework/LoadGlobalPopup"/>
<!-- take offeverything up to ContentServer -->
<INDEXOF STR="Variables.urlglobalpopupuri" WHAT="ContentServer" OUTSTR="csIndex"/>
<IF COND="Variables.csIndex!=0">
<THEN>
	<SUBSTRING STR="Variables.urlglobalpopupuri" OUTSTR="urlglobalpopupuri" INDEX="Variables.csIndex"/>
</THEN>
</IF>

<SATELLITE.LINK ASSEMBLER="query" OUTSTRING="urlglobalactionuri" PAGENAME="OpenMarket/Gator/UIFramework/TreeOpURL"/>
<!-- take off everything up to ContentServer -->
<INDEXOF STR="Variables.urlglobalactionuri" WHAT="ContentServer" OUTSTR="csIndex"/>
<IF COND="Variables.csIndex!=0">
<THEN>
	<SUBSTRING STR="Variables.urlglobalactionuri" OUTSTR="urlglobalactionuri" INDEX="Variables.csIndex"/>
</THEN>
</IF>

<SATELLITE.LINK ASSEMBLER="query" OUTSTRING="urlloaduri" PAGENAME="OpenMarket/Gator/UIFramework/LoadTab"/>
<!-- take off everything up to ContentServer -->
<INDEXOF STR="Variables.urlloaduri" WHAT="ContentServer" OUTSTR="csIndex"/>
<IF COND="Variables.csIndex!=0">
<THEN>
	<SUBSTRING STR="Variables.urlloaduri" OUTSTR="urlloaduri" INDEX="Variables.csIndex"/>
</THEN>
</IF>

<INPUT TYPE="hidden" NAME="New:ordinal" VALUE="1"/>
<INPUT TYPE="hidden" NAME="New:globalitemsitemTotal" VALUE="3"/>
<INPUT TYPE="hidden" NAME="New:rolesitemTotal" VALUE="1"/>

	<INPUT TYPE="hidden" NAME="New:panetype" VALUE="Tree"/>
	<INPUT TYPE="hidden" NAME="New:linestyle" VALUE="Angled"/>
	<INPUT TYPE="hidden" NAME="New:closedpic" VALUE="Variables.cs_imagedir/OMTree/TreeImages/plus.png" REPLACEALL="Variables.cs_imagedir"/>
	<INPUT TYPE="hidden" NAME="New:openedpic" VALUE="Variables.cs_imagedir/OMTree/TreeImages/minus.png" REPLACEALL="Variables.cs_imagedir"/>

<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
	<tr><td>
		<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/AddNewTreeTab"/></span>
	</td></tr>
	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
</table>

    <table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-70">
	<tr><td>
		<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<tr>
				<td class="form-label-text">
					<SPAN CLASS="alert-color">*</SPAN><XLAT.STREAM KEY="dvin/UI/Title"/>:
				</td>
				<td class="form-inset">
					<INPUT TYPE="TEXT" NAME="New:title" VALUE="Variables.empty" SIZE="32" REPLACEALL="Variables.empty"/>
				</td><td></td>
			</tr>
			<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Tooltip"/>:
				</td>
				<td class="form-inset">
					<INPUT TYPE="TEXT" NAME="New:tooltip" VALUE="Variables.empty" SIZE="32" REPLACEALL="Variables.empty"/>
				</td><td><BR /></td>
			</tr>
	
			<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<SPAN CLASS="alert-color">*</SPAN><XLAT.STREAM KEY="dvin/Common/Sites"/>:
				</td>
				<td class="form-inset">
						<SETVAR NAME="errno" VALUE="0"/>
						<PUBLICATION.LIST LIST="PublicationResults"/>
						<IF COND="IsList.PublicationResults=true">
						<THEN>
							<IF COND="PublicationResults.#numRows!=0">
							<THEN>
								<LISTOBJECT.CREATE NAME="publist" COLUMNS="id,name"/>
								<LOOP LIST="PublicationResults">
									<LISTOBJECT.ADDROW NAME="publist" id="PublicationResults.id" name="PublicationResults.name"/>
								</LOOP>
								<LISTOBJECT.ADDROW NAME="publist" id="0" name="Management Site"/>
								<LISTOBJECT.TOLIST NAME="publist" LISTVARNAME="PublicationResults"/>
							</THEN>
							<ELSE>
								<LISTOBJECT.CREATE NAME="publist" COLUMNS="id,name"/>
								<LISTOBJECT.ADDROW NAME="publist" id="0" name="Management Site"/>
								<LISTOBJECT.TOLIST NAME="publist" LISTVARNAME="PublicationResults"/>
							</ELSE>
							</IF>
						</THEN>
						<ELSE>
							<LISTOBJECT.CREATE NAME="publist" COLUMNS="id,name"/>
							<LISTOBJECT.ADDROW NAME="publist" id="0" name="Management Site"/>
							<LISTOBJECT.TOLIST NAME="publist" LISTVARNAME="PublicationResults"/>
						</ELSE>
						</IF>
						
						<SELECT NAME="New:sites" MULTIPLE="yes" SIZE="5">
							<OPTION VALUE="1"><XLAT.STREAM KEY="dvin/Common/Any"/></OPTION>
						<LOOP LIST="PublicationResults">
							<OPTION SELECTED="yes" VALUE="PublicationResults.id" REPLACEALL="PublicationResults.id"><STRING.STREAM VALUE="PublicationResults.name"/></OPTION>
						</LOOP>
						</SELECT>
				</td><td></td>
			</tr>

			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<SPAN CLASS="alert-color">*</SPAN><XLAT.STREAM KEY="dvin/UI/RequiredRoles"/>:
				</td>
				<td class="form-inset">
						<SETVAR NAME="errno" VALUE="0"/>
						<ROLEMANAGER.GETROLENAMES LISTVARNAME="acls"/>
						<SELECT NAME="New:roles" MULTIPLE="yes" SIZE="5">
								<OPTION VALUE="Any"/><XLAT.STREAM KEY="dvin/Common/Any"/>
							<LOOP LIST="acls">
								<OPTION/><STRING.STREAM VALUE="acls.aclname"/>
							</LOOP>
						</SELECT>
				</td><td></td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
         
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Admin/TabContents"/>:<BR/>
				</td>
				<td class="form-inset">
					<CALLELEMENT NAME="OpenMarket/Xcelerate/Admin/ListAvailableAssetType">
						<ARGUMENT NAME="listname" VALUE="AllTypes"/>
					</CALLELEMENT>
		            <table border="0" >
		            <tr>
		            <td CLASS="form-inset">
						<span class="table-header-small-text"><XLAT.STREAM KEY="dvin/Common/Available"/></span><br/>
						<SELECT name="Types" size="8" MULTIPLE="yes" onBlur="delNul(this.form.elements['Types'])">
							<LOOP LIST="AllTypes">
								<OPTION VALUE="AllTypes.assettype:OpenMarket/Xcelerate/AssetType/AllTypes.assettype/LoadTree" REPLACEALL="AllTypes.assettype"><STRING.STREAM VALUE="AllTypes.description"/></OPTION>
							</LOOP>
						</SELECT>
					</td>
					<td WIDTH="30"><BR /></td>
					<td CLASS="form-inset">
						<span class="table-header-small-text"><XLAT.STREAM KEY="dvin/Common/Selected"/></span><br/>
						<select NAME="SelectedSections" SIZE="8" MULTIPLE="yes" onChange="displayName(this.form.elements['SelectedSections'],document.forms[0].elements['NewSection'],document.forms[0].elements['NewURL'])">
							<option VALUE="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</option>
						</select>
					</td>
					<td><span class="table-header-small-text">
							<XLAT.STREAM KEY="dvin/UI/Admin/DisplayOrder" ESCAPE="false" ENCODE="false"/>
						</span><BR/>
						<XLAT.LOOKUP KEY="dvin/Util/FlexAssets/Moveup" VARNAME="_XLAT_" ESCAPE="true"/>
						<XLAT.LOOKUP KEY="dvin/Util/FlexAssets/Moveup" VARNAME="_ALT_"/>
						<A HREF="javascript:void(0)" onclick="moveup(document.forms[0].elements['SelectedSections']);" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_">
							<IMG src="Variables.cs_imagedir/graphics/common/screen/moveup.gif" HSPACE="4" VSPACE="4" TITLE="Variables._ALT_" ALT="Variables._ALT_" BORDER="0" REPLACEALL="Variables.cs_imagedir,Variables._ALT_,SessionVariables.locale"/><BR/>
						</A>
						<XLAT.LOOKUP KEY="dvin/Util/FlexAssets/Movedown" VARNAME="_XLAT_" ESCAPE="true"/>
						<XLAT.LOOKUP KEY="dvin/Util/FlexAssets/Movedown" VARNAME="_ALT_"/>
						<A HREF="javascript:void(0)" onclick="movedown(document.forms[0].elements['SelectedSections']);" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;"  REPLACEALL="Variables._XLAT_">
							<IMG src="Variables.cs_imagedir/graphics/common/screen/movedn.gif" HSPACE="4" VSPACE="4" BORDER="0" TITLE="Variables._ALT_" ALT="Variables._ALT_" REPLACEALL="Variables.cs_imagedir,Variables._ALT_,SessionVariables.locale"/>
						</A>
					</td>
		            </tr>
					<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacerBar"/>
					<tr>
						<td ALIGN="CENTER" CLASS="form-inset">
							<XLAT.LOOKUP KEY="dvin/UI/Admin/AddSelectedItems" ESCAPE="true" VARNAME="_XLAT_"/>
							<XLAT.LOOKUP KEY="dvin/UI/Admin/AddSelectedItems" VARNAME="_ALT_"/>
							<A HREF="javascript:void(0)" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" ONCLICK="moveright(document.forms[0].elements['Types'], document.forms[0].elements['SelectedSections'],null,'R');" REPLACEALL="Variables._XLAT_">
								<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddSelectedItems"/></CALLELEMENT>
							</A>
						</td>
						<td></td>
						<td ALIGN="CENTER" CLASS="form-inset">
						<XLAT.LOOKUP KEY="dvin/UI/Admin/RemoveSelectedItems" ESCAPE="true" VARNAME="_XLAT_"/>
						<XLAT.LOOKUP KEY="dvin/UI/Admin/RemoveSelectedItems" VARNAME="_ALT_"/>
							<A HREF="javascript:void(0)" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status=' ';return true;"  ONCLICK="moveleft(document.forms[0].elements['SelectedSections'], document.forms[0].elements['Types']);" REPLACEALL="Variables._XLAT_">
								<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Remove"/></CALLELEMENT>
							</A>
						</td>
						<td></td>
					</tr>
		  			</table>
				</td><td></td>
			</tr>
            <tr>
                <td> </td>
                <td>
                    <!-- The items that were missing -->
                   <table border="0" CELLPADDING="1">
                     <tr>
                     <td colspan="2">
                     	<XLAT.STREAM KEY="dvin/UI/Admin/Choosetabcontentsorcustom" ENCODE="false"/>
                     </td>
                    </tr>
                
                    <tr>
                     <td>
                     <XLAT.LOOKUP KEY="dvin/UI/Admin/BNewSectionNameB" VARNAME="_XLAT_"/>
                     <XLAT.STREAM KEY="dvin/UI/Admin/SectionName"/>:<BR/></td>
                     <td><INPUT TYPE="text" NAME="NewSection" VALUE="Variables._XLAT_" SIZE="32" REPLACEALL="Variables._XLAT_"/></td>
                    </tr>
                    <tr>
                     <td>
                    <XLAT.LOOKUP KEY="dvin/UI/Admin/SampleElementPath" VARNAME="_XLAT_"/>

                    <XLAT.STREAM KEY="dvin/UI/Admin/ElementName"/>:<BR/></td>
                    <td> <INPUT TYPE="text" NAME="NewURL" VALUE="Variables._XLAT_" SIZE="42" REPLACEALL="Variables._XLAT_"/></td>
                    </tr>
					<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacerBar"/>
                    <tr>
                        <td><BR/></td>
						<td CLASS="form-inset" ALIGN="LEFT">
                            <XLAT.LOOKUP KEY="dvin/UI/Admin/AddNewSection" ESCAPE="true" VARNAME="_XLAT_"/>
                            <XLAT.LOOKUP KEY="dvin/UI/Admin/AddNewSection" VARNAME="_ALT_"/>
                            <A HREF="javascript:void(0)" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status=' ';return true;" ONCLICK="movesectright(document.forms[0].elements['NewSection'], document.forms[0].elements['NewURL'], document.forms[0].elements['SelectedSections']);" REPLACEALL="Variables._XLAT_">
								<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNewSection"/></CALLELEMENT></A>
                            <XLAT.LOOKUP KEY="dvin/UI/Admin/EditSelectedSection" ESCAPE="true" VARNAME="_XLAT_"/>
                            <XLAT.LOOKUP KEY="dvin/UI/Admin/EditSelectedSection" VARNAME="_ALT_"/>
                            <A HREF="javascript:void(0)" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status=' ';return true;" ONCLICK="editsect(document.forms[0].elements['NewSection'], document.forms[0].elements['NewURL'], document.forms[0].elements['SelectedSections']);" REPLACEALL="Variables._XLAT_">
								<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/EditSection"/></CALLELEMENT>                            
							</A>
                          </td>
                       </tr>
                   </table>
                </td>
                <td> </td>
                <td> </td>
              </tr>
			
			<INPUT TYPE="hidden" NAME="New:globalitemsitem0name" VALUE="GLOBALITEMS"/>
			<INPUT TYPE="hidden" NAME="New:globalitemsitem0values" VALUE="Item:22:Refresh All=refreshAll:"/>

			<INPUT TYPE="hidden" NAME="New:globalitemsitem1name" VALUE="NODEITEMS"/>
			<INPUT TYPE="hidden" NAME="New:globalitemsitem1values" VALUE="Item:15:Refresh=refresh:"/>

			<INPUT TYPE="hidden" NAME="New:globalitemsitem2name" VALUE="LOADURI"/>
			<INPUT TYPE="hidden" NAME="New:globalitemsitem2values" VALUE="Variables.urlloaduri" REPLACEALL="Variables.urlloaduri"/>
			<INPUT TYPE="hidden" NAME="New:actionurl" VALUE="Variables.urlglobalactionuri" REPLACEALL="Variables.urlglobalactionuri"/>
			<INPUT TYPE="hidden" NAME="New:globalpopurl" VALUE="Variables.urlglobalpopupuri" REPLACEALL="Variables.urlglobalpopupuri"/>
			
			<XLAT.LOOKUP KEY="dvin/UI/Save" VARNAME="_XLAT_" ESCAPE="true"/>
			<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_status_" ESCAPE="true"/>
			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/TreeTabManager" outstring="TabViewURL">
				<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
				<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
													  <satellite.argument name="action" value="list"/>
													   </SATELLITE.LINK>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
			<TR>
				<TD class="form-label-text"></TD><TD class="form-inset">
					<A HREF="Variables.TabViewURL" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.TabViewURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>

					<A HREF="javascript:void(0);" onClick="selAllAll();if(CheckFields('New:','TreeTabManager','Save')!=false){document.forms['AppForm'].submit(); return false;}" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Save"/></CALLELEMENT></A>
				</TD>
			</TR>
		</table>
	</td></tr>
</table>

</FTCS> 
