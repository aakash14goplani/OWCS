<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<SETVAR NAME="cs.contenttype" VALUE="text/html; charset=UTF-8"/>

<!-- OpenMarket/Gator/UIFramework/Admin/LoadSources
-
- INPUT
-
- OUTPUT
-
-->

<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/BasicEnvironment"/>

<!-- This element handles all children of the Sources root node -->

<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
	<ARGUMENT NAME="AdHoc" VALUE="Sources:New"/>
	<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
</CALLELEMENT>

<REMOVEVAR NAME="LoadURL"/>
<REMOVEVAR NAME="OKActions"/>
<XLAT.LOOKUP KEY="dvin/TreeApplet/AddNew" ENCODE="false" VARNAME="_XLAT_"/>
<XLAT.LOOKUP KEY="dvin/TreeApplet/AddNewSource" ENCODE="false" VARNAME="_XLAT1_"/>
<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/SourceFront" outstring="ExecuteURL">
	<satellite.argument name="action" value="new"/>
</SATELLITE.LINK>

<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
	<satellite.argument name="AssetType" value="Variables.AssetType"/>
</SATELLITE.LINK>

<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
	<ARGUMENT NAME="Label" VALUE="Variables._XLAT_"/>
	<ARGUMENT NAME="Description" VALUE="Variables._XLAT1_"/>
	<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
	<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
	<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
	<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/plus.png"/>
</CALLELEMENT>

<SELECTTO LIST="ActiveSources" FROM="Source" WHAT="*"/>
<loop LIST="ActiveSources">
	<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
		<ARGUMENT NAME="AdHoc" VALUE="Sources:Existing:ActiveSources.source"/>
		<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
	</CALLELEMENT>
	
	<REMOVEVAR NAME="Description"/>
	<REMOVEVAR NAME="LoadURL"/>
	<REMOVEVAR NAME="OKActions"/>
	<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/SourceFront" outstring="href">
		<satellite.argument name="action" value="details"/>
		<satellite.argument name="assettype" value="Variables.currentType"/>
		<satellite.argument name="source" value="ActiveSources.source"/>
	</SATELLITE.LINK>

	<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
		<satellite.argument name="AssetType" value="Variables.AssetType"/>
	</SATELLITE.LINK>

	<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
		<ARGUMENT NAME="Label" VALUE="ActiveSources.source"/>
		<ARGUMENT NAME="Description" VALUE="ActiveSources.description"/>
		<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
		<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
		<ARGUMENT NAME="ExecuteURL" VALUE="Variables.href"/>
		<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/source.png"/>
	</CALLELEMENT>
</loop>

</FTCS> 
