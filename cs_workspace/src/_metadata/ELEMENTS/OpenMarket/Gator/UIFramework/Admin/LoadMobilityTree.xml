<?xml version="1.0" ?>
<!DOCTYPE ftcs SYSTEM "futuretense_cs.dtd">
<ftcs version="1.2">
<!-- OpenMarket/Gator/UIFramework/Admin/LoadMobilityTree
-
- INPUT
-
- OUTPUT
-
-->
<if COND="IsVariable.currentPubid=true">
    <then>
    <callelement NAME="OpenMarket/Xcelerate/Util/validateFields">
			<argument NAME="columnvalue" VALUE="Variables.currentPubid"/>
			<argument NAME="type" VALUE="Long"/>
		</callelement>
		<if cond="Variables.validatedstatus=true">
		<then>
			<!--<SETVAR NAME="currentPubid" VALUE="SessionVariables.pubid"/> -->
     	</then>
     	<else>
     		<REMOVEVAR NAME="currentPubid"/>
     	</else>
     	</if>
     </then>	
</if>

<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/BasicEnvironment"/>

<IF COND="Variables.command!=GetTypes">
<THEN>
	<PROPERTY.GET PARAM="xcelelem.manageuserpub" INIFILE="futuretense_xcel.ini" VARNAME="propmanageuserpub"/>
	<SETVAR NAME="errno" VALUE="0"/>
	<USERISMEMBER GROUP="xceladmin"/>
	<IF COND="Variables.errno=0">
	<THEN>
		<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/TreePermissionError"/>
	</THEN>
	<ELSE>
		
		<IF COND="IsVariable.Depth!=true">
		<THEN>
		
			<IF COND="Variables.AssetType=SitePlan" >
			<THEN>
				<REMOVEVAR NAME="ExecuteURL"/>
				<REMOVEVAR NAME="OKActions"/>
				<REMOVEVAR NAME="LoadURL"/>
				
				<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
					<ARGUMENT NAME="AdHoc" VALUE="SitePlan"/>
					<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
				</CALLELEMENT>
		
				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/SiteplanAdminForm" outstring="ExecuteURL">
					<satellite.argument name="form" value="Home"/>
					<satellite.argument name="tool" value="SiteplanMgt"/>
					<satellite.argument name="pubid" value="SessionVariables.pubid"/>
				</SATELLITE.LINK>
		
				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
					<satellite.argument name="AssetType" value="SitePlan"/>
					<satellite.argument name="Type" value="SitePlan"/>
				</SATELLITE.LINK>
				
				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/LoadAdminTree" outstring="LoadURL">
					<satellite.argument name="op" value="load"/>
					<satellite.argument name="NodeType" value="MobilityTree"/>
					<satellite.argument name="Depth" value="2"/>
					<satellite.argument name="currentPubid" value="SessionVariables.pubid"/>
					<satellite.argument name="Type" value="SitePlans"/>
				</SATELLITE.LINK>
				
				<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
					<ARGUMENT NAME="Label" VALUE="Site Plan"/>
					<ARGUMENT NAME="Description" VALUE="Site Plan"/>
					<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
					<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
					<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
					<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/AssetTypes/SitePlan.png"/>
					<ARGUMENT NAME="RefreshKeys" VALUE="Self:MobilitySitePlan"/>
				</CALLELEMENT>
			</THEN>
			</IF>
			
			<IF COND="Variables.AssetType=DeviceGroup" >
			<THEN>
				<REMOVEVAR NAME="ExecuteURL"/>
				<REMOVEVAR NAME="OKActions"/>
				<REMOVEVAR NAME="LoadURL"/>
				
				<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
					<ARGUMENT NAME="AdHoc" VALUE="DeviceGroups"/>
					<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
				</CALLELEMENT>
		
				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
					<satellite.argument name="AssetType" value="DeviceGroup"/>
					<satellite.argument name="Type" value="DeviceGroups"/>
				</SATELLITE.LINK>
				
				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/LoadAdminTree" outstring="LoadURL">
					<satellite.argument name="op" value="load"/>
					<satellite.argument name="NodeType" value="MobilityTree"/>
					<satellite.argument name="Depth" value="2"/>
					<satellite.argument name="currentPubid" value="SessionVariables.pubid"/>
					<satellite.argument name="Type" value="DeviceGroups"/>
				</SATELLITE.LINK>
				
				<XLAT.LOOKUP KEY="dvin/UI/MobilitySolution/DeviceGroup/DeviceGroups" ENCODE="false" VARNAME="xlatDeviceGroups"/>
				<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
					<ARGUMENT NAME="Label" VALUE="Variables.xlatDeviceGroups"/>
					<ARGUMENT NAME="Description" VALUE="Variables.xlatDeviceGroups"/>
					<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
					<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
					<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/AssetTypes/DeviceGroup.png"/>
					<ARGUMENT NAME="RefreshKeys" VALUE="Self:MobilityDeviceGroup"/>
				</CALLELEMENT>
			</THEN>
			</IF>
			
			<IF COND="Variables.AssetType=Device" >
			<THEN>
				<REMOVEVAR NAME="ExecuteURL"/>
				<REMOVEVAR NAME="OKActions"/>
				<REMOVEVAR NAME="LoadURL"/>
				
				<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
					<ARGUMENT NAME="AdHoc" VALUE="Devices"/>
					<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
				</CALLELEMENT>
		
				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
					<satellite.argument name="AssetType" value="Device"/>
					<satellite.argument name="Type" value="DeviceGroups"/>
				</SATELLITE.LINK>
				
				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/LoadAdminTree" outstring="LoadURL">
					<satellite.argument name="op" value="load"/>
					<satellite.argument name="NodeType" value="MobilityTree"/>
					<satellite.argument name="Depth" value="2"/>
					<satellite.argument name="currentPubid" value="SessionVariables.pubid"/>
					<satellite.argument name="Type" value="Devices"/>
					<satellite.argument name="AssetType" value="Device"/>
				</SATELLITE.LINK>
				
				<XLAT.LOOKUP KEY="fatwire/admin/DeviceImages" ENCODE="false" VARNAME="xlatDevices"/>
				<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
					<ARGUMENT NAME="Label" VALUE="Variables.xlatDevices"/>
					<ARGUMENT NAME="Description" VALUE="Variables.xlatDevices"/>
					<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
					<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
					<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/AssetTypes/Device.png"/>
				</CALLELEMENT>
			</THEN>
			</IF>
			
		</THEN>
		<ELSE>
			<IF COND="Variables.Depth=2">
			<THEN>
				<IF COND="Variables.Type=SitePlans">
				<THEN>
					<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
						<ARGUMENT NAME="AdHoc" VALUE="Add New"/>
						<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
					</CALLELEMENT>
					<REMOVEVAR NAME="ExecuteURL"/>
					<REMOVEVAR NAME="OKActions"/>
					<REMOVEVAR NAME="LoadURL"/>
		
					<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/SiteplanAdminForm" outstring="ExecuteURL">
						<satellite.argument name="form" value="Create"/>
						<satellite.argument name="tool" value="SiteplanMgt"/>
						<satellite.argument name="pubid" value="Variables.currentPubid"/>
					</SATELLITE.LINK>
		
					<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
						<satellite.argument name="AssetType" value="SitePlan"/>
						<satellite.argument name="Type" value="SitePlan"/>
					</SATELLITE.LINK>
					
					<XLAT.LOOKUP KEY="dvin/TreeApplet/AddNew" ENCODE="false" VARNAME="_XLAT_"/>
					
					<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
						<ARGUMENT NAME="Label" VALUE="Variables._XLAT_"/>
						<ARGUMENT NAME="Description" VALUE="Variables._XLAT_"/>
						<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
						<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
						<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
						<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/plus.png"/>
						<ARGUMENT NAME="RefreshKeys" VALUE="Variables.currentPubid_NewSitePlan"/>
					</CALLELEMENT>
				
					<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/AssetMgt/GetSiteplanList" >
						<ARGUMENT NAME="outputlistname" VALUE="SitePlanList" />
						<ARGUMENT NAME="pubid" VALUE="Variables.currentPubid" />
					</CALLELEMENT>
					<IF COND="IsList.SitePlanList=true">
					<THEN>
						<IF COND="DGList.#numRows!=1">
						<THEN>
							<REMOVEVAR NAME="OKActions"/>
							<REMOVEVAR NAME="LoadURL"/>
							<XLAT.LOOKUP KEY="dvin/UI/MobilitySolution/Siteplan/OrderSiteplan" ENCODE="false" VARNAME="_XLAT_"/>
							
							<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
								<ARGUMENT NAME="AdHoc" VALUE="Order Site Plan"/>
								<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
							</CALLELEMENT>
							<XLAT.LOOKUP KEY="dvin/TreeApplet/Commands/OrderSiteplan" ENCODE="false" VARNAME="_ordersiteplan_"/>
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="ExecuteURL">
								<satellite.argument name="op" value="Variables._ordersiteplan_"/>
								<satellite.argument name="p0_" value="ROOT"/>
								<satellite.argument name="AssetType" value="Page"/>
								<satellite.argument name="pubid" value="Variables.currentPubid"/>
								<satellite.argument name="n0_" value=""/>
							</SATELLITE.LINK>
				
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
								<satellite.argument name="AssetType" value="SitePlan"/>
							</SATELLITE.LINK>
							
							<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
								<ARGUMENT NAME="Label" VALUE="Variables._XLAT_"/>
								<ARGUMENT NAME="Description" VALUE="Variables._XLAT_"/>
								<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
								<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
								<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
								<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/AssetTypes/SitePlan.png"/>
								<ARGUMENT NAME="RefreshKeys" VALUE="Variables.currentPubid_OrderSitePlan"/>
							</CALLELEMENT>
						</THEN>
						</IF>
						
						<REMOVEVAR NAME="LoadURL"/>
						<REMOVEVAR NAME="ExecuteURL"/>
						<LOOP LIST="SitePlanList">
							<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
								<ARGUMENT NAME="ID" VALUE="SitePlanList.id"/>
								<ARGUMENT NAME="AssetType" VALUE="SitePlan"/>
								<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
							</CALLELEMENT>
							<REMOVEVAR NAME="LoadURL"/>
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/SiteplanAdminForm" outstring="ExecuteURL">
								<satellite.argument name="form" value="Modify"/>
								<satellite.argument name="spid" value="SitePlanList.id"/>
								<satellite.argument name="tool" value="SiteplanMgt"/>
								<satellite.argument name="pubid" value="Variables.currentPubid"/>
							</SATELLITE.LINK>
			
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
								<satellite.argument name="AssetType" value="Variables.AssetType"/>
							</SATELLITE.LINK>
							
							<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
								<ARGUMENT NAME="Label" VALUE="SitePlanList.name"/>
								<ARGUMENT NAME="Description" VALUE="SitePlanList.description"/>
								<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
								<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
								<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
								<ARGUMENT NAME="Image" VALUE="Variables.imageUsed"/>
								<ARGUMENT NAME="RefreshKeys" VALUE="SitePlanList.id"/>
								<ARGUMENT NAME="executeFunction" VALUE="Variables.cs_defaultFunctionChild" />
							</CALLELEMENT>
						</LOOP>
					</THEN>
					</IF>
				</THEN>
				</IF>
				
				<IF COND="Variables.Type=DeviceGroups">
				<THEN>
					<!--  Add Device Groups -->
					<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
						<ARGUMENT NAME="AdHoc" VALUE="AddDeviceGroup"/>
						<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
					</CALLELEMENT>
			
					<REMOVEVAR NAME="LoadURL"/>
					<REMOVEVAR NAME="OKActions"/>
					<REMOVEVAR NAME="Label"/>
					
					<XLAT.LOOKUP KEY="dvin/AdminForms/AddDeviceGroup" ENCODE="false" VARNAME="xlatDeviceGroup"/>
					<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/NewContentFront" outstring="ExecuteURL">
						<satellite.argument name="AssetType" value="DeviceGroup"/>
						<satellite.argument name="action" value="new"/>
					</SATELLITE.LINK>
			
					<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
						<satellite.argument name="AssetType" value="Variables.AssetType"/>
					</SATELLITE.LINK>
			
					<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
						<ARGUMENT NAME="Label" VALUE="Variables.xlatDeviceGroup"/>
						<ARGUMENT NAME="Description" VALUE="Variables.xlatDeviceGroup"/>
						<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
						<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
						<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
						<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/plus.png"/>
					</CALLELEMENT>
						
					<ASSET.LIST TYPE="DeviceGroup" LIST="DGList" PUBID="Variables.currentPubid" EXCLUDEVOIDED="true" FIELD1="category" VALUE1="m" ORDER="priority"/>
					<IF COND="IsList.DGList=true">
					<THEN>
						<IF COND="DGList.#numRows!=1">
						<THEN>
							<!--  Reorder Device Groups -->
							<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
								<ARGUMENT NAME="AdHoc" VALUE="OrderDeviceGroup"/>
								<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
							</CALLELEMENT>
					
							<REMOVEVAR NAME="LoadURL"/>
							<REMOVEVAR NAME="OKActions"/>
					
							<XLAT.LOOKUP KEY="fatwire/admin/ReorderDeviceGroupsMsg" ENCODE="false" VARNAME="_XLAT_"/>
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/DeviceGroupSkinForm" outstring="ExecuteURL">
								<satellite.argument name="tool" value="DeviceGroupMgt"/>
								<satellite.argument name="form" value="main"/>
								<satellite.argument name="inifile" value="Variables.inifile"/>
							</SATELLITE.LINK>
					
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
								<satellite.argument name="AssetType" value="Variables.AssetType"/>
							</SATELLITE.LINK>
					
							<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
								<ARGUMENT NAME="Label" VALUE="Variables._XLAT_"/>
								<ARGUMENT NAME="Description" VALUE="Variables._XLAT_"/>
								<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
								<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
								<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
								<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/asset.png"/>
							</CALLELEMENT>
							
						</THEN>
						</IF>
						<LOOP LIST="DGList">
							<REMOVEVAR NAME="ExecuteURL"/>
							<REMOVEVAR NAME="OKActions"/>
							<REMOVEVAR NAME="LoadURL"/>
							
							<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
								<ARGUMENT NAME="AdHoc" VALUE="DGList.name"/>
								<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
							</CALLELEMENT>
		
							<REMOVEVAR NAME="OKActions"/>
		
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/ContentDetailsFront" outstring="ExecuteURL">
								<satellite.argument name="AssetType" value="DeviceGroup"/>
								<satellite.argument name="id" value="DGList.id"/>
								<satellite.argument name="function" value="inspect"/>
							</SATELLITE.LINK>
		
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
								<satellite.argument name="AssetType" value="Variables.AssetType"/>
							</SATELLITE.LINK>
		
							<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
								<ARGUMENT NAME="Label" VALUE="DGList.name"/>
								<ARGUMENT NAME="Description" VALUE="DGList.name"/>
								<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
								<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
								<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
								<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/AssetTypes/DeviceGroup.png"/>
							</CALLELEMENT>
						</LOOP>
					</THEN>
					</IF>
				</THEN>
				</IF>
				
				<IF COND="Variables.Type=Devices">
				<THEN>
					<!--  Add Device Image -->
					<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
						<ARGUMENT NAME="AdHoc" VALUE="AddDevice"/>
						<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
					</CALLELEMENT>
			
					<REMOVEVAR NAME="LoadURL"/>
					<REMOVEVAR NAME="OKActions"/>
					<REMOVEVAR NAME="Label"/>
			
					<XLAT.LOOKUP KEY="fatwire/admin/AddDeviceImage" ENCODE="false" VARNAME="xlatDeviceImage"/>
					<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/NewContentFront" outstring="ExecuteURL">
						<satellite.argument name="AssetType" value="Device"/>
						<satellite.argument name="action" value="new"/>
					</SATELLITE.LINK>
			
					<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
						<satellite.argument name="AssetType" value="Variables.AssetType"/>
					</SATELLITE.LINK>
			
					
					<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
						<ARGUMENT NAME="Label" VALUE="Variables.xlatDeviceImage"/>
						<ARGUMENT NAME="Description" VALUE="Variables.xlatDeviceImage"/>
						<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
						<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
						<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
						<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/plus.png"/>
					</CALLELEMENT>
				
					<SETVAR NAME="queryend" VALUE="ORDER BY Description, name"/>
					<SETVAR NAME="queryfields" VALUE="Variables.empty"/>
					
					<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Mobility/GetInfo" >
						<ARGUMENT NAME="serviceName" VALUE="getDefaultDeviceImage"/>
					</CALLELEMENT>
					
					<SETVAR NAME="searchfor:name_op" VALUE="!="/>
					<SETVAR NAME="searchfor:name" VALUE="Variables.result"/>
					<SETVAR NAME="searchfor:status_op" VALUE="!="/>
					<SETVAR NAME="searchfor:status" VALUE="VO"/>
					<ASSET.SEARCH TYPE="Device" LIST="DIList" PREFIX="searchfor" ORDER="name"/>
					
					<IF COND="IsList.DIList=true">
					<THEN>
						<LOOP LIST="DIList">
							<REMOVEVAR NAME="LoadURL"/>
							
							<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNodeID" SCOPED="STACKED">
								<ARGUMENT NAME="AdHoc" VALUE="DIList.name"/>
								<ARGUMENT NAME="TreeNodeID" VALUE="Variables.empty"/>
							</CALLELEMENT>
		
							<REMOVEVAR NAME="OKActions"/>
		
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/ContentDetailsFront" outstring="ExecuteURL">
								<satellite.argument name="AssetType" value="Device"/>
								<satellite.argument name="id" value="DIList.id"/>
								<satellite.argument name="function" value="inspect"/>
							</SATELLITE.LINK>
		
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Gator/UIFramework/TreeOpURL" outstring="OpURL">
								<satellite.argument name="AssetType" value="Variables.AssetType"/>
							</SATELLITE.LINK>
		
							<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/BuildTreeNode">
								<ARGUMENT NAME="Label" VALUE="DIList.name"/>
								<ARGUMENT NAME="Description" VALUE="DIList.name"/>
								<ARGUMENT NAME="ID" VALUE="Variables.TreeNodeID"/>
								<ARGUMENT NAME="OpURL" VALUE="Variables.OpURL"/>
								<ARGUMENT NAME="ExecuteURL" VALUE="Variables.ExecuteURL"/>
								<ARGUMENT NAME="Image" VALUE="Variables.cs_imagedir/OMTree/TreeImages/AssetTypes/Device.png"/>
							</CALLELEMENT>
						</LOOP>
					</THEN>
					</IF>
				</THEN>
				</IF>
			</THEN>
			</IF>
		</ELSE>
		</IF>
	</ELSE>
	</IF>
</THEN>
</IF>

</ftcs>