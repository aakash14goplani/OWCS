<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Gator/UIFramework/BuildTreeNode
-
- INPUT
-
- OUTPUT
-
-->

<!--  A snp unique node id  -->
<IF COND="IsVariable.nid=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.nid" VARNAME="length"/>
	nid:<ics.resolvevariables NAME="$(Variables.length):$(Variables.nid):" DELIMITED="true"/>
</THEN>
</IF>

<!--  snp node object id  -->
<IF COND="IsVariable.oid=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.oid" VARNAME="length"/>
	oid:<ics.resolvevariables NAME="$(Variables.length):$(Variables.oid):" DELIMITED="true"/>
</THEN>
</IF>

<!--  spn node type Publication, Page etc   -->
<IF COND="IsVariable.otype=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.otype" VARNAME="length"/>
	otype:<ics.resolvevariables NAME="$(Variables.length):$(Variables.otype):" DELIMITED="true"/>
</THEN>
</IF>

<!--   SPN NODE version TRACKING number -->
<IF COND="IsVariable.oversion=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.oversion" VARNAME="length"/>
	oversion:<ics.resolvevariables NAME="$(Variables.length):$(Variables.oversion):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.totalNodes=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.totalNodes" VARNAME="length"/>
	totalNodes:<ics.resolvevariables NAME="$(Variables.length):$(Variables.totalNodes):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.maxNodes=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.maxNodes" VARNAME="length"/>
	maxNodes:<ics.resolvevariables NAME="$(Variables.length):$(Variables.maxNodes):" DELIMITED="true"/>
</THEN>
</IF>


<IF COND="IsVariable.executeFunction=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.executeFunction" VARNAME="length"/>
	executeFunction:<ics.resolvevariables NAME="$(Variables.length):$(Variables.executeFunction):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.okFunctions=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.okFunctions" VARNAME="length"/>
	OkFunctions:<ics.resolvevariables NAME="$(Variables.length):$(Variables.okFunctions):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.Label=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.Label" VARNAME="length"/>
	Label:<ics.resolvevariables NAME="$(Variables.length):$(Variables.Label):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.Description!=true">
<THEN>
	<SETVAR NAME="Description" VALUE="Variables.empty"/>
</THEN>
</IF>

<STRING.UTF8LENGTH VALUE="Variables.Description" VARNAME="length"/>
Description:<ics.resolvevariables NAME="$(Variables.length):$(Variables.Description):" DELIMITED="true"/>

<IF COND="IsVariable.ID=true">
<THEN>
	<STRING.ENCODE VARIABLE="ID" VARNAME="ID"/>
	<STRING.UTF8LENGTH VALUE="Variables.ID" VARNAME="length"/>
   ID:<ics.resolvevariables NAME="$(Variables.length):$(Variables.ID):" DELIMITED="true"/>
</THEN>
</IF>

<!--   <LOGMSG  STR="E_BuildTreeNode  UC1 AssetType= Variables.AssetType treenodeid  Variables.TreeNodeID" /> 
-->

<IF COND="IsVariable.TreeNodeID=true">
<THEN>
	<STRING.ENCODE VARIABLE="TreeNodeID" VARNAME="TreeNodeID"/>
	<STRING.UTF8LENGTH VALUE="Variables.TreeNodeID" VARNAME="length"/>
   TreeNodeID:<ics.resolvevariables NAME="$(Variables.length):$(Variables.TreeNodeID):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.LoadURL=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.LoadURL" VARNAME="length"/>
	LoadURL:<ics.resolvevariables NAME="$(Variables.length):$(Variables.LoadURL):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.browseURL=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.browseURL" VARNAME="length"/>
	browseURL:<ics.resolvevariables NAME="$(Variables.length):$(Variables.browseURL):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.ExecuteURL=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.ExecuteURL" VARNAME="length"/>
	ExecuteURL:<ics.resolvevariables NAME="$(Variables.length):$(Variables.ExecuteURL):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.OpURL=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.OpURL" VARNAME="length"/>
	OpURL:<ics.resolvevariables NAME="$(Variables.length):$(Variables.OpURL):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.PreviewURL=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.PreviewURL" VARNAME="length"/>
	PreviewURL:<ics.resolvevariables NAME="$(Variables.length):$(Variables.PreviewURL):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.OKActions=false">
<THEN>
	<SETVAR NAME="OKActions" VALUE="refresh"/>
</THEN>
</IF>
<STRINGLIST NAME="actions" STR="Variables.OKActions" DELIM=";"/>
<LOOP LIST="actions">
    <IF COND="actions.ITEM=Preview">
    <THEN>
        <IF COND="IsVariable.PreviewURL=true">
        <THEN>
            <XLAT.LOOKUP KEY="dvin/TreeApplet/Commands/actions.ITEM" ENCODE="false" VARNAME="action"/>
        	<STRING.UTF8LENGTH VALUE="Variables.action" VARNAME="length"/>
        	OKAction:<ics.resolvevariables NAME="$(Variables.length):$(Variables.action):" DELIMITED="true"/>
        </THEN>
        </IF>
    </THEN>
    <ELSE>
        <XLAT.LOOKUP KEY="dvin/TreeApplet/Commands/actions.ITEM" ENCODE="false" VARNAME="action"/>
    	<STRING.UTF8LENGTH VALUE="Variables.action" VARNAME="length"/>
    	OKAction:<ics.resolvevariables NAME="$(Variables.length):$(Variables.action):" DELIMITED="true"/>
    </ELSE>
    </IF>
</LOOP>

<IF COND="IsVariable.Image=true">
<THEN>
	<CALLELEMENT NAME="OpenMarket/Gator/UIFramework/CheckImageExists"/>
	<STRING.UTF8LENGTH VALUE="Variables.Image" VARNAME="length"/>
	Image:<ics.resolvevariables NAME="$(Variables.length):$(Variables.Image):" DELIMITED="true"/>
</THEN>
</IF>

<IF COND="IsVariable.RefreshKeys=true">
<THEN>
	<STRINGLIST NAME="keys" STR="Variables.RefreshKeys" DELIM=";"/>
	<LOOP LIST="keys">
		<STRING.UTF8LENGTH VALUE="keys.ITEM" VARNAME="length"/>
		<STRING.ENCODE VALUE="keys.ITEM" VARNAME="keysItem"/>
		RefreshKey:<ics.resolvevariables NAME="$(Variables.length):$(Variables.keysItem):" DELIMITED="true"/>
	</LOOP>
</THEN>
</IF>


<IF COND="IsVariable.hasChildren=true">
<THEN>
	<STRING.UTF8LENGTH VALUE="Variables.hasChildren" VARNAME="length"/>
	hasChildren:<ics.resolvevariables NAME="$(Variables.length):$(Variables.hasChildren):" DELIMITED="true"/>
</THEN>
</IF>

END:3:END:

<SETVAR NAME="madeANode" VALUE="yes"/>

</FTCS> 
