<?xml version="1.0" ?>
<!DOCTYPE ftcs SYSTEM "futuretense_cs.dtd">
<ftcs version="1.2">
<!-- OpenMarket/Gator/AttributeTypes/FIELDCOPIERFlexAssetGather
-
- INPUT
-
- OUTPUT
-
-->

<IF COND="IsCounter.FCG_Count=false">
    <THEN><SETCOUNTER NAME="FCG_Count" VALUE="1"/></THEN>
</IF>
<SETVAR NAME="nameOfField" VALUE="Variables.FIELDCOPIER_fieldCounters.FCG_Count"/>
<ASSET.GET NAME="theCurrentAsset" FIELD="Variables.nameOfField" OUTPUT="fieldValue"/>

<!-- test to see if the field being evaluated is flextemplateid -->

<IF COND="Variables.nameOfField=flextemplateid">
<THEN>
            <!-- returns the name of the table that stores the flextemplate -->                           
            <fatm.gettemplatetype ASSETTYPE="Variables.AssetType" VARNAME="FlexTemplateTable"/>
            <!-- get the name of the subtype for this asset -->

            <ASSET.LIST  TYPE="Variables.FlexTemplateTable" LIST="lSubTypeList" FIELD1="id" VALUE1="Variables.fieldValue"/>
            <SETVAR NAME="Variables.cs_CurrentInputName" VALUE="lSubTypeList.name"/>
</THEN>
<ELSE>
      <IF COND="Variables.nameOfField=flexgrouptemplateid">
            <THEN>
                        <!-- returns the name of the table that stores the flextemplate -->                                                               
                        <fgtm.gettemplatetype ASSETTYPE="Variables.AssetType" VARNAME="FlexTemplateTable"/>                                                         
                        <!-- get the name of the subtype for this asset -->
                        <ASSET.LIST
                                    TYPE="Variables.FlexTemplateTable"
                                    LIST="lSubTypeList"
                                    FIELD1="id"
                                    VALUE1="Variables.fieldValue"/>
                                    <SETVAR NAME="Variables.cs_CurrentInputName" VALUE="lSubTypeList.name"/>
            </THEN>
            <ELSE>
                        <SETVAR NAME="Variables.cs_CurrentInputName" VALUE="Variables.fieldValue"/>
            </ELSE>
       </IF>
</ELSE>
</IF>
<INCCOUNTER NAME="FCG_Count" VALUE="1"/>

</ftcs>