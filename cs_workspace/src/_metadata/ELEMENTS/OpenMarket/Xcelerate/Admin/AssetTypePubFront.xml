<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">

<FTCS Version="1.1">
<!--
$Logfile: /VerticalApps/XcelerateC/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Admin/AssetTypePubFront.xml $

-->

<!--
- Confidential and Proprietary Information of Open Market, Inc.
-					All Rights Reserved.
-
- DESCRIPTION
-	Admin things about an allowed AssetType
-   Will now display an intermediary screen to manage the creation or enabling of the appropriate start menu items
-   associated with each asset type being enabled.
-
- INPUT
-   action - authorize/grant/revoke/asksmi/postsmi
-   pagetype - front/post
-   smitype - comma delimited list of start menu types to manage when performing asksmi or postsmi
-   destelem - name of element to call after start menus have been created/enabled
-   clientapp - name of client application for which the start menus are being created/enabled (used by AssetTypeForClient)
-   ContCategory - semicolon delimited list of AssetType names being enabled/disabled
-->

    

<!-- type is either front or post -->

	<!-- Get the list of asset types -->
	<STRING.ENCODE VARIABLE="cs_environment" VARNAME="cs_environment"/>
<STRING.ENCODE VARIABLE="cs_formmode" VARNAME="cs_formmode"/>
	<PUBLICATION.LOAD NAME="publication" OBJECTID="Variables.pubid"/>
	<PUBLICATION.SCATTER NAME="publication" PREFIX="Publication"/>
	<if COND="Variables.showtitle!=false">
	<then>
		<table cellspacing="0" cellpadding="0" border="0" class="width-outer-70">
			<tr><td class="title-text"><IF COND="Variables.action=grant">
			<THEN>
				<XLAT.STREAM KEY="dvin/UI/Admin/EnableAssetTypes"/>
			</THEN>
			<ELSE>
				<XLAT.STREAM KEY="dvin/UI/Admin/DisableAssetTypes"/>
			</ELSE>
			</IF>: <STRING.STREAM VALUE="Variables.Publication:name"/></td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
		</table>
	</then>
	</if>

<!-- Display the publication details -->
<table class="width-outer-50" BORDER="0" CELLSPACING="0" CELLPADDING="0">
	<tr><td>
		<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/AT/Common/Name"/>:
				</td>
				<td class="form-inset">
					<STRING.STREAM VALUE="Variables.Publication:name"/>
				</td>
			</tr>
			<tr>
				<!--<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
			</tr>
			<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/AT/Common/Description"/>:
				</td>
				<td class="form-inset">
					<STRING.STREAM VALUE="Variables.Publication:description"/>
				</td>
			</tr>
			<tr>
				<!--<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
			</tr>
			<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Admin/PublicationID"/>:
				</td>
				<td class="form-inset">
					<STRING.STREAM VALUE="Variables.Publication:id"/>
				</td>
			</tr>			
			<tr>
				<!--<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
			</tr>
			<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<IF COND="Variables.action=grant">
						<THEN>
							<XLAT.STREAM KEY="dvin/UI/Admin/EnableAssetTypes"/>
						</THEN>
						<ELSE>
							<XLAT.STREAM KEY="dvin/UI/Admin/DisableAssetTypes"/>
						</ELSE>
					</IF>:
				</td>
				<td class="form-inset">
					<CALLELEMENT NAME="OpenMarket/Xcelerate/Admin/ListSiteAssetTypes">
						<ARGUMENT NAME="pubid" VALUE="Variables.Publication:id"/>
					</CALLELEMENT>
				</td>
			</tr>
			<IF COND="Variables.action=grant">
			<THEN>
				<SETVAR NAME="buttonName" VALUE="EnableAssetTypes"/>
				<XLAT.LOOKUP KEY="dvin/UI/Admin/EnableSelectedAssetTypesforsite" VARNAME="_XLAT_" ESCAPE="true"/>
				<!-- our next step is to get the list of available start menu items for the selected asset types -->
				<SETVAR NAME="action" VALUE="asksmi"/>
				<!-- set what kind of start menu items are we looking for -->
				<input type="hidden" name="SMIType" value="ContentForm,Search"/>
				<!-- where do we go after selecting the start menus -->
				<input type="hidden" name="destelem" value="OpenMarket/Xcelerate/Admin/AssetTypePubPost"/>
			</THEN>
			<ELSE>
				<SETVAR NAME="buttonName" VALUE="DisableAssetTypes"/>
				<XLAT.LOOKUP KEY="dvin/UI/Admin/DisableSelectedAssetTypesforsite" VARNAME="_XLAT_" ESCAPE="true"/>
			</ELSE>
			</IF>

			<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/AssetTypePubPost"/>
			<STRING.ENCODE VARIABLE="action" VARNAME="action"/>
			<INPUT TYPE="HIDDEN" NAME="action" VALUE="Variables.action" REPLACEALL="Variables.action"/>
			<STRING.ENCODE VARIABLE="pubid" VARNAME="pubid"/>
			<INPUT TYPE="HIDDEN" NAME="pubid" VALUE="Variables.pubid" REPLACEALL="Variables.pubid"/>
			<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_status_" ESCAPE="true"/>
			<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_alt_"/>
			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/SiteFront" outstring="urlsitefront">
				<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
				<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
													 <satellite.argument name="action" value="details"/>
													 <satellite.argument name="pubid" value="Variables.pubid"/>
													  </SATELLITE.LINK>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
			<TR>
				<TD class="form-label-text"></TD><TD class="form-inset">
					<A HREF="Variables.urlsitefront" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.urlsitefront"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
					<XLAT.LOOKUP KEY="dvin/UI/Admin/DisableAssetTypes" VARNAME="_ALT_"/>
					<IF COND="Variables.showTable!=false">
					<THEN>
					<A HREF="javascript:void(0);" onclick="document.forms['AppForm'].submit(); return false;" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Variables.buttonName" REPLACEALL="Variables.buttonName"/></CALLELEMENT></A>
					</THEN>
					</IF>
				</TD>
			</TR>
		</table>
	</td></tr>
</table>





</FTCS>
