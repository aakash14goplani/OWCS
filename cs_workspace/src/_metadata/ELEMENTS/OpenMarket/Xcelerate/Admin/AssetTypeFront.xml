<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">

<FTCS Version="1.1">
<!--
$Logfile: /VerticalApps/XcelerateD/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Admin/AssetTypeFront.xml $

-->

<!--
 Confidential and Proprietary Information of Open Market, Inc.
					All Rights Reserved.

 AssetTypeFront.xml

 DESCRIPTION
	Admin things about a AssetType
-->
<!-- HISTORY
  [2007-09-19 KGF]
 * XSS fixes (adapted from 6.3 fixes):
   * CSVAR -> STRING.STREAM
[2008-10-24 KGF #18520/3]
 * front/edit: Added new hidden field (at:couldbechild) to easily
   retrieve previous value of at:canbechild upon post
 * post/edit: Added sanity check in the case of changing canbechild
   from true to false - need to make sure that this asset type isn't
   already being used as a child somewhere, since changing this field
   to false makes this assumption and disables checks elsewhere!
-->

<SCRIPT LANGUAGE="JavaScript">
<![CDATA[
function checkfields()
{
	var obj = document.forms[0];

	//Do not check the at:assettype name since it can not be edited here (and this check is wrong) Josiah

	if (obj.elements['at:description'].value=="")
	{
]]>
		alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/mustspecifydescriptionassettype" ESCAPE="true" ENCODE="false"/>");
<![CDATA[
		return false;
	}
	if (obj.elements['at:logic'].value.search(/\S/) == -1)
	{
]]>
		alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/mustspecifyjavaclassasset" ESCAPE="true" ENCODE="false"/>");
<![CDATA[
		return false;
	}
	if (obj.elements['at:plural'].value.search(/\S/) == -1)
	{
]]>
		alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/pluralformassetdescription" ESCAPE="true" ENCODE="false"/>");
<![CDATA[
		return false;
	}
	return true;
}
function assetHandler(F, dict)
{
	var pURL = "";
	i = 0;
	while (i < dict.options.length)
	{
		if (dict.options[i].selected)
		{
			pURL = pURL + dict.options[i].value;
			break;
		}
		i++;
	}
	if (dict.options[i].value=='*')
	{
		return true;
	}

	window.location=pURL;
	return true;
}

]]>
</SCRIPT>

<!-- type is either front or post -->
<STRING.ENCODE VARIABLE="assettype" VARNAME="assettype"/>
<STRING.ENCODE VARIABLE="cs_environment" VARNAME="cs_environment"/>
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>
<STRING.ENCODE VARIABLE="cs_formmode" VARNAME="cs_formmode"/>
	<callelement NAME="OpenMarket/Xcelerate/Actions/RevisionTracking/CheckTrackingEnabled">
		<argument NAME="AssetType" VALUE="Variables.assettype"/>
	</callelement>

	<setvar NAME="doform" VALUE="false"/>
    
	<IF COND="Variables.action=list">
	<THEN>
		<!-- action=list -->

		<IF COND="IsVariable.orderby!=true">
		<THEN>
			<SETVAR NAME="orderby" VALUE="assettype"/>
		</THEN>
		</IF>
	
		<SETVAR NAME="tablename" VALUE="AssetType"/>

		<ASSETTYPE.LIST LIST="AssetDetails" ORDER="Variables.orderby"/>
		<table cellspacing="0" cellpadding="0" border="0" class="width-outer-70">
			<tr><td class="title-text"><XLAT.STREAM KEY="dvin/UI/Common/AssetTypes"/></td></tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
		</table>
		
		<table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-50">
			<tr>
				<td></td>
				<td class="tile-dark" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
				<td></td>
			</tr>
			<tr>
				<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
				<td >
					<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff"><tr><td colspan="9" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
						<tr>
							<td class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
							<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
							<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
							<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
								<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
									<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
									<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
									<satellite.argument name="action" value="list"/>
								</SATELLITE.LINK>
								<A HREF="Variables.urlassettypefront" REPLACEALL="Variables.urlassettypefront"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/UI/AssetType"/></DIV></A>
							</td>
							<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td>
							<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
								<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
									<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
									<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
									<satellite.argument name="action" value="list"/>
									<satellite.argument name="orderby" value="description"/>
								</SATELLITE.LINK>
								<A HREF="Variables.urlassettypefront" REPLACEALL="Variables.urlassettypefront"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/Description"/></DIV></A>
							</td>
							<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td>
							<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/Type"/></DIV></td>
							<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
						</tr>
						<tr>
							<td colspan="9" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>
						<!-- Loop over all search results. -->
			   			<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
						<SETVAR NAME="separatorLine" VALUE="0"/>
						<LOOP LIST="AssetDetails">

							<IF COND="Variables.separatorLine=1">
							<THEN>
								<!--<tr>
									<td colspan="9" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>-->
							</THEN>
							</IF>
							<SETVAR NAME="separatorLine" VALUE="1"/>
			
							<tr class="Variables.rowStyle"  REPLACEALL="Variables.rowStyle">
								<td><BR /></td>
								<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
									<XLAT.LOOKUP KEY="dvin/Common/Inspect" VARNAME="_XLAT_" ESCAPE="true"/>
									<XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisAssetType" VARNAME="_alt_"/>
									<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
										<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
										<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
										<satellite.argument name="action" value="details"/>
										<satellite.argument name="assettype" value="AssetDetails.assettype"/>
									</SATELLITE.LINK>
									<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconInspectContent.gif"  border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
									<XLAT.LOOKUP KEY="dvin/Common/Edit" VARNAME="_XLAT_" ESCAPE="true"/>
									<XLAT.LOOKUP KEY="dvin/UI/Admin/EditThisAssetType" VARNAME="_alt_"/>
									<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
										<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
										<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
										<satellite.argument name="action" value="edit"/>
										<satellite.argument name="assettype" value="AssetDetails.assettype"/>
									</SATELLITE.LINK>
							<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconEditContent.gif"  border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
									<ASSET.GetAssetTypeProperties TYPE="AssetDetails.assettype"/>
									<if COND="Variables.IsCoreAssetType=false">
									<then>
										<XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/>
										<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisAssetType" VARNAME="_alt_"/>
										<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
											<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
											<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
											<satellite.argument name="action" value="confirmdelete"/>
											<satellite.argument name="assettype" value="AssetDetails.assettype"/>
										</SATELLITE.LINK>
								<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContent.gif"  border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
									</then>
									<else>
										<XLAT.LOOKUP KEY="dvin/UI/Admin/CoreAssetTypescannotbedeleted" VARNAME="_alt_"/>
								<img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContentX.gif"  border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/>
									</else>
									</if>
								</td>
								<td><BR /></td>
								<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
									<DIV class="small-text-inset">
										<XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisAssetType" VARNAME="_XLAT_" ESCAPE="true"/>
										<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
											<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
											<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
											<satellite.argument name="action" value="details"/>
											<satellite.argument name="assettype" value="AssetDetails.assettype"/>
										</SATELLITE.LINK>
										<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_,AssetDetails.assettype">
											<STRING.STREAM VALUE="AssetDetails.assettype"/>
										</A>
									</DIV>
								</td>
								<td><BR /></td>
								<td VALIGN="TOP" ALIGN="LEFT">
									<DIV class="small-text-inset">
										<STRING.STREAM VALUE="AssetDetails.description"/>
									</DIV>
								</td>
								<td><BR /></td>
								<td VALIGN="TOP" ALIGN="LEFT">
									<DIV class="small-text-inset">
										<CALLELEMENT NAME="OpenMarket/Xcelerate/Admin/Util/ShowAssetTypeKind" SCOPED="LOCAL">
											<ARGUMENT NAME="assettype" VALUE="AssetDetails.assettype"/>
											<ARGUMENT NAME="logic" VALUE="AssetDetails.logic"/>
										</CALLELEMENT>
									</DIV>
								</td>
								<td><BR /></td>
							</tr>
							<IF COND="Variables.rowStyle=tile-row-normal">
							<THEN>
								<SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
							</THEN>
							<ELSE>
								<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
							</ELSE>
							</IF>
						</LOOP>
					</table>
				</td>
				<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
			</tr>
			<tr>
				<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			</tr>
			<tr>
				<td></td>
				<td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
				<td></td>
			</tr>
		</table> 
		
		<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetMakerFront" outstring="addAMURL">
			<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
			<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
			<satellite.argument name="action" value="new"/>
		</SATELLITE.LINK>
		<div class="width-outer-70">
		<XLAT.LOOKUP KEY="dvin/Assetmaker/AddNewAssetMakerAssetType" VARNAME="_XLAT_" ESCAPE="true"/>
		<A HREF="Variables.addAMURL" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_,Variables.addAMURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNewAssetmakerAT"/></CALLELEMENT></A>
		<IF COND="IsElement.OpenMarket/Gator/FlexibleAssets/AssetMaker/complexassetmaker=true">
		<THEN>
			<XLAT.LOOKUP KEY="dvin/FlexibleAssets/AssetMakers/AddNewFlexFamily" VARNAME="_XLAT_" ESCAPE="true"/>
			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/FlexAssetMakerFront" outstring="addFlexURL">
				<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
				<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
				<satellite.argument name="action" value="new"/>
			</SATELLITE.LINK>
			<A HREF="Variables.addFlexURL" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_,Variables.addFlexURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNewFlexFamily"/></CALLELEMENT></A>
		</THEN>
		</IF>
		</div>
	</THEN>
	</IF> <!-- end action=list -->


    
	<if COND="Variables.action=details">
	<then>
		<!-- "action=details", pagetype=front -->
		
		<ASSETTYPE.LOAD NAME="theAssetType" TYPE="Variables.assettype"/>
		<ASSETTYPE.SCATTER NAME="theAssetType" PREFIX="at"/>
		<ASSET.GetAssetTypeProperties TYPE="Variables.assettype"/>
		<PUBLICATION.LISTFORASSETTYPE ASSETTYPE="Variables.assettype" LIST="usedsitelist"/>
		<SETVAR NAME="hasCategory" VALUE="false"/>
		<SETCOUNTER NAME="rownum" VALUE="0"/>
		<SETVAR NAME="done" VALUE="false"/>
		<CATALOGDEF LIST="cols" FROM="Variables.assettype"/>
		<if COND="IsError.Variables.errno=false">
		<then>
			<LOOP UNTIL="Variables.done=true">
				<INCCOUNTER NAME="rownum" VALUE="1"/>
				<GOTOROW LIST="cols" ROWNUM="Counters.rownum"/>
				<if COND="cols.COLNAME=category">
				<then>
					<setvar NAME="hasCategory" VALUE="true"/>
					<setvar NAME="done" VALUE="true"/>
				</then>
				</if>
				<if COND="cols.#numRows=Counters.rownum">
				<then>
					<setvar NAME="done" VALUE="true"/>
				</then>
				</if>
			</LOOP>
		</then>
		</if>

		<if COND="Variables.showtitle!=false">
		<then>
			<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
				<tr><td>
					<span class="title-text"><XLAT.STREAM KEY="dvin/UI/AssetType"/>: <STRING.STREAM VARIABLE="at:description"/></span>
				</td></tr>
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
			</table>
		</then>
		</if>


		<table class="width-outer-50 margin-top-zero" BORDER="0" CELLSPACING="0" CELLPADDING="0">
			<tr><td>
					<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
						<tr>
							<td class="form-label-text" colspan="2">
									<table class="legacyAbar" border="0" cellpadding="0" cellspacing="0">
										<tr>
											<td>
												<XLAT.LOOKUP KEY="dvin/Common/Inspect" VARNAME="_XLAT_" ESCAPE="true"/>
												<XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisAssetType" VARNAME="_alt_"/>
												<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
													<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
													<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
													<satellite.argument name="action" value="details"/>
													<satellite.argument name="assettype" value="Variables.assettype"/>
												</SATELLITE.LINK>
												<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_">
													<img height="14" width="14" hspace="2" src="Variables.cs_imagedir/graphics/common/icon/iconInspectContentUp.gif"  border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/>
												</A>
											</td>
											<td>
												<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_">
													<span class="action-text"><XLAT.STREAM KEY="dvin/Common/Inspect"/></span>
												</A>
											</td>
											<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
											<if COND="Variables.CanEditAssetType=true">
											<then>
											<td>
												<XLAT.LOOKUP KEY="dvin/Common/Edit" VARNAME="_XLAT_" ESCAPE="true"/>
												<XLAT.LOOKUP KEY="dvin/UI/Admin/EditThisAssetType" VARNAME="_alt_"/>
												<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
													<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
													<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
													<satellite.argument name="action" value="edit"/>
													<satellite.argument name="assettype" value="Variables.assettype"/>
												</SATELLITE.LINK>
												<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_">
													<img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconEditContentUp.gif" hspace="2" border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/>
												</A>
											</td>
											<td>
												<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_">
													<span class="action-text">
														<XLAT.STREAM KEY="dvin/Common/Edit"/>
													</span>
												</A>
											</td>
											</then>
											<else>
												<td>
													<XLAT.LOOKUP KEY="UI/AdminForms/AssetTypecannotbeEdited" VARNAME="_alt_"/>
													<img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconEditContentX.gif" hspace="2" vspace="4" border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/>
												</td>
												<td>
													<span class="action-text"><XLAT.STREAM KEY="dvin/Common/Edit"/></span>
												</td>
												
												<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
											</else>
											</if>
												
											<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>

											<if COND="Variables.IsCoreAssetType=false">
											<then>
												<td>
													<XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/>
													<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisAssetType" VARNAME="_alt_"/>
													<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
														<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
														<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
														<satellite.argument name="action" value="confirmdelete"/>
														<satellite.argument name="assettype" value="Variables.assettype"/>
													</SATELLITE.LINK>
													<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_">
														<img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContentUp.gif" hspace="2" border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/>
													</A>
												</td>
												<td>
													<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_">
														<span class="action-text">
															<XLAT.STREAM KEY="dvin/Common/Delete"/>
														</span>
													</A>
												</td>

												<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
											</then>
											<else>
												<td>
													<XLAT.LOOKUP KEY="dvin/UI/Admin/CoreAssetTypescannotbedeleted" VARNAME="_alt_"/>
													<img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContentX.gif" hspace="2" vspace="4" border="0" title="Variables._alt_" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/>
												</td>
												<td>
													<span class="action-text"><XLAT.STREAM KEY="dvin/Common/Delete"/></span>
												</td>
												
												<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
											</else>
											</if>
											<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/HandleAssetTypeOperations" >
											  <ARGUMENT NAME="currentAssetType" VALUE="Variables.assettype" />
											</CALLELEMENT>
											<td>
												<SELECT NAME="AssetFunctions" onChange="assetHandler(this.form, AssetFunctions)">
													<OPTION VALUE="*" SELECTED=""/><XLAT.STREAM KEY="dvin/UI/Admin/moredotdotdot"/>
													<if COND="Variables.hasCategory=true">
													<then>
														<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/CategoryFront" outstring="urlcategfront">
															<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
															<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
															<satellite.argument name="action" value="list"/>
															<satellite.argument name="assettype" value="Variables.assettype"/>
														</SATELLITE.LINK>
														<STRING.ENCODE VARIABLE="urlcategfront" VARNAME="urlcategfront"/>
														<OPTION VALUE="Variables.urlcategfront" REPLACEALL="Variables.urlcategfront"/><XLAT.STREAM KEY="dvin/UI/Admin/Categories"/>
													</then>
													</if>
													
													<if COND="Variables.CanAddSubtypes=true">
													<then>
														<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetSubtypeFront" outstring="urlastsubtfront">
															<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
															<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
															<satellite.argument name="action" value="list"/>
															<satellite.argument name="assettype" value="Variables.assettype"/>
														</SATELLITE.LINK>
														<STRING.ENCODE VARIABLE="urlastsubtfront" VARNAME="urlastsubtfront"/>
														<OPTION VALUE="Variables.urlastsubtfront" REPLACEALL="Variables.urlastsubtfront"/><XLAT.STREAM KEY="dvin/UI/Admin/Subtypes"/>
													</then>
													</if>
													
													<IF COND="Variables.showAssociation!=no">
														<THEN>
															<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssociationFront" outstring="urlastsubtfront">
																<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
																<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
																<satellite.argument name="action" value="list"/>
																<satellite.argument name="parentassettype" value="Variables.assettype"/>
															</SATELLITE.LINK>
															<STRING.ENCODE VARIABLE="urlastsubtfront" VARNAME="urlastsubtfront"/>
															<OPTION VALUE="Variables.urlastsubtfront" REPLACEALL="Variables.urlastsubtfront"/><XLAT.STREAM KEY="dvin/UI/Admin/Associations"/>
														</THEN>
													</IF>
													
													<IF COND="Variables.showStartMenu!=no">
														<THEN>
															<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/StartMenuFront" outstring="urlstartmenufront">
																<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
																<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
																<satellite.argument name="op" value="list"/>
																<satellite.argument name="AssetType" value="Variables.assettype"/>
															</SATELLITE.LINK>
															<STRING.ENCODE VARIABLE="urlstartmenufront" VARNAME="urlstartmenufront"/>
															<OPTION VALUE="Variables.urlstartmenufront" REPLACEALL="Variables.urlstartmenufront"/><XLAT.STREAM KEY="dvin/UI/Admin/StartMenuItems"/>
														</THEN>
													</IF>
													
													<IF COND="Variables.showWebReferencePatterns!=no">
														<THEN>
															<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WebRefPatternFront" outstring="urlpatternfront">
																<satellite.argument name="action" value="list"/>
																<satellite.argument name="parentassettype" value="Variables.assettype"/>
															</SATELLITE.LINK>
															<STRING.ENCODE VARIABLE="urlpatternfront" VARNAME="urlpatternfront"/>
															<OPTION VALUE="Variables.urlpatternfront" REPLACEALL="Variables.urlpatternfront"/><XLAT.STREAM KEY="dvin/TreeApplet/URLPattern"/>
														</THEN>
													</IF>
												</SELECT>
											</td>
										</tr>
									</table>
							</td>
						</tr>
						<!--<tr>
							<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>-->			
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/AT/Common/Name"/>:
							</td>
							<td class="form-inset">
								<CSVAR NAME="Variables.at:assettype"/>
							</td>
						</tr>
						<!--<tr>
							<td colspan="3" class="light-line-color">
								<img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/>
							</td>
						</tr>-->
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/AT/Common/Description"/>:
							</td>
							<td class="form-inset">
								<STRING.STREAM VARIABLE="at:description"/>
							</td>
						</tr>
						<!--<tr>
							<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>-->
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/UI/Admin/PluralForm"/>:
							</td>
							<td class="form-inset">
								<STRING.STREAM VARIABLE="at:plural"/>
							</td>
						</tr>
						<!--<tr>
							<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>-->
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/UI/Admin/CanBeaChildAsset"/>:
							</td>
							<td class="form-inset">
								<IF COND="Variables.at:canbechild=T">
								<THEN>
									<XLAT.STREAM KEY="dvin/Common/True"/>
								</THEN>
								<ELSE>
									<XLAT.STREAM KEY="dvin/Common/False"/>
								</ELSE>
								</IF>
							</td>
						</tr>
					
						<IF COND="Variables.IsProxyAssetType=false">
							<THEN>
								<!-- Added field usedimension  -->
								<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
								<tr>
									<td class="form-label-text">
										<XLAT.STREAM KEY="dvin/UI/Admin/useDimension"/>:
									</td>
									<td class="form-inset">
											<IF COND="Variables.at:usedimension=F">
											<THEN>
												<XLAT.STREAM KEY="dvin/Common/False"/>
											</THEN>
											<ELSE>
												<XLAT.STREAM KEY="dvin/Common/True"/>
											</ELSE>
											</IF>
									</td>
								</tr>
								<!--  -->
								
							</THEN>
						</IF>
						<!--<tr>
							<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>-->
						<IF COND="Variables.showTracking!=no">
							<THEN>
								<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
								<tr>
									<td class="form-label-text">
										<XLAT.STREAM KEY="dvin/UI/Admin/RevisionTracking"/>:
									</td>
									<td class="form-inset">
										<IF COND="Variables.trackingenabled=true">
										<THEN>
											<XLAT.STREAM KEY="dvin/UI/Admin/Tracked"/>
										</THEN>
										<ELSE>
											<XLAT.STREAM KEY="dvin/UI/Admin/NotTracked"/>
										</ELSE>
										</IF>
										<BR/>
										<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/RevTracking" outstring="TrackURL">
											<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
											<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
											<satellite.argument name="action" value="track"/>
											<satellite.argument name="assettype" value="Variables.assettype"/>
										</SATELLITE.LINK>
										<A HREF="Variables.TrackURL" REPLACEALL="Variables.TrackURL"><IMG src="Variables.cs_imagedir/graphics/common/icon/doubleArrow.gif" WIDTH="15" HEIGHT="12" BORDER="0" REPLACEALL="Variables.cs_imagedir"/>
											<XLAT.STREAM KEY="dvin/UI/Admin/ManageRevisionTracking"/>
										</A>
									</td>
								</tr>
							</THEN>
						</IF>
						<PROPERTY.GET PARAM="xcelerate.usese" INIFILE="futuretense_xcel.ini" VARNAME="propusese"/>
						<IF COND="Variables.propusese=true">
						<THEN>
							<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Search/seDescription"/>

							<!--<tr>
								<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
							</tr>-->
							<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
							<tr>
								<td class="form-label-text">
									<XLAT.STREAM KEY="dvin/UI/Admin/ATSearching"/>:
								</td>
								<td class="form-inset">
									<IF COND="Variables.at:usesearchindex=1">
									<THEN>
										<XLAT.STREAM KEY="dvin/UI/Admin/seDescriptionsearchingisenabled"/>
									</THEN>
									<ELSE>
										<XLAT.STREAM KEY="dvin/UI/Admin/SQLsearching"/>
									</ELSE>
									</IF>
									<BR/>
									<!--construct encoded url -->
									<ics.encode base="ContentServer" session="true" output="SearchURL">
										<ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/Search/List"/>
										<ics.argument name="AssetType" value="Variables.assettype"/>
									</ics.encode>
									<A HREF="Variables.SearchURL" REPLACEALL="Variables.SearchURL"><IMG src="Variables.cs_imagedir/graphics/common/icon/doubleArrow.gif" WIDTH="15" HEIGHT="12" BORDER="0" REPLACEALL="Variables.cs_imagedir"/><XLAT.STREAM KEY="dvin/UI/Admin/ManageSearchEngineStatus"/></A>
								</td>
							</tr>

						</THEN>
						</IF>
						<!--<tr>
							<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>-->
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/Common/Type"/>:
							</td>
							<td class="form-inset">
								<CALLELEMENT NAME="OpenMarket/Xcelerate/Admin/Util/ShowAssetTypeKind" SCOPED="LOCAL">
									<ARGUMENT NAME="assettype" VALUE="Variables.assettype"/>
									<ARGUMENT NAME="logic" VALUE="Variables.at:logic"/>
								</CALLELEMENT>
							</td>
						</tr>
						<!--<tr>
							<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>-->
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/Common/Class"/>:
							</td>
							<td class="form-inset">
									<STRING.STREAM VARIABLE="at:logic"/><BR/>
									<IF COND="Variables.IsAssetMakerAsset=true">
									<THEN>
										<IF COND="Variables.IsProxyAssetType=false">
										<THEN>
										<!-- parse the asset descriptor file so we can extract out the defdir -->
										<CALLJAVA CLASS="com.openmarket.assetmaker.asset.AssetMaker">
											<ARGUMENT NAME="command" VALUE="parseasset"/>
											<ARGUMENT NAME="assettype" VALUE="Variables.assettype"/>
										</CALLJAVA>
										
										<!-- Check whether asset table has already been created -->
										<if COND="IsObject.Variables.assettype=false">
										<then>
											<setvar NAME="tableExists" VALUE="false"/>
											<setvar NAME="numExistingAssets" VALUE="0"/>
										</then>
										<else>
											<setvar NAME="tableExists" VALUE="true"/>
											<setvar NAME="tablename" VALUE="Variables.assettype"/>
											<EXECSQL LIST="assets" SQL="SELECT count(*) as thecount FROM Variables.assettype"/>
											<setvar NAME="numExistingAssets" VALUE="assets.thecount"/>
										</else>
										</if> 

										<IF COND="IsSessionVariable.csblobid!=true">
										<THEN>
											<SETSSVAR NAME="csblobid" VALUE="CS.UniqueID"/>
										</THEN>
										</IF>
										<SATELLITE.BLOB ASSEMBLER="query" BLOBTABLE="AssetType" BLOBCOL="urldescriptor" BLOBHEADER="text/xml" BLOBKEY="id" BLOBWHERE="Variables.at:id" CSBLOBID="SessionVariables.csblobid" OUTSTRING="urlblobserver"/>
										<A HREF="Variables.urlblobserver" REPLACEALL="Variables.urlblobserver" target='_blank'>
											<IMG src="Variables.cs_imagedir/graphics/common/icon/doubleArrow.gif" WIDTH="15" HEIGHT="12" BORDER="0" REPLACEALL="Variables.cs_imagedir"/>
											<XLAT.STREAM KEY="dvin/UI/Admin/ViewDescriptorFile"/>
										</A>
										<BR/>
										<if COND="Variables.CanEditAssetType=true">
										<then>
											<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetMakerFront" outstring="urlassetmkfront">
												<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
												<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
												<satellite.argument name="action" value="register"/>
												<satellite.argument name="assettype" value="Variables.assettype"/>
											</SATELLITE.LINK>
											<A HREF="Variables.urlassetmkfront" REPLACEALL="Variables.urlassetmkfront">
												<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/RegisterAssetElements"/></CALLELEMENT>
											</A>
										</then>
										</if>
									</THEN>
									</IF>
									</THEN>
									</IF>
							</td>
							<td><BR /></td>
						</tr>
						
						<if COND="Variables.IsAssetMakerAsset=true">
						<then>
							<IF COND="Variables.IsProxyAssetType=false">
							<THEN>
							<!--<tr>
								<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
							</tr>-->
							<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
							<tr>
								<td class="form-label-text">
									<XLAT.STREAM KEY="dvin/Assetmaker/DefDir"/>:
								</td>
								<td class="form-inset">
									<IF COND="Variables.tableExists=true">
									<THEN>
										<SETVAR NAME="tblname" VALUE="Variables.at:assettype"/>
										<SELECTTO LIST="sysinfo" FROM="SystemInfo" WHERE="tblname"/>
										<if COND="IsError.Variables.errno=false">
										<then>
											<STRING.STREAM LIST="sysinfo" COLUMN="defdir"/>
										</then>
										</if>	
										&nbsp;
									</THEN>
									<ELSE>
										<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetMakerFront" outstring="urlassetmkfront">
											<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
											<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
											<satellite.argument name="action" value="createtable"/>
											<satellite.argument name="assettype" value="Variables.assettype"/>
										</SATELLITE.LINK>
										<A HREF="Variables.urlassetmkfront" REPLACEALL="Variables.urlassetmkfront">
											<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/CreateAssetTable_"/></CALLELEMENT>
										</A>
									</ELSE>
									</IF>
								</td>
								<td><BR /></td>
							</tr>
							</THEN>
							</IF>
						</then>
						</if>
					
						<IF COND="Variables.IsFlexAsset=true">
						<THEN>
							<FATM.GETALL ASSETTYPE="Variables.AssetType" LISTVARNAME="FFamily"/>
							<IF COND="IsList.FFamily=true">
							<THEN>
								<IF COND="FFamily.#numRows!=0">
								<THEN>
									<!--<tr>
										<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
									</tr>-->
									<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
									<tr>
										<td class="form-label-text">
											<XLAT.STREAM KEY="dvin/FlexibleAssets/Common/FlexFamily"/>:
										</td>
										<td class="form-inset">
												<XLAT.LOOKUP KEY="dvin/Common/Inspect" VARNAME="_XLAT_" ESCAPE="true"/>
												<XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisAssetType" VARNAME="_alt_"/>

												<TABLE BORDER="0">
													<TR>
														<TD><XLAT.STREAM KEY="dvin/FlexibleAssets/AssetMakers/FlexAttr"/></TD>
														<TD>
															<ASSETTYPE.LIST LIST="ThisType" FIELD1="assettype" VALUE1="FFamily.attributetype"/>
															<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
																<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
																<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
																<satellite.argument name="action" value="details"/>
																<satellite.argument name="assettype" value="FFamily.attributetype"/>
															</SATELLITE.LINK>
															<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_">
																<STRING.STREAM VALUE="ThisType.description"/>
															</A>
														</TD>
													</TR>
													<SETVAR NAME="parentType" VALUE="FFamily.grouptype"/>
													<FGTM.GETALL ASSETTYPE="Variables.parentType" LISTVARNAME="PFamily"/>
													<TR>
														<TD><XLAT.STREAM KEY="dvin/FlexibleAssets/AssetMakers/FlexParentDef"/></TD>
														<TD>
															<ASSETTYPE.LIST LIST="ThisType" FIELD1="assettype" VALUE1="PFamily.templatetype"/>
															<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
																<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
																<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
																<satellite.argument name="action" value="details"/>
																<satellite.argument name="assettype" value="PFamily.templatetype"/>
															</SATELLITE.LINK>
															<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_">
																<STRING.STREAM VALUE="ThisType.description"/>
															</A>
														</TD>
													</TR>
													<TR>
														<TD><XLAT.STREAM KEY="dvin/FlexibleAssets/AssetMakers/FlexDef"/></TD>
														<TD>
															<ASSETTYPE.LIST LIST="ThisType" FIELD1="assettype" VALUE1="FFamily.templatetype"/>
															<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
																<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
																<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
																<satellite.argument name="action" value="details"/>
																<satellite.argument name="assettype" value="FFamily.templatetype"/>
															</SATELLITE.LINK>
															<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_">
																<STRING.STREAM VALUE="ThisType.description"/>
															</A>
														</TD>
													</TR>
													<TR>
														<TD><XLAT.STREAM KEY="dvin/FlexibleAssets/AssetMakers/FlexParent"/></TD>
														<TD>
															<ASSETTYPE.LIST LIST="ThisType" FIELD1="assettype" VALUE1="FFamily.grouptype"/>
															<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
																<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
																<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
																<satellite.argument name="action" value="details"/>
																<satellite.argument name="assettype" value="FFamily.grouptype"/>
															</SATELLITE.LINK>
															<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_">
																<STRING.STREAM VALUE="ThisType.description"/>
															</A>
														</TD>
													</TR>
													<TR>
														<TD><XLAT.STREAM KEY="dvin/FlexibleAssets/AssetMakers/FlexFilter"/></TD>
														<TD>
															<SETVAR NAME="filtertype" VALUE="FFamily.filtertype"/>
															<IF COND="Variables.filtertype=Variables.empty">
															<THEN>
																  <XLAT.STREAM KEY="dvin/Common/None"/>
															</THEN>
															<ELSE>
																<ASSETTYPE.LIST LIST="ThisType" FIELD1="assettype" VALUE1="FFamily.filtertype"/>
																<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
																	<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
																	<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
																	<satellite.argument name="action" value="details"/>
																	<satellite.argument name="assettype" value="FFamily.filtertype"/>
																</SATELLITE.LINK>
																<A HREF="Variables.urlassettypefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlassettypefront,Variables._XLAT_">
																	<STRING.STREAM VALUE="ThisType.description"/>
																</A>
															</ELSE>
															</IF>
														</TD>
													</TR>
												</TABLE>
										</td>
										<td><BR /></td>
									</tr>
								</THEN>
								</IF>
							</THEN>
							</IF>
						</THEN>
						</IF>
						
						<!--<tr>
							<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>-->
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/AT/Common/ID"/>:
							</td>
							<td class="form-inset">
								<STRING.STREAM VARIABLE="at:id"/>					
							</td>
							<td><BR /></td>
						</tr>
						<!--<tr>
							<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>-->
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/AT/Common/UsedSites"/>:
							</td>
							<td class="form-inset">
								<IF COND="IsList.usedsitelist=true">
								<THEN>
									<IF COND="usedsitelist.#numRows!=0">
									<THEN>
										<LOOP LIST="usedsitelist">
											<STRING.STREAM VALUE="usedsitelist.name"/>
											<br/>
										</LOOP>
									</THEN>
									</IF>
								</THEN>
								</IF>
							</td>
							<td><BR /></td>
						</tr>
					</table>

				</td></tr>
		</table>
	
		<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlassettypefront">
			<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
			<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
			<satellite.argument name="action" value="list"/>
		</SATELLITE.LINK>
		
		<DIV class="width-outer-70">
			<A HREF="Variables.urlassettypefront" REPLACEALL="Variables.urlassettypefront">
				<IMG src="Variables.cs_imagedir/graphics/common/icon/doubleArrow.gif" WIDTH="15" HEIGHT="12" BORDER="0" REPLACEALL="Variables.cs_imagedir"/>
				<XLAT.STREAM KEY="dvin/UI/Admin/Listallassettypes"/>
			</A>
		</DIV>
       
		<INPUT TYPE="HIDDEN" NAME="assettype" VALUE="Variables.assettype" REPLACEALL="Variables.assettype"/>
		<INPUT TYPE="HIDDEN" NAME="class" VALUE="Variables.at:logic" REPLACEALL="Variables.at:logic"/>

		<setvar NAME="errno" VALUE="0"/>
		<userismember GROUP="xceldevel"/>
		<if COND="Variables.errno=1">
		<then>
			<INPUT TYPE="BUTTON" VALUE="Install" ONCLICK="setAction(document.forms[0], 'Install')"/>
			<INPUT TYPE="BUTTON" VALUE="De-install" ONCLICK="setCheck2(document.forms[0], 'Variables.assetname')" REPLACEALL="Variables.assetname"/>
		</then>
		</if>
               
	</then> <!-- end of "action=details" -->
	
	<else>
		<if COND="Variables.action=edit">
		<then>
			<setvar NAME="doform" VALUE="true"/>
		</then>
		</if>
		<if COND="Variables.action=new">
		<then>
			<setvar NAME="doform" VALUE="true"/>
		</then>
		</if>
	</else>
	</if>

	<!-- action="new" or action="edit", pagetype="front"-->
	<if COND="Variables.doform=true">
	<then>
		<if COND="Variables.action=new">
		<then>
			<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
				<tr><td>
					<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/AddNewAssetType"/></span>
				</td></tr>
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
			</table>
		</then>
		</if> 
		
		<if COND="Variables.action=edit">
		<then>
			<ASSET.GetAssetTypeProperties TYPE="Variables.assettype"/>
   			<ASSETTYPE.LOAD NAME="theAssetType" TYPE="Variables.assettype"/>
			<if COND="Variables.errno!=0">
			<then>

  				 <callelement NAME="OpenMarket/Xcelerate/Actions/Util/ShowError">
   					<argument NAME="error" VALUE="EditNewAssetFailed"/>
	  			 </callelement>
  				 <throwexception/>
			</then>
			</if>
			<ASSETTYPE.SCATTER NAME="theAssetType" PREFIX="at"/>
			<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
				<tr><td>
					<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/EditAssetType"/></span>
				</td></tr>
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
			</table>

			<table class="width-outer-50" BORDER="0" CELLSPACING="0" CELLPADDING="0">
				<tr><td>
						<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
							<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
							<tr>
								<td class="form-label-text">
									<XLAT.STREAM KEY="dvin/AT/Common/Name"/>:
								</td>
								<td class="form-inset">
									<CSVAR NAME="Variables.at:assettype"/>
								</td>
								<td><BR /></td>
							</tr>
							<!--<tr>
								<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
							</tr>-->
							<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
							<tr>
								<td class="form-label-text">
									<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/AT/Common/Description"/>:
								</td>
								<td class="form-inset">
									<SETVAR NAME="OutputQString" VALUE="Variables.empty"/>
									<STRING.ENCODE VARIABLE="at:description" VARNAME="OutputQString"/>
									<INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="255" NAME="at:description" VALUE="Variables.OutputQString" REPLACEALL="Variables.OutputQString"/>
								</td>
							</tr>
							<!--<tr>
								<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
							</tr>-->
							<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
							<tr>
								<td class="form-label-text">
									<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/UI/Admin/PluralForm"/>:
								</td>
								<td class="form-inset">
									<SETVAR NAME="OutputQString" VALUE="Variables.empty"/>
									<STRING.ENCODE VARIABLE="at:plural" VARNAME="OutputQString"/>
									<INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="255" NAME="at:plural" VALUE="Variables.OutputQString" REPLACEALL="Variables.OutputQString"/>
								</td>
							</tr>
							<!--<tr>
								<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
							</tr>-->
							<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
							<tr>
								<td class="form-label-text">
									<XLAT.STREAM KEY="dvin/UI/Admin/CanBeaChildAsset"/>:
								</td>
								<td class="form-inset">
									<IF COND="Variables.at:canbechild=T">
									<THEN>
										<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:canbechild" VALUE="T" CHECKED="CHECKED"/><A HREF="#" onClick="forms[0].elements['at:canbechild'][0].checked=true;return false;" style="text-decoration : none; color : #000000" onMouseOver="window.status='';return true;"><XLAT.STREAM KEY="dvin/Common/True"/></A><BR />
										<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:canbechild" VALUE="F"/><A HREF="#" onClick="forms[0].elements['at:canbechild'][1].checked=true;return false;" style="text-decoration : none; color : #000000" onMouseOver="window.status='';return true;"><XLAT.STREAM KEY="dvin/Common/False"/></A>
					<INPUT TYPE="HIDDEN" NAME="at:couldbechild" VALUE="T"/>
									</THEN>
									<ELSE>
										<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:canbechild" VALUE="T"/><A HREF="#" onClick="forms[0].elements['at:canbechild'][0].checked=true;return false;" style="text-decoration : none; color : #000000" onMouseOver="window.status='';return true;"><XLAT.STREAM KEY="dvin/Common/True"/></A><BR />
										<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:canbechild" VALUE="F" CHECKED="CHECKED"/><A HREF="#" onClick="forms[0].elements['at:canbechild'][1].checked=true;return false;" style="text-decoration : none; color : #000000" onMouseOver="window.status='';return true;"><XLAT.STREAM KEY="dvin/Common/False"/></A>
					<INPUT TYPE="HIDDEN" NAME="at:couldbechild" VALUE="F"/>
									</ELSE>
									</IF>
									<BR />
									<XLAT.STREAM KEY="dvin/UI/Admin/Indicatesifassetallowedchildassettypes"/>
								</td>
							</tr>
							
							<!-- Added field usedimension-->
							<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/CheckIfTranslatableAssetType">
							<ARGUMENT NAME="assettype" VALUE="Variables.assettype" />
							</CALLELEMENT>
							<IF COND="Variables.IsProxyAssetType=false">
								<THEN>
								<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
								<tr>
									<td class="form-label-text">
										<XLAT.STREAM KEY="dvin/UI/Admin/useDimension"/>:
									</td>
									<td class="form-inset">
									<IF COND="Variables.isNonTranslatable!=yes">
									<THEN>
											<IF COND="Variables.at:usedimension=F">
											<THEN>
												<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:usedimension" VALUE="T" /><A HREF="#" onClick="forms[0].elements['at:usedimension'][0].checked=true;return false;" style="text-decoration : none; color : #000000" onMouseOver="window.status='';return true;"><XLAT.STREAM KEY="dvin/Common/True"/></A><BR />
												<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:usedimension" VALUE="F" CHECKED="CHECKED"/><A HREF="#" onClick="forms[0].elements['at:usedimension'][1].checked=true;return false;" style="text-decoration : none; color : #000000" onMouseOver="window.status='';return true;"><XLAT.STREAM KEY="dvin/Common/False"/></A>
											</THEN>
											<ELSE>
												<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:usedimension" VALUE="T" CHECKED="CHECKED"/><A HREF="#"  onClick="forms[0].elements['at:usedimension'][0].checked=true;return false;" style="text-decoration : none; color : #000000" onMouseOver="window.status='';return true;"><XLAT.STREAM KEY="dvin/Common/True"/></A><BR />
												<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:usedimension" VALUE="F" /><A HREF="#" onClick="forms[0].elements['at:usedimension'][1].checked=true;return false;" style="text-decoration : none; color : #000000" onMouseOver="window.status='';return true;"><XLAT.STREAM KEY="dvin/Common/False"/></A>
											</ELSE>
											</IF>
									</THEN>
									<ELSE>
										  <IF COND="Variables.at:usedimension=F">
											<THEN>
												<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:usedimension" VALUE="T" disabled="yes" /><XLAT.STREAM KEY="dvin/Common/True"/><BR />
												<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:usedimension" VALUE="F" CHECKED="CHECKED" disabled="yes"/><XLAT.STREAM KEY="dvin/Common/False"/>
											</THEN>
											<ELSE>
												<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:usedimension" VALUE="T" CHECKED="CHECKED" disabled="yes"/><XLAT.STREAM KEY="dvin/Common/True"/><BR />
												<INPUT style="margin-left:0px" TYPE="RADIO" NAME="at:usedimension" VALUE="F" disabled="yes" /><XLAT.STREAM KEY="dvin/Common/False"/>
											</ELSE>
											</IF>
									</ELSE>
									</IF>
											<BR />
											<XLAT.STREAM KEY="dvin/UI/Admin/UseDimensionComment"/>
									</td>
								</tr>
								</THEN>
							</IF>
							<!--  -->
							
							
							
							<!--<tr>
								<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
							</tr>-->
							<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
							<tr>
								<td class="form-label-text">
									<XLAT.STREAM KEY="dvin/Common/Type"/>:
								</td>
								<td class="form-inset">
									<CALLELEMENT NAME="OpenMarket/Xcelerate/Admin/Util/ShowAssetTypeKind" SCOPED="LOCAL">
										<ARGUMENT NAME="assettype" VALUE="Variables.assettype"/>
										<ARGUMENT NAME="logic" VALUE="Variables.at:logic"/>
									</CALLELEMENT>
								</td>
							</tr>
							<!--<tr>
								<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
							</tr>-->
							<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
							<tr>
								<td class="form-label-text">
									<XLAT.STREAM KEY="dvin/Common/Class"/>:
								</td>
								<td class="form-inset">
									<INPUT TYPE="hidden" SIZE="32" MAXLENGTH="255" NAME="at:logic" VALUE="Variables.at:logic" REPLACEALL="Variables.at:logic"/>
									<STRING.STREAM VARIABLE="at:logic"/>
								</td>
								<td><BR /></td>
							</tr>
							<!--<tr>
								<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
							</tr>-->
							<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
							<tr>
								<td class="form-label-text">
									<XLAT.STREAM KEY="dvin/AT/Common/ID"/>:
								</td>
								<td class="form-inset">
									<STRING.STREAM VARIABLE="at:id"/>
								</td>
								<td><BR /></td>
							</tr>
						<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
														<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/AssetTypePost"/>
								<STRING.ENCODE VARIABLE="action" VARNAME="action"/>
								<INPUT TYPE="HIDDEN" NAME="action" VALUE="Variables.action" REPLACEALL="Variables.action"/>
								<STRING.ENCODE VARIABLE="at:assettype" VARNAME="at:assettype"/>
								<INPUT TYPE="HIDDEN" NAME="assettype" VALUE="Variables.at:assettype"  REPLACEALL="Variables.at:assettype"/>
												
								<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="AssetFrontURL">
									<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
									<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
									<satellite.argument name="action" value="details"/>
									<satellite.argument name="assettype" value="Variables.assettype"/>
								</SATELLITE.LINK>

						<TR>
							<TD class="form-label-text"></TD><TD class="form-inset">
								<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_XLAT_" ESCAPE="true"/>
								<A HREF="Variables.AssetFrontURL" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_,Variables.AssetFrontURL">
									<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT>
								</A>
								<XLAT.LOOKUP KEY="dvin/UI/SaveAssetType" VARNAME="_XLAT_" ESCAPE="true"/>
								<A HREF="javascript:void(0);" onClick="if(checkfields()!=false){document.forms['AppForm'].submit(); return false;}" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_">
									<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Save"/></CALLELEMENT>
								</A>
							</TD>
						</TR>
						</table>
					</td></tr>
			</table>
								
							
		</then>
		</if>
	</then>
	</if>
    
	<IF COND="Variables.action=confirmdelete">
	<THEN>
		<!-- action=confirmdelete, pagetype=front -->
		<SETVAR NAME="allowdelete" VALUE="true"/>
		<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
			<tr><td>
				<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/DeleteAssetType"/></span>
			</td></tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
		</table>
		<!-- get the asset type description for the UI -->
		<ASSETTYPE.LOAD NAME="theAssetType" TYPE="Variables.assettype"/>
		<ASSETTYPE.SCATTER NAME="theAssetType" PREFIX="at"/>
		<div class="width-outer-70">
		<!-- get the list of other asset types that will be affected -->
		<ASSET.GETASSETTYPEDEPENDENTS TYPE="Variables.assettype" VARNAME="depAssetTypes"/>
		<IF COND="IsError.Variables.errno=true">
		<THEN>
			<XLAT.LOOKUP KEY="dvin/UI/Admin/CannotGetAssetTypeDependents" VARNAME="msgtext" errno="Variables.errno" assettype="Variables.assettype" EVALALL="false"/>
			<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
				<ARGUMENT NAME="severity" VALUE="error"/>
			</CALLELEMENT>
			<SETVAR NAME="allowdelete" VALUE="false"/>
		</THEN>
		</IF>
			
		<SETVAR NAME="uiDepAssetTypes" VALUE="Variables.empty"/>

		<!-- get dependent asset types of the dependent asset types -->
		<IF COND="Variables.depAssetTypes!=Variables.empty">
		<THEN>
			<HASH.CREATE NAME="at"/>
			<SETVAR NAME="assettypes" VALUE="Variables.depAssetTypes"/>
			<SETVAR NAME="keepgoing" VALUE="true"/>
			<SETCOUNTER NAME="depListCount" VALUE="1"/>
			<LOOP UNTIL="Variables.keepgoing=false">
				<STRINGLIST STR="Variables.assettypes" NAME="types" DELIM=","/>
				<SETVAR NAME="assettypes" VALUE="Variables.empty"/>
				<SETVAR NAME="keepgoing" VALUE="false"/>
				<LOOP LIST="types">
					<HASH.ADD NAME="at" VALUE="types.ITEM"/>
					<ASSET.GETASSETTYPEDEPENDENTS TYPE="types.ITEM" VARNAME="dAT2"/>
					<IF COND="IsError.Variables.errno=true">
					<THEN>
						<XLAT.LOOKUP KEY="dvin/UI/Admin/CannotGetAssetTypeDependents" VARNAME="msgtext" errno="Variables.errno" assettype="Variables.assettype" EVALALL="false"/>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
							<ARGUMENT NAME="severity" VALUE="error"/>
						</CALLELEMENT>
						<SETVAR NAME="keepgoing" VALUE="false"/>
						<SETVAR NAME="allowdelete" VALUE="false"/>
					</THEN>
					</IF>
					<IF COND="IsVariable.dAT2=true">
					<THEN>
						<IF COND="Variables.dAT2!=Variable.empty">
						<THEN>
							<SETVAR NAME="keepgoing" VALUE="true"/>
							<SETVAR NAME="depAssetTypes" VALUE="Variables.depAssetTypes,Variables.dAT2"/>
							<IF COND="Variables.assettypes=Variables.empty">
							<THEN>
								<SETVAR NAME="assettypes" VALUE="Variables.dAT2"/>
							</THEN>
							<ELSE>
								<SETVAR NAME="assettypes" VALUE="Variables.assettypes,Variables.dAT2"/>
							</ELSE>
							</IF>
						</THEN>
						</IF>
					</THEN>
					</IF>
				</LOOP>
			</LOOP>

			<HASH.TOSTRING NAME="at" DELIM="," VARNAME="depAssetTypes"/>
			<STRINGLIST STR="Variables.depAssetTypes" NAME="types" DELIM=","/>
			<LOOP LIST="types">
				<ASSETTYPE.LOAD NAME="at" TYPE="types.ITEM"/>
				<ASSETTYPE.GET NAME="at" FIELD="description"/>
				<IF COND="Variables.uiDepAssetTypes=Variables.empty">
				<THEN>
					<SETVAR NAME="uiDepAssetTypes" VALUE="Variables.description"/>
				</THEN>
				<ELSE>
					<SETVAR NAME="uiDepAssetTypes" VALUE="Variables.uiDepAssetTypes, Variables.description"/>
				</ELSE>
				</IF>
			</LOOP>
		</THEN>
		</IF>
			
		<!-- display warning message -->				 
		<ASSET.GetAssetTypeProperties TYPE="Variables.assettype"/>
		<IF COND="Variables.IsAssetMakerAsset=true">
		<THEN>
			<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
				<ARGUMENT NAME="elem" VALUE="DeleteAssetMakerAssetWarning"/>
				<ARGUMENT NAME="severity" VALUE="warning"/>
			</CALLELEMENT>
		</THEN>
		<ELSE>
			
			<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
				<ARGUMENT NAME="elem" VALUE="DeleteAssetTypeWarning"/>
				<ARGUMENT NAME="severity" VALUE="warning"/>
			</CALLELEMENT>
		</ELSE>
		</IF>
		</div>
		<!-- check whether there are any references to the assets that will be deleted outside of the delete set -->
		<IF COND="Variables.depAssetTypes=Variables.empty">
		<THEN>
			<SETVAR NAME="assetTypesToDelete" VALUE="Variables.assettype"/>
		</THEN>
		<ELSE>
			<SETVAR NAME="assetTypesToDelete" VALUE="Variables.assettype,Variables.depAssetTypes"/>
		</ELSE>
		</IF>
		<REMOVEVAR NAME="elem"/>
		<ASSET.GetReferencesToTypes LISTVARNAME="referers" ASSETTYPES="Variables.assetTypesToDelete" EXCLUDETYPES="Variables.assetTypesToDelete"/>
		<IF COND="IsError.Variables.errno=true">
		<THEN>
			<IF COND="Variables.errno!=-101">
			<THEN>
				<XLAT.LOOKUP KEY="dvin/UI/Admin/CannotGetAssetTypeReferences" VARNAME="msgtext" errno="Variables.errno" assettype="Variables.assettype" EVALALL="false"/>
				<div class="width-outer-70">
				<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
					<ARGUMENT NAME="severity" VALUE="error"/>
				</CALLELEMENT>
				</div>
				<SETVAR NAME="allowdelete" VALUE="false"/>
			</THEN>
			</IF>
		</THEN>
		<ELSE>
			<IF COND="referers.#numRows!=0">
			<THEN>
				<XLAT.LOOKUP KEY="dvin/UI/Assetsofthistypesreferencedby" VARNAME="msgtext"/>
				<div class="width-outer-70">
				<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
					<ARGUMENT NAME="msgtext" VALUE="Variables.msgtext"/>
					<ARGUMENT NAME="severity" VALUE="error"/>
				</CALLELEMENT>
				</div>
				<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/AssetMgt/TileMixedAssets">
					<ARGUMENT NAME="list" VALUE="referers"/>
					<ARGUMENT NAME="doDaysExpired" VALUE="false"/>					
				</CALLELEMENT>
				<SETVAR NAME="allowdelete" VALUE="false"/>
			</THEN>
			</IF>
		</ELSE>
		</IF>								
								
		<table class="width-outer-50" BORDER="0" CELLSPACING="0" CELLPADDING="0">
			<tr><td>
					<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/AT/Common/Name"/>:
							</td>
							<td class="form-inset">
								<CSVAR NAME="Variables.at:assettype"/>
							</td>
						</tr>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/AT/Common/Description"/>:
							</td>
							<td class="form-inset">
								<STRING.STREAM VARIABLE="at:description"/>
							</td>
						</tr>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/UI/Admin/PluralForm"/>:
							</td>
							<td class="form-inset">
								<STRING.STREAM VARIABLE="at:plural"/>
							</td>
						</tr>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/UI/Admin/CanBeaChildAsset"/>:
							</td>
							<td class="form-inset">
								<IF COND="Variables.at:canbechild=T">
								<THEN>
									<XLAT.STREAM KEY="dvin/Common/True"/>
									</THEN>
								<ELSE>
									<XLAT.STREAM KEY="dvin/Common/False"/>
								</ELSE>
								</IF>
							</td>
						</tr>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/UI/Admin/RevisionTracking"/>:
							</td>
							<td class="form-inset">
								<IF COND="Variables.trackingenabled=true">
								<THEN>
									<XLAT.STREAM KEY="dvin/UI/Admin/Tracked"/>
								</THEN>
								<ELSE>
									<XLAT.STREAM KEY="dvin/UI/Admin/NotTracked"/>
								</ELSE>
								</IF>
								<BR/>
							</td>
						</tr>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/Common/Type"/>:
							</td>
							<td class="form-inset">
								<CALLELEMENT NAME="OpenMarket/Xcelerate/Admin/Util/ShowAssetTypeKind" SCOPED="LOCAL">
									<ARGUMENT NAME="assettype" VALUE="Variables.assettype"/>
									<ARGUMENT NAME="logic" VALUE="Variables.at:logic"/>
								</CALLELEMENT>
							</td>
						</tr>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/Common/Class"/>:
							</td>
							<td class="form-inset">
								<STRING.STREAM VARIABLE="at:logic"/><BR/>
								<IF COND="Variables.IsAssetMakerAsset=true">
								<THEN>
									<IF COND="IsSessionVariable.csblobid!=true">
									<THEN>
										<SETSSVAR NAME="csblobid" VALUE="CS.UniqueID"/>
									</THEN>
									</IF>
									<SATELLITE.BLOB ASSEMBLER="query" BLOBTABLE="AssetType" BLOBCOL="urldescriptor" BLOBHEADER="text/xml" BLOBKEY="id" BLOBWHERE="Variables.at:id" CSBLOBID="SessionVariables.csblobid" OUTSTRING="urlblobserver"/>
									<A HREF="Variables.urlblobserver" REPLACEALL="Variables.urlblobserver">
										<IMG src="Variables.cs_imagedir/graphics/common/icon/doubleArrow.gif" WIDTH="15" HEIGHT="12" BORDER="0" REPLACEALL="Variables.cs_imagedir"/>
										<XLAT.STREAM KEY="dvin/UI/Admin/ViewDescriptorFile"/>
									</A>									
								</THEN>
								</IF>
							</td>
							<td><BR /></td>
						</tr>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
						<tr>
							<td class="form-label-text">
								<XLAT.STREAM KEY="dvin/AT/Common/ID"/>:
							</td>
							<td class="form-inset">
								<STRING.STREAM VARIABLE="at:id"/>
							</td>
							<td><BR /></td>
						</tr>
						<IF COND="Variables.IsAssetMakerAsset=true">
						<THEN>
							<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
							<tr>
								<td class="form-label-text"><XLAT.STREAM KEY="dvin/Assetmaker/deletedirective"/></td>
								<td>
									<input type="radio" name="deleteRelated" value="true" checked="true"/><XLAT.STREAM KEY="dvin/Assetmaker/Completedelete"/><br/>
									<input type="radio" name="deleteRelated" value="false"/><XLAT.STREAM KEY="dvin/Assetmaker/deleteassettypeonly"/>
								</td>
							</tr>
						</THEN>
						</IF>
						<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_XLAT_" ESCAPE="true"/>
						<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="AssetTypeFrontURL">
							<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
							<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
							<satellite.argument name="action" value="details"/>
							<satellite.argument name="assettype" value="Variables.assettype"/>
						</SATELLITE.LINK>
						
						<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
						<TR>
							<TD class="form-label-text"></TD><TD class="form-inset">
							<A HREF="Variables.AssetTypeFrontURL" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_,Variables.AssetTypeFrontURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
							<IF COND="Variables.allowdelete=true">
							<THEN>
								<XLAT.LOOKUP KEY="dvin/UI/DeletethisAssetType" VARNAME="_XLAT_" ESCAPE="true"/>
								<A HREF="javascript:void(0);" onclick="document.forms['AppForm'].submit(); return false;" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/DeleteAssetType"/></CALLELEMENT></A>
							</THEN>
							</IF>
							</TD>
						</TR>
					</table>
				</td></tr>
		</table>
		
		<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/AssetTypePost"/>
		<INPUT TYPE="HIDDEN" NAME="action" VALUE="delete"/>
		<INPUT TYPE="HIDDEN" NAME="assettype" VALUE="Variables.assettype" REPLACEALL="Variables.assettype"/>
		
	</THEN>
	</IF>

</FTCS>
