<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateC/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Admin/Search/List.xml $ 
$Revision: 21 $ 
$Modtime: 2/27/04 2:46p $ 
-->

<!--
- Confidential and Proprietary Information of Open Market Inc.
-					All Rights Reserved.
-
- Admin/Search/List.xml
-
- DESCRIPTION
-	Search status listing command.  Display a content
-	category's status and commands available.
-
- HISTORY 
-->

<!-- Load the search engine specific strings -->

<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/Search/Status" outstring="urlsearchstatus">
    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
</SATELLITE.LINK>
<STRING.ENCODE VARIABLE="cs_environment" VARNAME="cs_environment"/>
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>
<STRING.ENCODE VARIABLE="cs_formmode" VARNAME="cs_formmode"/>
<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Search/seDescription"/>
<IF COND="IsVariable.AssetType!=true">
<THEN>
	<!-- Attempt to get a list of all asset types -->
	<IF COND="IsVariable.orderby!=true">
	<THEN>
		<SETVAR NAME="orderby" VALUE="assettype"/>
	</THEN>
	</IF>
	<ASSETTYPE.LIST LIST="AllAssetTypes" ORDER="Variables.orderby"/>
	<IF COND="IsError.Variables.errno=true">
	<THEN>
		<IF COND="Variables.errno!=-101">
		<THEN>
			<LOGMSG STR="Xcelerate error Variables.errno on attempt to load asset types"/>
		</THEN>
		</IF>
	</THEN>
	</IF>					

	<if COND="IsList.AllAssetTypes=true">
	<then>
		<table BORDER="0" CELLSPACING="0" CELLPADDING="0" style="margin-left : 2px;margin-right : 10px">
				<tr>
					<td></td><td class="tile-dark" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
				</tr>
				<tr>
					<td class="tile-dark" VALIGN="top" WIDTH="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
					<td >
						<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff"><tr><td colspan="8" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
							<tr><td class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
					            <td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><A HREF="Variables.urlsearchstatus" REPLACEALL="Variables.urlsearchstatus"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/UI/AssetType"/></DIV></A></td>
					            <td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
                                                <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/Search/Status" outstring="urlsearchstatusorderby">
                                                    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                                    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="orderby" value="description"/>
                                                          </SATELLITE.LINK>
                                                <A HREF="Variables.urlsearchstatusorderby" REPLACEALL="Variables.urlsearchstatusorderby"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/AT/Common/Description"/></DIV></A></td>
					            <td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/UI/Admin/SEStatus"/></DIV></td>
								<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
							</tr>
							<tr><td colspan="8" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
							<!-- Loop over all search results. -->
					   			<setvar NAME="rowStyle" VALUE="tile-row-normal"/>
								<SETVAR NAME="separatorLine" VALUE="0"/>

								<LOOP LIST="AllAssetTypes">
								
									<IF COND="Variables.separatorLine=1">
									<THEN>
										<tr>
											<!--<td colspan="8" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
										</tr>
									</THEN>
									</IF>
									<SETVAR NAME="separatorLine" VALUE="1"/>
									<tr class="Variables.rowStyle"  REPLACEALL="Variables.rowStyle"><td><BR /></td>
					                <td><BR /></td><td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
					                    <DIV class="small-text-inset">
											<!--construct encoded url -->
											<ics.encode base="ContentServer" session="true" output="SearchURL">
												<ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/Search/List"/>
												<ics.argument name="AssetType" value="AllAssetTypes.assettype"/>
											</ics.encode>
											<A HREF="Variables.SearchURL" REPLACEALL="Variables.SearchURL"><STRING.STREAM VALUE="AllAssetTypes.assettype"/></A>
										</DIV>
									</td>
									<td><BR /></td><td VALIGN="TOP" ALIGN="LEFT">
					                    <DIV class="small-text-inset">
											<STRING.STREAM VALUE="AllAssetTypes.description"/><BR />
					                    </DIV>
					                 </td>
					                 <td><BR /></td>
					                 <td ALIGN="CENTER">
					                 <DIV class="small-text-inset">
					                 <XLAT.LOOKUP KEY="dvin/UI/Admin/seDescriptionsearchingisenabled" VARNAME="_isEnabled_"/>
					               		<IF COND="AllAssetTypes.usesearchindex=1">
										<THEN>
											<IMG src="Variables.cs_imagedir/graphics/common/icon/check.gif" ALT="Variables._isEnabled_" REPLACEALL="Variables.cs_imagedir,Variables._isEnabled_"/>
										</THEN>
										<ELSE>
											-<BR/>
										</ELSE>
										</IF>
				                 	</DIV>
			                 	</td>
			                   	<td><BR /></td>
			                 	</tr>
								<IF COND="Variables.rowStyle=tile-row-normal">
					            <THEN><SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
					            </THEN>
					            <ELSE><SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
					            </ELSE>
					            </IF>
							</LOOP>
							</table>
						</td>
						<td class="tile-dark" VALIGN="top" WIDTH="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>
					<tr>
					<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
					</tr>
					<tr>
					<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
					</tr>
					</table> 

	</then>
	</if>


</THEN>
</IF>
<IF COND="IsVariable.AssetType=true">
<THEN>
<!-- Load the asset type -->

<ASSETTYPE.LOAD NAME="type" TYPE="Variables.AssetType"/>
<ASSETTYPE.SCATTER NAME="type" PREFIX="AssetTypeObj"/>
<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/AssetTypeFront" outstring="urlasttypefront">
    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="details"/>
                                                         <satellite.argument name="assettype" value="Variables.AssetType"/>
                                                          </SATELLITE.LINK>
<DIV class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/ManageSearchEngineStatusforAT"/>: <A HREF="Variables.urlasttypefront" REPLACEALL="Variables.urlasttypefront"><IMG src="Variables.cs_imagedir/graphics/common/icon/doubleArrow.gif" WIDTH="15" HEIGHT="12" BORDER="0" REPLACEALL="Variables.cs_imagedir"/><STRING.STREAM VALUE="Variables.AssetTypeObj:description"/></A></DIV>

<!--
    Display the status of each content category's search status
-->
    <table BORDER="0" CELLSPACING="0" CELLPADDING="0">
	<tr>
		<td></td><td class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
	</tr>
	<tr>
		<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
		<td>
		<table cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff"><tr><td colspan="3" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
			<tr><td HEIGHT="16" class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
	            <td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;<BR /></td>
				<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
			</tr>
			<tr><td colspan="3" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
			<tr>
				<td class="form-label-inset">
					<XLAT.STREAM KEY="dvin/UI/AssetType"/>:
				</td>
				<td class="form-inset" WIDTH="200">
						<STRING.STREAM VALUE="Variables.AssetTypeObj:description"/>
				</td><td></td>
			</tr>
			<tr>
				<!--<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
			</tr>
				<tr>
				<td class="form-label-inset">
					<XLAT.STREAM KEY="dvin/AT/Common/Status"/>:
				</td>
				<td class="form-inset">
						<IF COND="Variables.AssetTypeObj:usesearchindex!=1">
						<THEN>
							<XLAT.STREAM KEY="dvin/UI/Admin/SQLqueriesSearchesinsidetextcontentslower" ENCODE="false"/>
						</THEN>
						<ELSE>
							<XLAT.STREAM KEY="dvin/UI/Admin/seDescriptionsearchingisenabled"/>
						</ELSE>
						</IF>
				</td><td><BR /></td>
			</tr>
<IF COND="Variables.AssetTypeObj:usesearchindex=1">
<THEN>
			<tr>
				<!--<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
			</tr>
				<tr>
				<td class="form-label-inset">
					<XLAT.STREAM KEY="dvin/UI/Admin/Index"/>:
				</td>
				<td class="form-inset">
						<STRING.STREAM VALUE="Variables.AssetTypeObj:indexfile"/>
				</td><td><BR /></td>
			</tr>
    
</THEN>
</IF>
		</table>

	</td>
	<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
	</tr>
	<tr>
		<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
	</tr>
	<tr>
		<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
	</tr>
</table>

<IF COND="Variables.AssetTypeObj:usesearchindex!=1">
<THEN>
	<ics.encode base="ContentServer" session="true" output="SearchURL">
		<ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/Search/Enable"/>
		<ics.argument name="AssetType" value="Variables.AssetType"/>
	</ics.encode>
	<XLAT.LOOKUP KEY="dvin/UI/Admin/EnableSearchEngine" VARNAME="_XLAT_" ESCAPE="true"/>
	<XLAT.LOOKUP KEY="dvin/UI/Admin/EnableSearchEngine" VARNAME="_alt_"/>
	<A HREF="Variables.SearchURL" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_,Variables.SearchURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/EnableSearchEngine"/></CALLELEMENT></A>
</THEN>
<ELSE>
	<table><tr><td>
	<ics.encode base="ContentServer" session="true" output="SearchURL">
		<ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/Search/Resync"/>
		<ics.argument name="AssetType" value="Variables.AssetType"/>
	</ics.encode>
	<XLAT.LOOKUP KEY="dvin/UI/Admin/Rebuildsearchindexfromscratch" VARNAME="_status_" ESCAPE="true"/>
	<XLAT.LOOKUP KEY="dvin/UI/Admin/RebuildIndex" VARNAME="_alt_"/>
	<A HREF="Variables.SearchURL" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.SearchURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/RebuildIndex"/></CALLELEMENT></A>
	</td><td>
	<ics.encode base="ContentServer" session="true" output="SearchURL">
		<ics.argument name="pagename" value="OpenMarket/Xcelerate/Admin/Search/Disable"/>
		<ics.argument name="AssetType" value="Variables.AssetType"/>
	</ics.encode>
	<XLAT.LOOKUP KEY="dvin/UI/Admin/DisablesearchengineUseSQLsearchingonly" VARNAME="_status_" ESCAPE="true"/>
	<XLAT.LOOKUP KEY="dvin/UI/Admin/DisableSearchEngine" VARNAME="_alt_"/>
	<A HREF="Variables.SearchURL" TITLE="title" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.SearchURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/DisableSearchEngine"/></CALLELEMENT></A>
	</td></tr></table>
  </ELSE>
</IF>
<DIV><A HREF="Variables.urlsearchstatus" REPLACEALL="Variables.urlsearchstatus"><IMG src="Variables.cs_imagedir/graphics/common/icon/doubleArrow.gif" WIDTH="15" HEIGHT="12" BORDER="0" REPLACEALL="Variables.cs_imagedir"/><XLAT.STREAM KEY="dvin/UI/Admin/Showsearchstatusforall"/></A>
</DIV>


</THEN>
</IF>
</FTCS>
