<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Xcelerate/Admin/WorkflowNew
-
- INPUT
-
- OUTPUT
-
-->
<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
	<tr><td>
<if COND="Variables.Copy=yes">
<then>
	<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/CopyWorkflowProcess"/>:&nbsp;</span>
</then>
<else>
	<if COND="IsVariable.wfp:id=false">
	<then>
		<span class="title-text"><XLAT.STREAM KEY="dvin/Common/WorkflowProcess"/>: (<XLAT.STREAM KEY="dvin/Common/lcnew"/>)&nbsp;</span>
	</then>
	<else>
		<span class="title-text"><XLAT.STREAM KEY="dvin/Common/WorkflowProcess"/>:&nbsp;</span>
	</else>
	</if>
</else>
</if>

<if COND="Variables.action=update">
<then>
	<!-- Load the start step for this process -->
	<WORKFLOWPROCESS.GETINITIALSTEPID NAME="newprocess" VARNAME="startstp"/>
	<WORKFLOWPROCESS.GETSTEP NAME="newprocess" VALUE="Variables.startstp" OBJVARNAME="strtstpobj"/>
	<!-- title -->
	<span class="title-value-text"><STRING.STREAM VALUE="Variables.wfp:name"/></span>
</then>
</if>
	</td></tr>
	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
</table>
<!-- Table Header -->
<table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-50"> 
	<tr><td>
	<if COND="Variables.Copy=yes">
	<then>
				<table width="100%" cellpadding="0" cellspacing="0" border="0">
				<!-- Inspect images -->
				<!-- 
				<tr>
					<td class="form-label-text" VALIGN="TOP" colspan="3"> 
						<callelement NAME="OpenMarket/Xcelerate/Admin/WorkflowProcessBar"/>
					</td>
				</tr>
				 --> 
				<!--<tr>
					<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
				</tr>-->

				<!-- Item -->
				<if COND="Variables.action=update">
				<then>
					<setvar NAME="rowStyle"/>
				</then>
				<else>
					<setvar NAME="rowStyle"/>
				</else>
				</if>
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<tr>
					<td class="form-label-text" VALIGN="TOP">
						<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/UI/Admin/ProcessName"/>:
					</td> 
					<td><br/></td>
					<td class="form-inset">
						<if COND="IsVariable.wfp:name=true">
						<then>
							<setvar NAME="tmp" VALUE="Variables.wfp:name"/>
						</then>
						<else>
							<setvar NAME="tmp" VALUE="Variables.empty"/>
						</else>
						</if>
						<INPUT TYPE="HIDDEN" NAME="oldname" VALUE="Variables.tmp" REPLACEALL="Variables.tmp"/>
						<INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="64" NAME="pName"/>
					</td>
				</tr> 
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<tr>
					<td class="form-label-text" VALIGN="TOP">
						<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/Common/Description"/>:
					</td> 
					<td><br/></td>
					<td class="form-inset">
						<if COND="IsVariable.wfp:description=true">
						<then>
							<STRING.ENCODE VARIABLE="wfp:description" VARNAME="tmp"/>
						</then>
						<else>
							<setvar NAME="tmp" VALUE="Variables.empty"/>
						</else>
						</if>
						<INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="64" NAME="description"/>
						<INPUT TYPE="HIDDEN" NAME="olddescription" VALUE="Variables.tmp" REPLACEALL="Variables.tmp"/>
					</td>
				</tr> 
				<!-- Table Footer -->
				
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
				<tr>
				<td><BR/></td><td><BR/></td><td nowrap="nowrap">
				<callelement NAME="OpenMarket/Xcelerate/Admin/WorkflowButtons"/>
				</td>
				</tr>

				
				</table>
	</then>
	<else>
				<table width="100%" cellpadding="0" cellspacing="0" border="0">
				<!-- Item Name -->
				<if COND="Variables.action=update">
				<then>
					<setvar NAME="rowStyle"/>
				</then>
				<else>
					<setvar NAME="rowStyle"/>
				</else>
				</if>
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<tr>
					<td class="form-label-text" VALIGN="TOP">
						<if COND="Variables.action=new">
						<then>
							<span class="alert-color">*</span>
						</then>
						</if>
						<XLAT.STREAM KEY="dvin/UI/Admin/ProcessName"/>:
					</td> 
					<td><br/></td>
					<td class="form-inset">
						<if COND="IsVariable.wfp:name=true">
						<then>
							<setvar NAME="tmp" VALUE="Variables.wfp:name"/>
						</then>
						<else>
							<setvar NAME="tmp" VALUE="Variables.empty"/>
						</else>
						</if>
						<INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="64" NAME="pName" VALUE="Variables.tmp" REPLACEALL="Variables.tmp"/>
					</td>
				</tr> 
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<!-- Item Description-->

				<tr>
					<td class="form-label-text" VALIGN="TOP">
						<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/Common/Description"/>: 
					</td> 
					<td><br/></td>
					<td class="form-inset">
						<if COND="IsVariable.wfp:description=true">
						<then>
							<STRING.ENCODE VARIABLE="wfp:description" VARNAME="tmp"/>
						</then>
						<else>
							<setvar NAME="tmp" VALUE="Variables.empty"/>
						</else>
						</if>
						<INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="64" NAME="description" VALUE="Variables.tmp" REPLACEALL="Variables.tmp"/>
					</td>
				</tr> 
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<!-- Item Site-->
				<tr>
					<td class="form-label-text" VALIGN="TOP">
						<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/Common/Site"/>:
					</td> 
					<td><br/></td>
					<td class="form-inset">
						<!-- Get the list of publications -->
						<PUBLICATION.LIST LIST="ThePub"/>
						<STRINGLIST NAME="sites" STR="Variables.wfp:sitessites" DELIM=";"/>
						<SELECT NAME="pubid" MULTIPLE="yes" SIZE="4">
							<if COND="Variables.wfp:sitessites=_ALL_">
								<then>
									<OPTION VALUE="_ALL_" SELECTED="yes"/><XLAT.STREAM KEY="dvin/Common/Any"/>
								</then>
								<else>
									<OPTION VALUE="_ALL_"/><XLAT.STREAM KEY="dvin/Common/Any"/>
								</else>
								</if>
							<LOOP LIST="ThePub">
								<setvar NAME="errno" VALUE="0"/>
								<isinlist LIST="sites" ITEM="ThePub.id"/>
								<if COND="Variables.errno=1">
								<then>
									<OPTION VALUE="ThePub.id" REPLACEALL="ThePub.id" SELECTED="yes"/><STRING.STREAM VALUE="ThePub.name"/>
								</then>
								<else>
									<setvar NAME="errno" VALUE="0"/>
										<OPTION VALUE="ThePub.id" REPLACEALL="ThePub.id"/><STRING.STREAM VALUE="ThePub.name"/>
								</else>
								</if>
							</LOOP>
						</SELECT>
					</td>
				</tr> 
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<!-- Item Asset Type-->
				<tr>
					<td class="form-label-text" VALIGN="TOP">
						<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/UI/AssetType"/>:
					</td>
					<td><br/></td> 
					<td class="form-inset">
						<!-- Get a list of asset types -->
						<ASSETTYPE.LIST LIST="TheAssetType" ORDER="assettype"/>
						<STRINGLIST NAME="assettypes" STR="Variables.wfp:typestypes" DELIM=";"/>

						<SELECT NAME="assettype" MULTIPLE="yes" SIZE="5">
							<if COND="Variables.wfp:typestypes=_ALL_">
							<then>
								<OPTION VALUE="_ALL_" SELECTED="yes"/><XLAT.STREAM KEY="dvin/Common/Any"/>
							</then>
							<else>
								<OPTION VALUE="_ALL_"/><XLAT.STREAM KEY="dvin/Common/Any"/>
							</else>
							</if>

							<LOOP LIST="TheAssetType">
								<setvar NAME="errno" VALUE="0"/>
								<isinlist LIST="assettypes" ITEM="TheAssetType.assettype"/>
								<if COND="Variables.errno=1">
								<then>
									<OPTION VALUE="TheAssetType.assettype" REPLACEALL="TheAssetType.assettype" SELECTED="yes"/><STRING.STREAM VALUE="TheAssetType.description"/>
								</then>
								<else>
									<OPTION VALUE="TheAssetType.assettype" REPLACEALL="TheAssetType.assettype"/><STRING.STREAM VALUE="TheAssetType.description"/>
								</else>
								</if>				
							</LOOP>
						</SELECT>
					</td>
				</tr> 
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>

				<ROLEMANAGER.GETROLENAMES LISTVARNAME="ACLList"/>

				<!-- Item Roles-->
				<tr>
					<td class="form-label-text" VALIGN="TOP">
						<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/Common/Roles"/>:
					</td> 
					<td><br/></td>
					<td class="form-inset">
						<!-- Get a list of roles (ACLs) -->
						<STRINGLIST NAME="roles" STR="Variables.wfp:rolesroles" DELIM=","/>
						<SELECT NAME="roles" MULTIPLE="yes" SIZE="5">
							<!-- Any doe not make a sense hare -->
							<LOOP LIST="ACLList">
								<setvar NAME="errno" VALUE="0"/>
								<isinlist LIST="roles" ITEM="ACLList.aclname"/>
								<if COND="Variables.errno=1">
								<then>
									<OPTION VALUE="ACLList.aclname" REPLACEALL="ACLList.aclname" SELECTED="yes"/><STRING.STREAM VALUE="ACLList.aclname"/>
								</then>
								<else>
									<OPTION VALUE="ACLList.aclname" REPLACEALL="ACLList.aclname"/><STRING.STREAM VALUE="ACLList.aclname"/>				
								</else>
								</if>
							</LOOP>
						</SELECT>
					</td>
				</tr> 
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<!-- Item StartStep-->
				<tr>
					<td class="form-label-text" VALIGN="TOP">
						<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/UI/Admin/StartStep"/>:
					</td> 
					<td><br/></td>
					<td class="form-inset" VALIGN="TOP">
						<setvar NAME="IsStartStep" VALUE="no"/>
						<setcounter NAME="STEPS" VALUE="0"/> 

						<if COND="IsVariable.wfp:stepsTotal=true">
						<then>
							<if COND="Variables.wfp:stepsTotal!=0">
							<then>
								<loop FROM="0" COUNT="Variables.wfp:stepsTotal">
									<setvar NAME="NSTEPS" VALUE="Counters.STEPS"/>
									<setvar NAME="stpid" VALUE="Variables.wfp:stepsVariables.NSTEPSid"/>
									<setvar NAME="temp" VALUE="Variables.wfp:stepsVariables.NSTEPSname"/>
									<removevar NAME="tmp"/>
									<setvar NAME="tmp" VALUE="Variables.wfp:stepsVariables.NSTEPSstartstate"/>
							
									<if COND="Variables.tmp=Variables.empty">
									<then>
										<setvar NAME="tmp" VALUE="Variables.null"/>
									</then>
									</if>
							
									<setvar NAME="errno" VALUE="0"/>
									<begins STR="Variables.tmp" WHAT="Variables"/>
									<if COND="Variables.errno=1">
									<then>
										<setvar NAME="tmp" VALUE="Variables.null"/>
										<STRING.STREAM VALUE="Variables.wfp:stepsVariables.NSTEPSname"/><br/>
									</then>
									</if>
									<inccounter NAME="STEPS" VALUE="1"/>
								</loop>
							</then>
							<else>
								<XLAT.STREAM KEY="dvin/UI/Admin/Noprocessstepsarecurrentlydefined"/><br/>
								<XLAT.LOOKUP KEY="dvin/UI/AddNewStep" VARNAME="_XLAT_" ESCAPE="true"/>

								<A HREF="javascript: AddStep(document.forms[0]);" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNewStep"/></CALLELEMENT></A>
								<input type="hidden" name="startstep" value=""/>
							</else>
							</if>
						</then>
						<else>
							<XLAT.STREAM KEY="dvin/UI/Admin/Noprocessstepsarecurrentlydefined"/><br/>
							<XLAT.LOOKUP KEY="dvin/UI/AddNewStep" VARNAME="_XLAT_" ESCAPE="true"/>

							<A HREF="javascript: AddStep(document.forms[0]);" onClick="return CheckOtherFields(document.forms[0]);" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNewStep"/></CALLELEMENT></A>

							<input type="hidden" name="startstep" value=""/>
						</else>
						</if>
					    
						<INPUT TYPE="HIDDEN" NAME="NUMSTEPS" VALUE="Counters.STEPS" REPLACEALL="Counters.STEPS"/>  					
					</td>
				</tr> 
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<!-- Item Admin Roles-->
				<tr>
					<td class="form-label-text" VALIGN="TOP">
						<XLAT.STREAM KEY="dvin/UI/Admin/AdministrationRoles"/>:
					</td> 
					<td><br/></td>
					<td class="form-inset">
						<!-- Get a list of roles (ACLs) -->
						<ROLEMANAGER.GETROLENAMES LISTVARNAME="ACLList"/>
						<STRINGLIST NAME="adminsroles" STR="Variables.wfp:adminsroles" DELIM=","/>
						<SELECT NAME="adminsroles" MULTIPLE="yes" SIZE="5">
							<if COND="Variables.wfp:adminsroles=_ALL_">
							<then>
								<OPTION VALUE="_ALL_" SELECTED="yes"/><XLAT.STREAM KEY="dvin/Common/Any"/>
							</then>
							<else>
								<OPTION VALUE="_ALL_"/><XLAT.STREAM KEY="dvin/Common/Any"/>
							</else>
							</if>
							<LOOP LIST="ACLList">
								<setvar NAME="errno" VALUE="0"/>
								<isinlist LIST="adminsroles" ITEM="ACLList.aclname"/>
								<if COND="Variables.errno=1">
								<then>
									<OPTION VALUE="ACLList.aclname" REPLACEALL="ACLList.aclname" SELECTED="yes"/><STRING.STREAM VALUE="ACLList.aclname"/>
								</then>
								<else>
									<OPTION VALUE="ACLList.aclname" REPLACEALL="ACLList.aclname"/><STRING.STREAM VALUE="ACLList.aclname"/>				
								</else>
								</if>
							</LOOP>
						</SELECT>
					</td>
				</tr> 
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<!-- Item Process Deadline-->
				<tr>
					<td class="form-label-text" VALIGN="TOP">
						<XLAT.STREAM KEY="dvin/UI/Admin/CanSetProcessDeadline"/>:
					</td> 
					<td><br/></td>
					<td class="form-inset">
						<if COND="Variables.wfp:deadlinetype=ask">
						<then>
							<INPUT TYPE="radio" NAME="deadlinetype" VALUE="ask" CHECKED="yes"/> <XLAT.STREAM KEY="dvin/Common/allowed"/><br />
							<INPUT TYPE="radio" NAME="deadlinetype" VALUE="none"/> <XLAT.STREAM KEY="dvin/Common/notallowed"/>
						</then>
						<else>
							<INPUT TYPE="radio" NAME="deadlinetype" VALUE="ask"/> <XLAT.STREAM KEY="dvin/Common/allowed"/><br />
							<INPUT TYPE="radio" NAME="deadlinetype" VALUE="none" CHECKED="yes"/> <XLAT.STREAM KEY="dvin/Common/notallowed"/>
						</else>
						</if>
					</td>
				</tr> 
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<!-- Item Delegate Actions-->
				<tr>
					<td class="form-label-text" VALIGN="TOP">
						<XLAT.STREAM KEY="dvin/UI/Admin/DelegateActions"/>: 
					</td> 
					<td><br/></td>
					<td class="form-inset">
						<WORKFLOWENGINE.GETAVAILABLEDELEGATEACTIONS PREFIX="wfdlg:"/>
						<if COND="Variables.wfdlg:Total!=0">
						<then>
							<SETVAR NAME="selectedActions" VALUE="Variables.empty"/>
							<if COND="IsVariable.wfp:actionsactionTotal=true">
							<then>
								<if COND="Variables.wfp:actionsactionTotal!=0">
								<then>  
									<setCounter Name="actCount" Value="0"/>
									<Loop From="0" Count="Variables.wfp:actionsactionTotal">
										<SETVAR NAME="selectedActions" VALUE="Variables.selectedActions;Variables.wfp:actionsactionCounters.actCount"/>
										<inccounter NAME="actCount" VALUE="1"/>
									</Loop>
								</then>
								</if>
							</then>
							</if>

							<STRINGLIST NAME="selectedActionList" STR="Variables.selectedActions" DELIM=";"/>

							<SELECT NAME="dlgactions" SIZE="3" MULTIPLE="yes">
								<setcounter NAME="DLGCOUNT" VALUE="0"/>
								<loop FROM="0" COUNT="Variables.wfdlg:Total">
									<WORKFLOWACTION.GETID NAME="wfdlg:Counters.DLGCOUNT" VARNAME="dlgid"/>
									<WORKFLOWACTION.GETNAME NAME="wfdlg:Counters.DLGCOUNT" VARNAME="dlgname"/>
									<setvar name="errno" value="0"/>
									<isinlist LIST="selectedActionList" ITEM="Variables.dlgid"/>
									<if COND="Variables.errno=1">
									<then>
										<OPTION VALUE="Variables.dlgid" SELECTED="yes" REPLACEALL="Variables.dlgid"/><STRING.STREAM VALUE="Variables.dlgname"/>
									</then>
									<else>
										<OPTION VALUE="Variables.dlgid" REPLACEALL="Variables.dlgid"/><STRING.STREAM VALUE="Variables.dlgname"/>
									</else>
									</if>
									<inccounter NAME="DLGCOUNT" VALUE="1"/>
								</loop>
							</SELECT>

							<input type="hidden" name="fromProcessMainEditScreen" value="true"/>
						</then>
						<else>
							<XLAT.STREAM KEY="dvin/UI/Admin/Nodelegateactionscurrentlydefined"/>
						</else>
						</if>
					</td>
				</tr> 
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<!-- Item ID -->
				<tr class="Variables.rowStyle" REPLACEALL="Variables.rowStyle">
					<td class="form-label-text" VALIGN="TOP">
						<XLAT.STREAM KEY="dvin/AT/Common/ID"/>:
					</td> 
					<td><br/></td>
					<td class="form-inset">
						<if COND="IsVariable.wfp:id=false">
						<then>
							(<XLAT.STREAM KEY="dvin/Common/lcnew"/>)
						</then>
						<else>
							<STRING.STREAM VALUE="Variables.wfp:id"/>
						</else>
						</if>
					</td> 
				</tr> 
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
				<tr>
				<td><BR/></td><td><BR/></td><td nowrap="nowrap">
				<callelement NAME="OpenMarket/Xcelerate/Admin/WorkflowButtons"/>
				</td>
				</tr>
				

				</table>
	</else>
	</if>
	</td></tr>
</table>

<if COND="IsList.AssetDetails=true">
<then>
	<flush LIST="AssetDetails"/>
</then>
</if>


</FTCS> 


