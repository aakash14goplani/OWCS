<?xml version="1.0" ?>
<!DOCTYPE ftcs SYSTEM "futuretense_cs.dtd">
<ftcs version="1.2">
<!-- OpenMarket/Xcelerate/Admin/Publish/DestEditUI
-
- INPUT
-
- OUTPUT
-
-->
<SCRIPT LANGUAGE="JavaScript">
<![CDATA[
<!--
// checkFactors function is called by OpenMarket/Xcelerate/Admin/Publish/DestEdit when saving|editing a destination
// TODO: add error checking
function checkFactors() {
    // GRM: factors should be assembled into a URL string before submission 
	var obj = document.forms[0];
    var factorElement  = obj.elements['pubtgt:factors'];
	if(factorElement)
	{
			var currentFactors = factorElement.value;
		
			var currentElement = obj.elements['verbose'];
			var currentName    = "VERBOSE";

			if (currentElement.checked)
			    factorElement.value = currentName + "=" + currentElement.value;
			else 
			    factorElement.value = currentName + "=false";
			
			currentElement = obj.elements['remotePassword'];
			currentName    = "REMOTEPASS";

			if (currentElement.value!='')
			    factorElement.value += "&" + currentName + "=" + currentElement.value;

			currentElement = obj.elements['remoteUser'];
			currentName    = "REMOTEUSER";

			if (currentElement.value!='')
			    factorElement.value += "&" + currentName + "=" + currentElement.value;

			currentElement = obj.elements['urlPrefix'];
			currentName    = "URLPREFIX";

			if (currentElement.value!='')
			    factorElement.value += "&" + currentName + "=" + currentElement.value;

		    currentElement = obj.elements['dir'];
			currentName    = "DIR";

			if (currentElement.value!='')
			    factorElement.value += "&" + currentName + "=" + currentElement.value;
				
			currentElement = obj.elements['realTimeDir'];
			currentName    = "REALTIMEDIR";

			if (currentElement.value!='')
			    factorElement.value += "&" + currentName + "=" + currentElement.value;

		    currentElement = obj.elements['suffix'];
			currentName    = "SUFFIX";

			if (currentElement.value!='')
			    factorElement.value += "&" + currentName + "=" + currentElement.value;

		    currentElement = obj.elements['oldTemplate'];
			currentName    = "OLDTEMPLATE";

			if (currentElement.value!='')
			    factorElement.value += "&" + currentName + "=" + currentElement.value;

			currentElement = obj.elements['simpleName'];
			currentName    = "SIMPLENAME";

			if (currentElement.checked)
			    factorElement.value += "&" + currentName + "=" + currentElement.value;
			else 
			    factorElement.value += "&" + currentName + "=false";

			currentElement = obj.elements['simpleDir'];
			currentName    = "SIMPLEDIR";

			if (currentElement.checked)
			    factorElement.value += "&" + currentName + "=" + currentElement.value;
			else 
			    factorElement.value += "&" + currentName + "=false";
				
			currentElement = obj.elements['PubOptions'];
			currentName    = "PUBLISHOPTION";
			
			for (var i=0;i< currentElement.length;i++) {
				if (currentElement[i].checked) {
					factorElement.value += "&" + currentName + "=" + currentElement[i].value;
				}
			}
			
			currentElement = obj.elements['alert'];
			currentName    = "EMAILALERT";

			if (currentElement.checked && document.getElementById("emailList").length > 0){
			    factorElement.value += "&" + currentName + "=" + currentElement.value;
				var emailList=document.getElementById("emailList");
					var emailStr="";
					for (i=0;i<emailList.length;i++){
						if(i==0){
							emailStr+=emailList.options[i].text;
						} else{
							emailStr+=";" + emailList.options[i].text;
						}
					}
					factorElement.value += "&EMAILIDS=" + emailStr;
			} else 
			    factorElement.value += "&" + currentName + "=false";
			
			if (currentFactors != '')    
			    factorElement.value += "&" + currentFactors;
	}
} 
//-->
]]>
</SCRIPT>
<IF COND="Variables.destField=type">
	<THEN>
		<IF COND="Variables.action=details">
			<THEN>		
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Publish/DeliveryType"/>:
				</td>
				<td class="form-inset">
                     <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/Publish/DelivTypeEdit" outstring="urldelvtpedit">
                         <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                         <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                         <satellite.argument name="id" value="Variables.pubtgt:type"/>
                         <satellite.argument name="action" value="details"/>
                     </SATELLITE.LINK>
					<A HREF="Variables.urldelvtpedit" REPLACEALL="Variables.urldelvtpedit"><STRING.STREAM VALUE="Variables.dt:name"/></A><STRING.STREAM VALUE=": Variables.dt:description"/>
					<INPUT TYPE="HIDDEN" NAME="pubtgt:type" VALUE="Variables.pubtgt:type" REPLACEALL="Variables.pubtgt:type"/>
					<IF COND="Variables.dt:dtype=realtime">							
					<THEN>
					<IF COND="Variables.PUBLISHOPTION=Complete">
						<THEN>
							<BR/><span style="position:relative;top:2px"><input type="radio" checked="true"/></span><XLAT.STREAM KEY="dvin/UI/Publish/CompletePublish"/><BR/>
						</THEN>
					</IF>
					<IF COND="Variables.PUBLISHOPTION=Delayed">
						<THEN>
							<BR/><span style="position:relative;top:2px"><input type="radio" checked="true"/></span><XLAT.STREAM KEY="dvin/UI/Publish/DelayedPublish"/><BR/>
						</THEN>
					</IF>
					<IF COND="Variables.PUBLISHOPTION=Export">
						<THEN>
							<BR/><span style="position:relative;top:2px"><input type="radio" checked="true"/></span><XLAT.STREAM KEY="dvin/UI/Publish/ExportToLocalDisk"/><BR/>
						</THEN>
					</IF>
					</THEN>
					</IF>
				</td>
				</tr>
			</THEN>
		</IF>
	</THEN>
<ELSE><IF COND="Variables.destField=factors">
	<THEN>
		<IF COND="Variables.action=details">
			<THEN>		
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<XLAT.STREAM KEY="dvin/Common/Arguments"/>:
				</td>
				<td class="form-inset">
					<string.stream VARIABLE="pubtgt:factors"/>
				</td>
				<td></td>
				</tr>
			</THEN>
		</IF>
	</THEN>
<ELSE></ELSE></IF></ELSE></IF>
</ftcs>