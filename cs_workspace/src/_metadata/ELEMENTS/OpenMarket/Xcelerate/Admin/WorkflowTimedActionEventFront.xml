<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Xcelerate/Admin/WorkflowTimedActionEventFront
-
- INPUT
-
- OUTPUT
-
-->



<!--*****************************  FRONT PAGE *************************-->

<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/SetServerTimeZoneVar" />
<STRING.ENCODE VARIABLE="cs_environment" VARNAME="cs_environment"/>
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>
<STRING.ENCODE VARIABLE="cs_formmode" VARNAME="cs_formmode"/>
<XLAT.LOOKUP KEY='UI/Forms/datesInServerTime' VARNAME="datesInServerTime"/>
<div class="width-outer-70">
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
				<argument NAME="msgtext" VALUE='Variables.datesInServerTime'/>
				<ics:argument NAME="severity" VALUE="info" />
			</callelement>
</div>
<IF COND="Variables.action=view">
<THEN>
	<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
	<tr><td>
		<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/WorkflowTimedActionEvent"/></span>
	</td></tr>
	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
	</table>
	
   	<!-- read SystemEvents table -->
	<ics.readevent LIST="eventlist" NAME="WorkflowTimedActionEvent"/>

	<IF COND="Variables.errno=-203">
	<THEN>
		<SETVAR NAME="new" VALUE="true"/>
	</THEN>
	<ELSE>
		<SETVAR NAME="new" VALUE="false"/>
	</ELSE>
	</IF>
    <table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-30 margin-top-zero">
	<tr><td>
		<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<tr>
				<td class="form-label-text" colspan="3" ALIGN="LEFT">
				<table class="lagecyAbar" border="0" cellpadding="0" cellspacing="0">
				<tr>
					<XLAT.LOOKUP KEY="dvin/Common/Inspect" VARNAME="_XLAT_" ESCAPE="true"/>
					<XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisTimedEvent" VARNAME="alttxt"/>
                    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowTimedActionEventFront" outstring="urlwftimevntfront">
                        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="view"/>
                                                          </SATELLITE.LINK>
					<td><A HREF="Variables.urlwftimevntfront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwftimevntfront,Variables._XLAT_"><img height="14" width="14" hspace="2" src="Variables.cs_imagedir/graphics/common/icon/iconInspectContentUp.gif"  border="0" alt="Variables.alttxt" REPLACEALL="Variables.cs_imagedir,Variables.alttxt"/></A></td>
					<td><A HREF="Variables.urlwftimevntfront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwftimevntfront,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Inspect"/></span></A></td>
					<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
					<XLAT.LOOKUP KEY="dvin/Common/Edit" VARNAME="_XLAT_" ESCAPE="true"/>
					<XLAT.LOOKUP KEY="dvin/UI/Admin/EditThisTimedEvent" VARNAME="alttxt"/>
                    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowTimedActionEventFront" outstring="urlwftimevntfront">
                        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="edit"/>
                                                          </SATELLITE.LINK>
					<td><A HREF="Variables.urlwftimevntfront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwftimevntfront,Variables._XLAT_"><img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconEditContentUp.gif" hspace="2" border="0" alt="Variables.alttxt" REPLACEALL="Variables.cs_imagedir,Variables.alttxt"/></A></td>
					<td><A HREF="Variables.urlwftimevntfront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwftimevntfront,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Edit"/></span></A></td>

					<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
					<XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/>
					<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisTimedEvent" VARNAME="alttxt"/>
					<IF COND="Variables.new!=true">
					<THEN>
                        <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowTimedActionEventFront" outstring="urlwftimevntfront">
                            <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                            <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="confirmdelete"/>
                                                          </SATELLITE.LINK>
						<td><A HREF="Variables.urlwftimevntfront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwftimevntfront,Variables._XLAT_"><img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContentUp.gif" hspace="2" border="0" alt="Variables.alttxt" REPLACEALL="Variables.cs_imagedir,Variables.alttxt"/></A></td>
						<td><A HREF="Variables.urlwftimevntfront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwftimevntfront,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Delete"/></span></A></td>
					</THEN>
					<ELSE>
						<td><img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContentX.gif" hspace="2" border="0" REPLACEALL="Variables.cs_imagedir"/></td>
						<td><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Delete"/></span></td>
					</ELSE>
					</IF>
				</tr>
				</table>
				</td>
			</tr>
			<!--<tr>
				<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			</tr>-->
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Admin/Times"/>:
				</td>
				<td class="form-inset" WIDTH="300">
						<IF COND="Variables.new=true">
						<THEN>
                    	    <XLAT.STREAM KEY="dvin/UI/Admin/Noexistingwftimedactevent"/>
						</THEN>
						<ELSE>
							<STRING.STREAM VALUE="eventlist.time"/>
							<BR/>
							<DIV><CALLELEMENT NAME="OpenMarket/Xcelerate/Admin/Util/DecodeTimedEvent">
								<ARGUMENT NAME="eventtime" VALUE="eventlist.time"/>
							</CALLELEMENT>
							</DIV>
						</ELSE>
						</IF>
				</td><td></td>
			</tr>
			<!--<tr>
				<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			</tr>-->
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Admin/Enabled"/>:
				</td>
				<td class="form-inset">
						<if COND="eventlist.enabled=true">
						<then>
							<XLAT.STREAM KEY="dvin/Common/lcyes"/>
						</then>
						<else>
							<span class="alert-color"><XLAT.STREAM KEY="dvin/Common/lcno"/></span>
						</else>
						</if>
				</td><td><BR /></td>
			</tr>
		</table>
	</td></tr>
</table>
<div class="width-outer-70">
</div>
</THEN>
</IF>
<IF COND="Variables.action=edit">
<THEN>
<SCRIPT LANGUAGE="JavaScript">
<![CDATA[
function Save()
{
    var obj = document.forms[0].elements[0];
    if (!preSave())
        return false;
	obj.form.elements['pagename'].value = "OpenMarket/Xcelerate/Admin/WorkflowTimedActionEventPost";
	obj.form.elements['action'].value = "save";
}

]]>
</SCRIPT>
	
	<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
	<tr><td>
		<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/EditWorkflowTimedActionEvent"/></span>
	</td></tr>
	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
	</table>

	<div class="width-outer-70">
	<div class="sectionhead">
		<span class="sectionname"><XLAT.STREAM KEY="dvin/UI/Admin/EnabledDatesandTimes"/></span>
	</div>
	<div class="sectionbody">
		<div class="sectionbox" id="eventenabled">
			<div class="content" style="padding-top: 6px; padding-bottom: 6px;">
			<!--this table will be filled in by javascript in EventForm-->
			<table id="eventdetail" class="eventdetail" cellspacing="0" cellpadding="0">
				<tr>
					<td class="label">
						<XLAT.STREAM KEY="dvin/UI/Util/Hours"/>:
					</td><td id="hrstr">
					</td>
				</tr>
				<tr>
					<td class="label">
						<XLAT.STREAM KEY="dvin/UI/Util/Minutes"/>:
					</td><td id="minstr">
					</td>
				</tr>
				<tr>
					<td class="label">
						<XLAT.STREAM KEY="dvin/Common/Dates"/>:
					</td><td id="domstr">
					</td>
				</tr>
				<tr>
					<td class="label">
						<XLAT.STREAM KEY="dvin/Common/Days"/>:
					</td><td id="dowstr">
					</td>
				</tr>
				<tr>
					<td class="label">
						<XLAT.STREAM KEY="dvin/UI/Util/Months"/>:
					</td><td id="moystr">
					</td>
				</tr>
			</table>
		</div>
			<div class="feedback" style="text-align: center; padding-top: 4em;">
			 <span style="padding: 4px 0 2px;">
				<!-- read SystemEvents table -->
				<ics.readevent LIST="eventlist" NAME="WorkflowTimedActionEvent"/>
                <if COND="eventlist.enabled=true">
				<then>
					<label><input type="radio" name="enabled" value="yes" checked="checked"/><XLAT.STREAM KEY="dvin/UI/Admin/Enabled"/></label>&nbsp;&nbsp;
					<label><input type="radio" name="enabled" value="no"/><XLAT.STREAM KEY="dvin/UI/Admin/Disabled"/></label>
				</then>
				<else>
					<label><input type="radio" name="enabled" value="yes"/><XLAT.STREAM KEY="dvin/UI/Admin/Enabled"/></label>&nbsp;&nbsp;
					<label><input type="radio" name="enabled" value="no" checked="checked"/><XLAT.STREAM KEY="dvin/UI/Admin/Disabled"/></label>
				</else>
				</if>
			 &nbsp;</span>
			</div>
			<br clear="all" />
			</div>
		<div class="sectionshadow"></div>
	</div>
	<br clear="all"/>
	<IF COND="IsError.Variables.errno=true">
	<THEN>
    	<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Util/EventFront"/>
	</THEN>
	<ELSE>
		<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Util/EventFront">
			<ARGUMENT NAME="eventtime" VALUE="eventlist.time"/>
		</CALLELEMENT>
	</ELSE>
	</IF>
<p/>
<INPUT TYPE="hidden" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/WorkflowTimedActionEventPost"/>
<INPUT TYPE="hidden" NAME="action" VALUE="save"/>
<XLAT.LOOKUP KEY="dvin/UI/Save" VARNAME="_XLAT_" ESCAPE="true"/>
<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_status_" ESCAPE="true"/>
<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowTimedActionEventFront" outstring="TimedEventURL">
    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="view"/>
                                                          </SATELLITE.LINK>
<A HREF="Variables.TimedEventURL" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.TimedEventURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
<A HREF="javascript:void(0);" onClick="if(Save()!=false){document.forms['AppForm'].submit();return false;}" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Save"/></CALLELEMENT></A>

</div>
</THEN>
</IF>


<IF COND="Variables.action=confirmdelete">
<THEN>
<!-- read SystemEvents table -->
	<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
		<tr><td>
			<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/DeleteWorkflowTimedActionEvent"/></span>
		</td></tr>
		<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
	</table>

	<ics.readevent LIST="eventlist" NAME="WorkflowTimedActionEvent"/>

	<if COND="Variables.errno=-203">
	<then>
	    <div class="width-outer-70">
			<XLAT.LOOKUP KEY="dvin/UI/Admin/Noexistingwftimedactevent" VARNAME="msgtext"/>
			<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
				<ARGUMENT NAME="msgtext" VALUE="Variables.msgtext"/>
				<ARGUMENT NAME="severity" VALUE="error"/>
			</CALLELEMENT>
		</div>
	</then>
	<else>
	<div class="width-outer-70">
		<XLAT.LOOKUP KEY="dvin/UI/Admin/ConfirmDestroyWorkflowTimedActionEvent" VARNAME="msgtext"/>
		<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
			<ARGUMENT NAME="msgtext" VALUE="Variables.msgtext"/>
			<ARGUMENT NAME="severity" VALUE="warning"/>
		</CALLELEMENT>
	</div>
	
    <table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-30">
	<tr><td>
		<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Admin/Times"/>:
				</td>
				<td class="form-inset" WIDTH="200">
						<STRING.STREAM VALUE="eventlist.time"/>	<BR/>
						<CALLELEMENT NAME="OpenMarket/Xcelerate/Admin/Util/DecodeTimedEvent">
							<ARGUMENT NAME="eventtime" VALUE="eventlist.time"/>
						</CALLELEMENT>
						<input TYPE="hidden" NAME="time" VALUE="eventlist.time" REPLACEALL="eventlist.time"/>
				</td><td></td>
			</tr>
			<!--<tr>
				<td colspan="3" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			</tr>-->
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
				<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Admin/Enabled"/>:
				</td>
				<td class="form-inset">
					<if COND="eventlist.enabled=true">
					<then>
						<XLAT.STREAM KEY="dvin/Common/lcyes"/>
					</then>
					<else>
						<span class="alert-color"><XLAT.STREAM KEY="dvin/Common/lcno"/></span>
					</else>
					</if>
				</td><td><BR /></td>
			</tr>
		</table>
	</td></tr>
</table>

<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/WorkflowTimedActionEventPost"/>
<INPUT TYPE="HIDDEN" NAME="action" VALUE="destroy"/>
<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteWorkflowTimedActionEvent" VARNAME="_XLAT_" ESCAPE="true"/>
<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_status_" ESCAPE="true"/>
<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_alt_"/>
<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowTimedActionEventFront" outstring="TimedEventURL">
    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="view"/>
                                                          </SATELLITE.LINK>
 <div class="width-outer-70">
<A HREF="Variables.TimedEventURL" onmouseover="window.status='Variables._status_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._status_,Variables.TimedEventURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
<XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_alt_"/>
<A HREF="javascript:void(0);" onclick="document.forms['AppForm'].submit();return false;" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/DeleteEvent"/></CALLELEMENT></A>
</div>
	</else>
	</if>
</THEN>
</IF>

</FTCS>
