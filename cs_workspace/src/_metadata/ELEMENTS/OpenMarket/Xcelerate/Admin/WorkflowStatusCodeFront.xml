<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
 /VerticalApps/XcelerateC/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront.xml  

-->

<!--
 Confidential and Proprietary Information of Oracle Corp.
					All Rights Reserved.

 WorkflowStatusCodeFront.xml

 DESCRIPTION
	Admin things about a workflow status

 HISTORY 
 [2007-09-18 KGF]
 * XSS fixes (adapted from 6.3 fixes):
   * isCleanString function usage
   * CSVAR -> STRING.STREAM
 * changed local definitions of 'obj' to just forms[0] (not .elements[0])
 [2007-10-09 KGF]
 * XSS revision: minimized set of restricted characters.
 [2008-02-25 KGF]
 * further XSS fix: encode HTML special chars in description field.
-->

<CALLELEMENT NAME="OpenMarket/Xcelerate/Scripts/ValidateInputForXSS" />
<SCRIPT LANGUAGE="JavaScript">
<![CDATA[
function AddTimedActions() 
{ 
var obj = document.forms[0];
	if (obj.elements['workflowstatuscode'].value.search(/\S/) == -1)
	{
		]]>
		alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/specifynameworkflowstate" ESCAPE="true" ENCODE="false"/>");
		<![CDATA[
		obj.elements['workflowstatuscode'].focus();
		return false;
	}
	var isclean = isCleanString(obj.elements['workflowstatuscode'].value, '<">', true);	
	if (!isclean) {
		alert("]]><XLAT.STREAM KEY="dvin/FlexibleAssets/Attributes/ApostropheNotAllowedMinimal" ESCAPE="true" ENCODE="false"/><![CDATA[");
		return false;
	}
	if (obj.elements['wfdstate:description'].value.search(/\S/) == -1)
	{
		]]>
		alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/specifydescriptionworkflowstate" ESCAPE="true" ENCODE="false"/>");
		<![CDATA[
		obj.elements['wfdstate:description'].focus();
		return false;
	}
	obj.elements['pagename'].value = "OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront";
	obj.elements['action'].value = "timedactions";
	obj.elements['subaction'].value = "newaction";
	return true;
}
function Add() 
{ 
var obj = document.forms[0];
	if (obj.tact.options.selectedIndex=="-1")
	{
		]]>
		alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/specifyactiontaketimedaction" ESCAPE="true" ENCODE="false"/>");
		<![CDATA[
		return false;
	}
	if (obj.towhen.options.selectedIndex=="-1")
	{
		]]>
		alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/selectoffsetbeforaftdeadline" ESCAPE="true" ENCODE="false"/>");
		<![CDATA[
		return false;
	}
	obj.elements['pagename'].value = "OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront";
	obj.elements['action'].value = "edit";
	obj.elements['subaction'].value = "addaction";
	return true;
}
function SaveAction(obj) 
{ 
	obj.form.elements['pagename'].value = "OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront";
	obj.form.elements['action'].value = "edit";
	obj.form.elements['subaction'].value = "editaction";
	obj.form.submit();
}

function Edit(obj, id) 
{ 
	obj.form.elements['pagename'].value = "OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront";
	obj.form.elements['action'].value = "edit";
	obj.form.elements['subaction'].value = "edaction";
	obj.form.elements['tactid'].value = "id";
	obj.form.submit();
}

function Remove(assignmentactionid, relativetime) 
{ 
    var obj = document.forms[0];

    if (confirm(]]>"<XLAT.STREAM KEY="dvin/UI/Admin/RemoveTimedActionFromWorkflowState" ESCAPE="true" ENCODE="false"/>"<![CDATA[))
    {
    	obj.elements['pagename'].value = "OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront";
    	obj.elements['action'].value = "edit";
    	obj.elements['subaction'].value = "removeaction";
    	obj.elements['assignmentactionid'].value = assignmentactionid;
    	obj.elements['relativetime'].value = relativetime;
        return true;
    }
    
    return false;
}

function Cancel(obj) 
{ 
	obj.form.elements['pagename'].value = "OpenMarket/Xcelerate/Admin/WorkflowStatusCodePost";
	obj.form.elements['action'].value = "cancel";
	obj.form.submit();
}
function Delete(obj) 
{ 
	obj.form.elements['pagename'].value = "OpenMarket/Xcelerate/Admin/WorkflowStatusCodePost";
	obj.form.elements['action'].value = "cancel";
	obj.form.submit();
}

function TActsCancel()
{ 
var obj = document.forms[0];
	obj.elements['pagename'].value = "OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront";
	obj.elements['action'].value = "edit";
	obj.elements['subaction'].value = "donotaddaction";
}

function checkfields() 
{ 
	var obj = document.forms[0];
	if (obj.elements['workflowstatuscode'].value.search(/\S/) == -1)
	{
		]]>
		alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/specifynamestatecode" ESCAPE="true" ENCODE="false"/>");
		<![CDATA[
		return false;
	}
	var isclean = isCleanString(obj.elements['workflowstatuscode'].value, '<">', true);	
	if (!isclean) {
		alert("]]><XLAT.STREAM KEY="dvin/FlexibleAssets/Attributes/ApostropheNotAllowedMinimal" ESCAPE="true" ENCODE="false"/><![CDATA[");
		return false;
	}
	if (obj.elements['wfdstate:description'].value.search(/\S/) == -1)
	{
		]]>
		alert("<XLAT.STREAM KEY="dvin/UI/Admin/Error/specifydescriptionstatecode" ESCAPE="true" ENCODE="false"/>");
		<![CDATA[
		return false;
	}

	else
	{
	obj.elements['pagename'].value = "OpenMarket/Xcelerate/Admin/WorkflowStatusCodePost";
	obj.elements['action'].value = "new";
return true;
}
}
]]>
</SCRIPT>
<STRING.ENCODE VARIABLE="cs_environment" VARNAME="cs_environment"/>
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>
<STRING.ENCODE VARIABLE="cs_formmode" VARNAME="cs_formmode"/>
    <setvar NAME="doform" VALUE="false"/>


<IF COND="Variables.action=list">
<THEN>

	<IF COND="IsVariable.orderby!=true">
	<THEN>
		<SETVAR NAME="orderby" VALUE="description"/>
	</THEN>
	</IF>
<IF COND="Variables.showtitle!=false">
<THEN>                                          
	<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
	<tr><td>
			<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/WorkflowStates"/></span>
	</td></tr>
	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
	</table>
</THEN>
</IF>  
	<SELECTTO LIST="ActiveWflStates" FROM="WorkflowStatusCode" WHAT="*" ORDERBY="Variables.orderby"/>

	<table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-50">
		<tr>
			<td></td><td class="tile-dark" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
		</tr>
		<tr>
			<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
			<td >
				<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff"><tr><td colspan="7" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
					<tr><td class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
                                        <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="urlwfstatcodefront">
                                            <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                            <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="list"/>
                                                         <satellite.argument name="orderby" value="workflowstatuscode"/>
                                                          </SATELLITE.LINK>
                                        <A HREF="Variables.urlwfstatcodefront" REPLACEALL="Variables.urlwfstatcodefront"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/Name"/></DIV></A></td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">
                                        <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="urlwfstatcodefront">
                                            <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                            <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="list"/>
                                                         <satellite.argument name="orderby" value="description"/>
                                                          </SATELLITE.LINK>
                                        <A HREF="Variables.urlwfstatcodefront" REPLACEALL="Variables.urlwfstatcodefront"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/Description"/></DIV></A></td>
						<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
					</tr>
					<tr><td colspan="7" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
						<!-- Loop over all search results. -->
			   			<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
						<SETVAR NAME="separatorLine" VALUE="0"/>
						<LOOP LIST="ActiveWflStates">
							<substitute STR="ActiveWflStates.workflowstatuscode" WHAT="%20" WITH="/XCEL-SEP/" OUTSTR="sepcode"/>

							<IF COND="Variables.separatorLine=1">
							<THEN>
								<tr>
									<!--<td colspan="7" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
								</tr>
							</THEN>
							</IF>
							<SETVAR NAME="separatorLine" VALUE="1"/>
			
							<tr class="Variables.rowStyle"  REPLACEALL="Variables.rowStyle"><td><BR /></td>
							<td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
							<XLAT.LOOKUP KEY="dvin/Common/Inspect" VARNAME="_XLAT_" ESCAPE="true"/><XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisState" VARNAME="_alt_"/>
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="urlwfstatcodefront">
                                <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="details"/>
                                                         <satellite.argument name="id" value="ActiveWflStates.id"/>
                                                          </SATELLITE.LINK>
                            <A HREF="Variables.urlwfstatcodefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwfstatcodefront,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconInspectContent.gif"  border="0" alt="Variables._alt_" title="Variables._alt_"  REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
							<XLAT.LOOKUP KEY="dvin/Common/Edit" VARNAME="_XLAT_" ESCAPE="true"/><XLAT.LOOKUP KEY="dvin/UI/Admin/EditThisState" VARNAME="_alt_"/>
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="urlwfstatcodefront">
                                <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="edit"/>
                                                         <satellite.argument name="id" value="ActiveWflStates.id"/>
                                                          </SATELLITE.LINK>
                            <A HREF="Variables.urlwfstatcodefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwfstatcodefront,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconEditContent.gif"  border="0" alt="Variables._alt_" title="Variables._alt_"  REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
							<XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/><XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisState" VARNAME="_alt_"/>
							<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="urlwfstatcodefront">
                                <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="confirmdelete"/>
                                                         <satellite.argument name="id" value="ActiveWflStates.id"/>
                                                          </SATELLITE.LINK>
                            <A HREF="Variables.urlwfstatcodefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwfstatcodefront,Variables._XLAT_"><img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContent.gif"  border="0" alt="Variables._alt_" title="Variables._alt_"  REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
							
							</td>
					                <td><BR /></td><td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
					                    <DIV class="small-text-inset">
                                            <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="urlwfstatcodefront">
                                                <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                                <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="details"/>
                                                         <satellite.argument name="id" value="ActiveWflStates.id"/>
                                                          </SATELLITE.LINK>
										<A HREF="Variables.urlwfstatcodefront" REPLACEALL="Variables.urlwfstatcodefront"><STRING.STREAM VALUE="ActiveWflStates.workflowstatuscode"/></A>
										</DIV>
									</td>
									<td><BR /></td><td VALIGN="TOP" ALIGN="LEFT">
					                    <DIV class="small-text-inset">
					                    <STRING.STREAM VALUE="ActiveWflStates.description"/><BR />
					                    </DIV>
					                 </td>
					                 	<td><BR /></td></tr>
					            <IF COND="Variables.rowStyle=tile-row-normal">
					            <THEN><SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
					            </THEN>
					            <ELSE><SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
					            </ELSE>
					            </IF>
							</LOOP>
							</table>
						</td>
						<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td>
						</tr>
					<tr>
					<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
					</tr>
					<tr>
					<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td>
					</tr>
					</table> 


    <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="AddStateFrontURL">
        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="new"/>
                                                          </SATELLITE.LINK>
<XLAT.LOOKUP KEY="dvin/UI/AddState" VARNAME="AddStateALT"/>
<div class="width-outer-70">                                                          
<A HREF="Variables.AddStateFrontURL" onmouseover="window.status='Variables.AddStateALT';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables.AddStateFrontURL,Variables.AddStateALT"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNewState"/></CALLELEMENT></A>
</div>    		

</THEN>
</IF> <!-- end action=list -->

    <if COND="Variables.action=details">
    <then>

  	  <setvar NAME="errno" VALUE="0"/>
  	 
	  <WORKFLOWENGINE.GETSTATEID OBJVARNAME="state" ID="Variables.id"/>
	  <WORKFLOWSTATE.SCATTER PREFIX="wfdstate:" NAME="state"/>

	  <!-- Define hidden variables for next page -->
	  <STRING.ENCODE VARIABLE="id" VARNAME="id"/>
	  <INPUT TYPE="HIDDEN" NAME="id" VALUE="Variables.id" REPLACEALL="Variables.id"/>
	  <SETVAR NAME="OutputQString" VALUE="Variables.empty"/>
	  <STRING.ENCODE VARIABLE="wfdstate:description" VARNAME="OutputQString"/>
	  <INPUT TYPE="HIDDEN" NAME="wfdstate:description" VALUE="Variables.OutputQString" REPLACEALL="Variables.OutputQString"/>
	  <STRING.ENCODE VARIABLE="wfdstate:esttime" VARNAME="temp"/>
	  <INPUT TYPE="HIDDEN" NAME="wfdstate:esttime" VALUE="Variables.temp" REPLACEALL="Variables.temp"/>
	  <STRING.ENCODE VARIABLE="wfdstate:actionsactionTotal" VARNAME="temp"/>
	  <INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionTotal" VALUE="Variables.temp" REPLACEALL="Variables.temp"/>
	  <if COND="IsVariable.wfdstate:actionsactionTotal=true">
	  <then>
	  	<if COND="Variables.wfdstate:actionsactionTotal!=0">
	  	<then>
			<setcounter NAME="ACTCOUNT" VALUE="0"/>	
			<loop FROM="0" COUNT="Variables.wfdstate:actionsactionTotal">
				<setvar NAME="tmp" VALUE="Variables.wfdstate:actionsactionCounters.ACTCOUNTaction"/>
				<INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionCounters.ACTCOUNTaction" VALUE="Variables.tmp" REPLACEALL="Variables.tmp, Counters.ACTCOUNT"/>
				<setvar NAME="tmp" VALUE="Variables.wfdstate:actionsactionCounters.ACTCOUNTtime"/>
				<INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionCounters.ACTCOUNTtime" VALUE="Variables.tmp" REPLACEALL="Variables.tmp, Counters.ACTCOUNT"/>
				<inccounter NAME="ACTCOUNT" VALUE="1"/>
			</loop>
	  	</then>
	  	</if>
	  </then>
	  </if>
	  <!-- end definition of hidden variables -->
	     <IF COND="Variables.showheader!=false">
	     <THEN>                                          
			<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
				<tr><td>
					<span class="title-text"><XLAT.STREAM KEY="dvin/UI/WorkflowState"/>: <STRING.STREAM VARIABLE="wfdstate:name"/></span>
				</td></tr>
				<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
			</table>
	      </THEN>
	     </IF>
        
     <table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-50  margin-top-zero">
		<tr><td>
				<table class="legacyAbar" border="0" cellpadding="0" cellspacing="0">
				<tr>
					<td><XLAT.LOOKUP KEY="dvin/Common/Inspect" VARNAME="_XLAT_" ESCAPE="true"/><XLAT.LOOKUP KEY="dvin/UI/Admin/InspectThisState" VARNAME="_alt_"/>
					<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="urlwfstatcodefront">
                        <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                        <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="details"/>
                                                         <satellite.argument name="id" value="Variables.id"/>
                                                          </SATELLITE.LINK>
                    <A HREF="Variables.urlwfstatcodefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwfstatcodefront,Variables._XLAT_"><img height="14" width="14" hspace="2" src="Variables.cs_imagedir/graphics/common/icon/iconInspectContentUp.gif"  border="0" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A></td>
					<td>
					<A HREF="Variables.urlwfstatcodefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwfstatcodefront,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Inspect"/></span></A></td>
				<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
				<td><XLAT.LOOKUP KEY="dvin/Common/Edit" VARNAME="_XLAT_" ESCAPE="true"/><XLAT.LOOKUP KEY="dvin/UI/Admin/EditThisState" VARNAME="_alt_"/>
				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="urlwfstatcodefront">
                    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="edit"/>
                                                         <satellite.argument name="id" value="Variables.id"/>
                                                          </SATELLITE.LINK>
                <A HREF="Variables.urlwfstatcodefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwfstatcodefront,Variables._XLAT_"><img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconEditContentUp.gif" hspace="2" border="0" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A></td>
					<td>
					<A HREF="Variables.urlwfstatcodefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwfstatcodefront,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Edit"/></span></A></td>

				<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>

				<td><XLAT.LOOKUP KEY="dvin/Common/Delete" VARNAME="_XLAT_" ESCAPE="true"/><XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteThisState" VARNAME="_alt_"/>
				<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="urlwfstatcodefront">
                    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="confirmdelete"/>
                                                         <satellite.argument name="id" value="Variables.id"/>
                                                          </SATELLITE.LINK>
                <A HREF="Variables.urlwfstatcodefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwfstatcodefront,Variables._XLAT_"><img height="14" width="14" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContentUp.gif" hspace="2" border="0" alt="Variables._alt_" REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A></td>
					<td>
					<A HREF="Variables.urlwfstatcodefront" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true" REPLACEALL="Variables.urlwfstatcodefront,Variables._XLAT_"><span class="action-text"><XLAT.STREAM KEY="dvin/Common/Delete"/></span></A></td>

				<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
				</tr>
			</table>
			<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<tr>
				<td class="form-label-text" WIDTH="30%">
					<XLAT.STREAM KEY="dvin/Common/Name"/>:
				</td>
				<td><br/></td>
				<td class="form-inset" WIDTH="70%">
						<STRING.STREAM VARIABLE="wfdstate:name"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/Common/Description"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<STRING.STREAM VARIABLE="wfdstate:description"/>
				</td>
			</tr>			
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>		
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Admin/EstimatedTime"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<CALCULATOR.GO VALUE="Variables.wfdstate:esttime 3600000 /" VARNAME="hours"/>
						<CALCULATOR.GO VALUE="Variables.hours 24 /" VARNAME="days"/>
				 		<STRINGLIST NAME="days" STR="Variables.days" DELIM="."/>
						<CALCULATOR.GO VALUE="Variables.hours 24 %" VARNAME="hours"/>
						<setvar NAME="tmp" VALUE="days.ITEM"/>
						<STRING.STREAM VALUE="days.ITEM"/>&nbsp;<IF COND="days.ITEM=1"><THEN> <XLAT.STREAM KEY="dvin/Common/day"/>:</THEN><ELSE> <XLAT.STREAM KEY="dvin/Common/lcdays"/>:</ELSE></IF><STRING.STREAM VARIABLE="hours"/>&nbsp;<IF COND="Variables.hours=1"><THEN> <XLAT.STREAM KEY="dvin/Common/hour"/></THEN><ELSE> <XLAT.STREAM KEY="dvin/Common/hours"/></ELSE></IF>
						<STRING.ENCODE VARIABLE="tmp" VARNAME="tmp"/>
						<INPUT TYPE="HIDDEN" NAME="estdays" VALUE="Variables.tmp" REPLACEALL="Variables.tmp"/>
						<STRING.ENCODE VARIABLE="hours" VARNAME="hours"/>
						<INPUT TYPE="HIDDEN" NAME="esthours" VALUE="Variables.hours" REPLACEALL="Variables.hours"/>					
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>			
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Admin/TimedActions"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
					<if COND="IsVariable.wfdstate:actionsactionTotal=true">
					<then>
					<if COND="Variables.wfdstate:actionsactionTotal!=0">
					<then>

	<table BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="100%">
		<tr>
			<td></td><td class="tile-dark" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td><td></td>
		</tr>
		<tr>
			<td class="tile-dark" VALIGN="top" WIDTH="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			<td >
				<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff"><tr><td colspan="6" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
					<tr><td class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/UI/Admin/Action"/></DIV></td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/When"/></DIV></td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
						<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
					</tr>
					<tr><td colspan="6" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
						<!-- Loop over all search results. -->
			   			<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
						<SETVAR NAME="separatorLine" VALUE="0"/>
													<setcounter NAME="TACTIONS" VALUE="0"/>

						<LOOP FROM="0" COUNT="Variables.wfdstate:actionsactionTotal">
							<IF COND="Variables.separatorLine=1">
							<THEN>
								<tr>
									<!--<td colspan="6" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
								</tr>
							</THEN>
							</IF>
							<SETVAR NAME="separatorLine" VALUE="1"/>
			
							<tr class="Variables.rowStyle"  REPLACEALL="Variables.rowStyle">

					                <td><BR /></td><td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
					                    <DIV class="small-text-inset">
   											<WORKFLOWENGINE.GETASSIGNMENTACTIONID ID="Variables.wfdstate:actionsactionCounters.TACTIONSaction" OBJVARNAME="stactobj"/>
											<WORKFLOWACTION.GETNAME NAME="stactobj" VARNAME="actname"/>
											<WORKFLOWACTION.GETID NAME="stactobj" VARNAME="actid"/>
                                            <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowActionsFront" outstring="urlwfactfront">
                                                <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                                <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="details"/>
                                                         <satellite.argument name="id" value="Variables.actid"/>
                                                         <satellite.argument name="acttype" value="Timed"/>
                                                          </SATELLITE.LINK>
										<A HREF="Variables.urlwfactfront" REPLACEALL="Variables.urlwfactfront">											<WORKFLOWENGINE.GETASSIGNMENTACTIONID ID="Variables.wfdstate:actionsactionCounters.TACTIONSaction" OBJVARNAME="stactobj"/>
											<setvar NAME="assignmentactionid" VALUE="Variables.wfdstate:actionsactionCounters.TACTIONSaction"/>
											<setvar NAME="relativetime" VALUE="Variables.wfdstate:actionsactionCounters.TACTIONStime"/>
											<STRING.STREAM VARIABLE="actname"/>
										</A>
										</DIV>
									</td>
									<td><BR /></td><td VALIGN="TOP" ALIGN="LEFT">
					                    <DIV class="small-text-inset"><NOBR>
									<setvar NAME="tmp" VALUE="Variables.wfdstate:actionsactionCounters.TACTIONStime"/>
									<XLAT.LOOKUP KEY="dvin/Common/After" VARNAME="_XLAT_"/>
									<XLAT.LOOKUP KEY="dvin/UI/Admin/afterDeadlineBold" VARNAME="_OFFSETXLAT_" ENCODE="false"/>
									<setvar NAME="toffset" VALUE="Variables._XLAT_"/>
									<setvar NAME="errno" VALUE="0"/>
									<begins STR="Variables.tmp" WHAT="-"/>
									<if COND="Variables.errno=1">
									<then>
			  							<CALCULATOR.GO VALUE="Variables.tmp -1 *" VARNAME="ttmp"/>
										<setvar NAME="tmp" VALUE="Variables.ttmp"/>
										<XLAT.LOOKUP KEY="dvin/Common/Before" VARNAME="_XLAT_"/>
										<XLAT.LOOKUP KEY="dvin/UI/Admin/beforeDeadlineBold" VARNAME="_OFFSETXLAT_" ENCODE="false"/>
										<setvar NAME="toffset" VALUE="Variables._XLAT_"/>
										<setvar NAME="errno" VALUE="0"/>
									</then>
									</if>

			  						<CALCULATOR.GO VALUE="Variables.tmp 3600000 /" VARNAME="thours"/>
			  						<CALCULATOR.GO VALUE="Variables.thours 24 /" VARNAME="tdays"/>
	 		  						<STRINGLIST NAME="tdays" STR="Variables.tdays" DELIM="."/>
			  						<CALCULATOR.GO VALUE="Variables.thours 24 %" VARNAME="thours"/>
									<STRINGLIST NAME="thours" STR="Variables.thours" DELIM="."/>
									<STRING.STREAM VALUE="tdays.ITEM"/>&nbsp; <IF COND="tdays.ITEM=1"><THEN> <XLAT.STREAM KEY="dvin/Common/day"/>:</THEN><ELSE> <XLAT.STREAM KEY="dvin/Common/lcdays"/>:</ELSE></IF><STRING.STREAM VALUE="thours.ITEM"/>&nbsp; <XLAT.STREAM KEY="dvin/Common/hours"/>&nbsp;
									
									<CSVAR NAME="Variables._OFFSETXLAT_"/>
								
					                 </NOBR></DIV>
					                 </td><td><BR /></td>
					                 <td>
									<BR />
									</td>
								</tr>
					            <IF COND="Variables.rowStyle=tile-row-normal">
					            <THEN><SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
					            </THEN>
					            <ELSE><SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
					            </ELSE>
					            </IF>
								<inccounter NAME="TACTIONS" VALUE="1"/>

							</LOOP>
							</table>
						</td>
						<td class="tile-dark" VALIGN="top" WIDTH="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td>&nbsp;</td>
						</tr>
					<tr>
					<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
					</tr>
					<tr>
					<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td><td></td>
					</tr>
					</table>
					</then>
					<else>
							<XLAT.STREAM KEY="dvin/UI/Admin/Notimedactionsspecified"/>
					</else>

					</if>

					</then>
					</if>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/AT/Common/ID"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<STRING.STREAM VARIABLE="wfdstate:id"/>
				</td>
			</tr>	
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>		

            <INPUT TYPE="HIDDEN" NAME="assignmentactionid" VALUE=""/>   
            <INPUT TYPE="HIDDEN" NAME="relativetime" VALUE=""/>   
	    	<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="urlwfstatcodefront">
	        	<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
	        	<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
               	<satellite.argument name="action" value="list"/>
           </SATELLITE.LINK>
            <tr>
				<td></td>
				<td><br/></td>
				<td class="form-inset">
	    			<A HREF="Variables.urlwfstatcodefront" REPLACEALL="Variables.urlwfstatcodefront"><IMG src="Variables.cs_imagedir/graphics/common/icon/doubleArrow.gif" WIDTH="15" HEIGHT="12" BORDER="0" REPLACEALL="Variables.cs_imagedir"/><XLAT.STREAM KEY="dvin/UI/Admin/Listallworkflowstates"/></A>
				</td>
			</tr>
		</table>
	</td></tr>
</table>
    </then>
    </if>


<!-- ******* NEW ******* -->
<if COND="Variables.action=new">
<then>

	<INPUT TYPE="HIDDEN" NAME="existingstate" VALUE="false"/> 
	<IF COND="Variables.showtitle!=false">
	<THEN>                                          
		<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
			<tr><td>
				<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/AddNewWorkflowState"/></span>
			</td></tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
		</table>                                      
	</THEN>
	</IF>                                   
	<table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-50">
	<tr><td>
		<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<tr>
				<td class="form-label-text">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/Common/Name"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="40" NAME="workflowstatuscode" VALUE=""/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/Common/Description"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
                  	   <INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="40" NAME="wfdstate:description" VALUE=""/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" VALIGN="MIDDLE" NOWRAP="NOWRAP">
					<XLAT.STREAM KEY="dvin/UI/Admin/EstimatedTime"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
		           		<INPUT TYPE="TEXT" SIZE="3" MAXLENGTH="5" NAME="estdays" VALUE="00"/>&nbsp;<XLAT.STREAM KEY="dvin/Common/lcdays"/>&nbsp;
                		<SELECT NAME="esthours" SIZE="1">
						<setcounter NAME="HR" VALUE="0"/>
						<loop FROM="0" COUNT="24">
                   			<OPTION VALUE="Counters.HR" REPLACEALL="Counters.HR"/><STRING.STREAM VALUE="Counters.HR"/>
							<inccounter NAME="HR" VALUE="1"/>
						</loop>
                   		</SELECT>
                   		&nbsp;<XLAT.STREAM KEY="dvin/Common/hours"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<XLAT.STREAM KEY="dvin/UI/Admin/TimedActions"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<A HREF="javascript:void(0);" onClick="if(AddTimedActions()!=false){document.forms['AppForm'].submit();return false;}">				
							<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddTimedActions_"/></CALLELEMENT>
						</A>
				</td>
			</tr>	
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>		
	
			
			<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/WorkflowStatusCodePost"/>                 
			<INPUT TYPE="HIDDEN" NAME="action" VALUE="new"/>
			<INPUT TYPE="HIDDEN" NAME="subaction" VALUE="add"/> 
			
			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="StateFrontURL">
			    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
			    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                <satellite.argument name="action" value="list"/>
            </SATELLITE.LINK>
	            <tr>
		            <td></td>
		            <td><br/></td>
		            <td class="form-inset">
						<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="CancelALT"/>
						<A HREF="Variables.StateFrontURL" onmouseover="window.status='CancelALT';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables.StateFrontURL,Variables.CancelALT"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
						<XLAT.LOOKUP KEY="dvin/UI/AddState" VARNAME="_XLAT_" ESCAPE="true"/>
						<A HREF="javascript:void(0);" onClick="if(checkfields()!=false){document.forms['AppForm'].submit();return false;}" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddNewState"/></CALLELEMENT></A>
		            </td>
	            </tr>				    	
	 		</table>
		</td></tr>
	</table>   	
  	</then>
  	</if>    

<!-- ************** edit ****************-->
<if COND="Variables.action=edit">
<then>
<IF COND="IsVariable.id=true">
<THEN>
<IF COND="IsVariable.subaction!=true">
<THEN>
	  <WORKFLOWENGINE.GETSTATEID OBJVARNAME="state" ID="Variables.id"/>
	  <WORKFLOWSTATE.SCATTER PREFIX="wfdstate:" NAME="state"/>
	  <!-- compute estimated time -->
		<CALCULATOR.GO VALUE="Variables.wfdstate:esttime 3600000 /" VARNAME="hours"/>
		<CALCULATOR.GO VALUE="Variables.hours 24 /" VARNAME="days"/>
		<STRINGLIST NAME="days" STR="Variables.days" DELIM="."/>
		<CALCULATOR.GO VALUE="Variables.hours 24 %" VARNAME="hours"/>
		<STRINGLIST NAME="hours" STR="Variables.hours" DELIM="."/>
		<setvar NAME="esthours" VALUE="hours.ITEM"/>
		<setvar NAME="estdays" VALUE="days.ITEM"/>
</THEN>
<ELSE>
	<CALCULATOR.GO VALUE="Variables.estdays 86400000 *" VARNAME="tmp1"/>
		<CALCULATOR.GO VALUE="Variables.esthours 3600000 *" VARNAME="tmp2"/>
		<CALCULATOR.GO VALUE="Variables.tmp1 Variables.tmp2 +" VARNAME="wfdstate:esttime"/>
	<SETVAR NAME="wfdstate:id" VALUE="Variables.id"/>
</ELSE>
</IF>
</THEN>
</IF>
	
						

	
		<!-- create state -->
		<WORKFLOWENGINE.CREATENEWSTATE OBJVARNAME="newstate"/>

		<!-- write existing data to the new state -->

      	<WORKFLOWSTATE.GATHER PREFIX="wfdstate:" NAME="newstate"/>
      	<WORKFLOWSTATE.SCATTER PREFIX="wfdstate:" NAME="newstate"/>

		<if COND="Variables.subaction=addaction">
		<then>
			<!-- time data from timedaction page -->
			<CALCULATOR.GO VALUE="Variables.todays 86400000 *" VARNAME="tmp1"/>
			<CALCULATOR.GO VALUE="Variables.tohours 3600000 *" VARNAME="tmp2"/>
			<CALCULATOR.GO VALUE="Variables.tmp1 Variables.tmp2 +" VARNAME="ttime"/>
			<setvar NAME="time" VALUE="Variables.ttime"/>
			<if COND="Variables.towhen=Before">
			<then>
				<CALCULATOR.GO VALUE="Variables.ttime -1 *" VARNAME="time"/>
			</then>
			</if>

			<WORKFLOWSTATE.GETACTIONS NAME="newstate" OBJVARNAME="timedactionlistobj"/>
			<WORKFLOWTIMEDACTIONLIST.CREATE NAME="timedactionlistobj" OBJVARNAME="timedactionobj"/>

			<WORKFLOWTIMEDACTION.SETASSIGNMENTACTION NAME="timedactionobj" VALUE="Variables.tact"/>

			<WORKFLOWTIMEDACTION.SETRELATIVETIME NAME="timedactionobj" TIME="Variables.time"/>

			<WORKFLOWTIMEDACTIONLIST.ADDTIMEDACTION NAME="timedactionlistobj" OBJECT="timedactionobj"/>

			<WORKFLOWSTATE.SETACTIONS NAME="newstate" OBJECT="timedactionlistobj"/>

			<WORKFLOWSTATE.SCATTER NAME="newstate" PREFIX="wfdstate:"/>


		</then>
		</if>
		<if COND="Variables.subaction=removeaction">
		<then>

			<WORKFLOWSTATE.GETACTIONS NAME="newstate" OBJVARNAME="timedactionlistobj"/>

			<WORKFLOWTIMEDACTIONLIST.CREATE NAME="timedactionlistobj" OBJVARNAME="timedactionobj"/>

			<WORKFLOWTIMEDACTION.SETASSIGNMENTACTION NAME="timedactionobj" VALUE="Variables.assignmentactionid"/>

			<WORKFLOWTIMEDACTION.SETRELATIVETIME NAME="timedactionobj" TIME="Variables.relativetime"/>

			<WORKFLOWTIMEDACTIONLIST.REMOVETIMEDACTION NAME="timedactionlistobj" OBJECT="timedactionobj"/>

			<WORKFLOWSTATE.SETACTIONS NAME="newstate" OBJECT="timedactionlistobj"/>

			<WORKFLOWSTATE.SCATTER NAME="newstate" PREFIX="wfdstate:"/>

		</then>
		</if>

			<INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionTotal" VALUE="Variables.wfdstate:actionsactionTotal" REPLACEALL="Variables.wfdstate:actionsactionTotal"/>
	  		<if COND="IsVariable.wfdstate:actionsactionTotal=true">
	  		<then>
	  			<if COND="Variables.wfdstate:actionsactionTotal!=0">
	  			<then>
					<setcounter NAME="ACTCOUNT" VALUE="0"/>	
					<loop FROM="0" COUNT="Variables.wfdstate:actionsactionTotal">
						<setvar NAME="tmp" VALUE="Variables.wfdstate:actionsactionCounters.ACTCOUNTaction"/>
						<INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionCounters.ACTCOUNTaction" VALUE="Variables.tmp" REPLACEALL="Variables.tmp, Counters.ACTCOUNT"/>
						<setvar NAME="tmp" VALUE="Variables.wfdstate:actionsactionCounters.ACTCOUNTtime"/>
						<INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionCounters.ACTCOUNTtime" VALUE="Variables.tmp" REPLACEALL="Variables.tmp, Counters.ACTCOUNT"/>
						<inccounter NAME="ACTCOUNT" VALUE="1"/>
					</loop>
	  			</then>
			  	</if>
			  </then>
			  </if>
		<STRING.ENCODE VARIABLE="wfdstate:name" VARNAME="wfdstate:name"/>
		<INPUT TYPE="HIDDEN" NAME="wfdstate:name" VALUE="Variables.wfdstate:name" REPLACEALL="Variables.wfdstate:name"/>
		<STRING.ENCODE VARIABLE="existingstate" VARNAME="existingstate"/>
	  	<INPUT TYPE="HIDDEN" NAME="existingstate" VALUE="Variables.existingstate" REPLACEALL="Variables.existingstate"/> 
	<IF COND="Variables.showheader!=false">
	<THEN>                                          
		<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
			<tr><td>
				<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/EditWorkflowState"/>: <STRING.STREAM VARIABLE="wfdstate:description"/></span>
			</td></tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
		</table>
	</THEN>
	</IF>                     
	<table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-50">
	<tr><td>
			<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<tr>
				<td class="form-label-text">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/Common/Name"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="40" NAME="workflowstatuscode" VALUE="Variables.wfdstate:name" REPLACEALL="Variables.wfdstate:name"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/Common/Description"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<SETVAR NAME="OutputQString" VALUE="Variables.empty"/>
						<STRING.ENCODE VARIABLE="wfdstate:description" VARNAME="OutputQString"/>
                  	   <INPUT TYPE="TEXT" SIZE="32" MAXLENGTH="40" NAME="wfdstate:description" VALUE="Variables.OutputQString" REPLACEALL="Variables.OutputQString"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" VALIGN="MIDDLE" NOWRAP="NOWRAP">
					<XLAT.STREAM KEY="dvin/UI/Admin/EstimatedTime"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
                  		<INPUT TYPE="TEXT" SIZE="3" MAXLENGTH="5" NAME="estdays" VALUE="Variables.estdays" REPLACEALL="Variables.estdays"/>
                  		&nbsp;<XLAT.STREAM KEY="dvin/Common/lcdays"/>&nbsp;
                  		<SELECT NAME="esthours" SIZE="1">
						<setcounter NAME="hr" VALUE="0"/>
						<loop FROM="0" COUNT="24">
							<if COND="Variables.esthours=Counters.hr">
							<then>
								<OPTION VALUE="Counters.hr" SELECTED="yes" REPLACEALL="Counters.hr"/><STRING.STREAM VALUE="Counters.hr"/>
							</then>
							<else>
								<OPTION VALUE="Counters.hr" REPLACEALL="Counters.hr"/><STRING.STREAM VALUE="Counters.hr"/>
							</else>
							</if>
						<inccounter NAME="hr" VALUE="1"/>
						</loop>
                    	</SELECT>
						&nbsp;<XLAT.STREAM KEY="dvin/Common/hours"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<XLAT.STREAM KEY="dvin/UI/Admin/TimedActions"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
					<if COND="IsVariable.wfdstate:actionsactionTotal=true">
					<then>
					<if COND="Variables.wfdstate:actionsactionTotal!=0">
					<then>

	<table BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="98%">
		<tr>
			<td></td><td class="tile-dark" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td><td></td>
		</tr>
		<tr>
			<td class="tile-dark" VALIGN="top" WIDTH="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			<td >
				<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff"><tr><td colspan="6" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
					<tr><td class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/UI/Admin/Action"/></DIV></td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/When"/></DIV></td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
						<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
					</tr>
					<tr><td colspan="6" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
						<!-- Loop over all search results. -->
			   			<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
						<SETVAR NAME="separatorLine" VALUE="0"/>
													<setcounter NAME="TACTIONS" VALUE="0"/>

					<LOOP FROM="0" COUNT="Variables.wfdstate:actionsactionTotal">
							<IF COND="Variables.separatorLine=1">
							<THEN>
								<tr>
									<!--<td colspan="6" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>-->
								</tr>
							</THEN>
							</IF>
							<SETVAR NAME="separatorLine" VALUE="1"/>
			
							<tr class="Variables.rowStyle"  REPLACEALL="Variables.rowStyle">

					                <td><BR /></td><td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
					                    <DIV class="small-text-inset">
   											<WORKFLOWENGINE.GETASSIGNMENTACTIONID ID="Variables.wfdstate:actionsactionCounters.TACTIONSaction" OBJVARNAME="stactobj"/>
											<WORKFLOWACTION.GETNAME NAME="stactobj" VARNAME="actname"/>
											<WORKFLOWACTION.GETID NAME="stactobj" VARNAME="actid"/>
										<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowActionsFront" outstring="urlwfactfront">
                                            <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                            <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="details"/>
                                                         <satellite.argument name="id" value="Variables.actid"/>
                                                         <satellite.argument name="acttype" value="Timed"/>
                                                          </SATELLITE.LINK>
                                        <A HREF="Variables.urlwfactfront" REPLACEALL="Variables.urlwfactfront">
										<WORKFLOWENGINE.GETASSIGNMENTACTIONID ID="Variables.wfdstate:actionsactionCounters.TACTIONSaction" OBJVARNAME="stactobj"/>
											<setvar NAME="assignmentactionid" VALUE="Variables.wfdstate:actionsactionCounters.TACTIONSaction"/>
											<setvar NAME="relativetime" VALUE="Variables.wfdstate:actionsactionCounters.TACTIONStime"/>
											<STRING.STREAM VARIABLE="actname"/>
										</A>
										</DIV>
									</td>
									<td><BR /></td><td VALIGN="TOP" ALIGN="LEFT">
					                <DIV class="small-text-inset"><NOBR>
									<setvar NAME="tmp" VALUE="Variables.wfdstate:actionsactionCounters.TACTIONStime"/>
									<XLAT.LOOKUP KEY="dvin/Common/After" VARNAME="_XLAT_"/>
									<setvar NAME="toffset" VALUE="Variables._XLAT_"/>
	<XLAT.LOOKUP KEY="dvin/UI/Admin/afterDeadlineBold" VARNAME="_OFFSETXLAT_" ENCODE="false"/>
									<setvar NAME="errno" VALUE="0"/>
									<begins STR="Variables.tmp" WHAT="-"/>
									<if COND="Variables.errno=1">
									<then>
			  							<CALCULATOR.GO VALUE="Variables.tmp -1 *" VARNAME="ttmp"/>
										<setvar NAME="tmp" VALUE="Variables.ttmp"/>
										<XLAT.LOOKUP KEY="dvin/Common/Before" VARNAME="_XLAT_"/>
										<setvar NAME="toffset" VALUE="Variables._XLAT_"/>
<XLAT.LOOKUP KEY="dvin/UI/Admin/beforeDeadlineBold" VARNAME="_OFFSETXLAT_" ENCODE="false"/>
										<setvar NAME="errno" VALUE="0"/>
									</then>
									</if>

			  						<CALCULATOR.GO VALUE="Variables.tmp 3600000 /" VARNAME="thours"/>
			  						<CALCULATOR.GO VALUE="Variables.thours 24 /" VARNAME="tdays"/>
	 		  						<STRINGLIST NAME="tdays" STR="Variables.tdays" DELIM="."/>
			  						<CALCULATOR.GO VALUE="Variables.thours 24 %" VARNAME="thours"/>
									<STRINGLIST NAME="thours" STR="Variables.thours" DELIM="."/>
									<STRING.STREAM VALUE="tdays.ITEM"/>&nbsp; <IF COND="tdays.ITEM=1"><THEN> <XLAT.STREAM KEY="dvin/Common/day"/>:</THEN><ELSE> <XLAT.STREAM KEY="dvin/Common/lcdays"/>:</ELSE></IF><STRING.STREAM VALUE="thours.ITEM"/>&nbsp; <XLAT.STREAM KEY="dvin/Common/hours"/>&nbsp;
									
									<CSVAR NAME="Variables._OFFSETXLAT_"/>
									 </NOBR></DIV>
					                 </td><td><BR /></td>
					                 <td>
										<A HREF="javascript:void(0);" onClick="if(Remove(Variables.assignmentactionid,Variables.relativetime)!=false){document.forms['AppForm'].submit();return false;}" REPLACEALL="Variables.assignmentactionid,Variables.relativetime">
                                        <XLAT.LOOKUP KEY="dvin/UI/Admin/RemoveThisActionFromThisState" VARNAME="_alt_"/>
                                        <img height="14" width="14" hspace="2" vspace="4" src="Variables.cs_imagedir/graphics/common/icon/iconDeleteContent.gif"  border="0" alt="Variables._alt_" title="Variables._alt_"  REPLACEALL="Variables.cs_imagedir,Variables._alt_"/></A>
									</td>
								</tr>
					            <IF COND="Variables.rowStyle=tile-row-normal">
					            <THEN><SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
					            </THEN>
					            <ELSE><SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
					            </ELSE>
					            </IF>
								<inccounter NAME="TACTIONS" VALUE="1"/>

							</LOOP>
							</table>
						</td>
						<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td><td>&nbsp;</td>
						</tr>
					<tr>
					<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
					</tr>
					<tr>
					<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td><td></td>
					</tr>
					</table>
					</then>
					<else>
							<XLAT.STREAM KEY="dvin/UI/Admin/Notimedactionsspecified"/><br/>
					</else>

					</if>

					</then>
					</if>

					<A HREF="javascript:void(0);" onClick="if(AddTimedActions()!=false){document.forms['AppForm'].submit();return false;}">
						<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddTimedActions_"/></CALLELEMENT>
					</A>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
		<IF COND="IsVariable.id=true">
		<THEN>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/AT/Common/ID"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<STRING.ENCODE VARIABLE="id" VARNAME="id"/>
						<INPUT TYPE="HIDDEN" NAME="id" VALUE="Variables.id" REPLACEALL="Variables.id"/>
						<STRING.STREAM VARIABLE="wfdstate:id"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
		</THEN>
		</IF>
			<INPUT TYPE="HIDDEN" NAME="assignmentactionid" VALUE=""/>   
			<INPUT TYPE="HIDDEN" NAME="relativetime" VALUE=""/>   
			<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/WorkflowStatusCodePost"/>                 
			<INPUT TYPE="HIDDEN" NAME="action" VALUE="new"/>
			<INPUT TYPE="HIDDEN" NAME="subaction" VALUE="newaction"/>
			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="StateFrontURL">
			    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
			    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                 <satellite.argument name="action" value="details"/>
                 <satellite.argument name="id" value="Variables.id"/>
            </SATELLITE.LINK>
            <tr>
				<td></td>
				<td><br/></td>
				<td class="form-inset">
					<A HREF="Variables.StateFrontURL" REPLACEALL="Variables.StateFrontURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A><XLAT.LOOKUP KEY="dvin/UI/SaveState" VARNAME="_XLAT_" ESCAPE="true"/>
					<A HREF="javascript:void(0);" onClick="if(checkfields()!=false){document.forms['AppForm'].submit();return false;}" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Save"/></CALLELEMENT></A>
				</td>
			</tr>				 			
 		</table>
	</td></tr>
</table> 	
  	</then>
  	</if>    

    <if COND="Variables.action=confirmdelete">
    <then>

  	  <setvar NAME="errno" VALUE="0"/>
  	 
	  <WORKFLOWENGINE.GETSTATEID OBJVARNAME="state" ID="Variables.id"/>
	  <WORKFLOWSTATE.SCATTER PREFIX="wfdstate:" NAME="state"/>

	  <!-- Define hidden variables for next page -->
	  <STRING.ENCODE VARIABLE="id" VARNAME="id"/>
	  <INPUT TYPE="HIDDEN" NAME="id" VALUE="Variables.id" REPLACEALL="Variables.id"/>
	  <SETVAR NAME="OutputQString" VALUE="Variables.empty"/>
	  <STRING.ENCODE VARIABLE="wfdstate:description" VARNAME="OutputQString"/>
	  <INPUT TYPE="HIDDEN" NAME="wfdstate:description" VALUE="Variables.OutputQString" REPLACEALL="Variables.OutputQString"/>
	  <STRING.ENCODE VARIABLE="wfdstate:esttime" VARNAME="temp"/>
	  <INPUT TYPE="HIDDEN" NAME="wfdstate:esttime" VALUE="Variables.temp" REPLACEALL="Variables.temp"/>
	  <STRING.ENCODE VARIABLE="wfdstate:actionsactionTotal" VARNAME="temp"/>
	  <INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionTotal" VALUE="Variables.temp" REPLACEALL="Variables.temp"/>
	  <if COND="IsVariable.wfdstate:actionsactionTotal=true">
	  <then>
	  	<if COND="Variables.wfdstate:actionsactionTotal!=0">
	  	<then>
			<setcounter NAME="ACTCOUNT" VALUE="0"/>	
			<loop FROM="0" COUNT="Variables.wfdstate:actionsactionTotal">
				<setvar NAME="tmp" VALUE="Variables.wfdstate:actionsactionCounters.ACTCOUNTaction"/>
				<INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionCounters.ACTCOUNTaction" VALUE="Variables.tmp" REPLACEALL="Variables.tmp, Counters.ACTCOUNT"/>
				<setvar NAME="tmp" VALUE="Variables.wfdstate:actionsactionCounters.ACTCOUNTtime"/>
				<INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionCounters.ACTCOUNTtime" VALUE="Variables.tmp" REPLACEALL="Variables.tmp, Counters.ACTCOUNT"/>
				<inccounter NAME="ACTCOUNT" VALUE="1"/>
			</loop>
	  	</then>
	  	</if>
	  </then>
	  </if>
	  <!-- end definition of hidden variables -->
            <IF COND="Variables.showheader!=false">
            <THEN>                                          
				<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
					<tr><td>
						<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/DeleteWorkflowState"/></span>
					</td></tr>
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
				</table>
             </THEN>
             </IF>
<!--
					<setvar NAME="deletewarning" VALUE="DeleteWfStateWarning.txt"/>
					<PROPERTY.GET PARAM="xcelerate.base" INIFILE="futuretense_xcel.ini" VARNAME="filepath"/>
					<setvar NAME="filepath" VALUE="Variables.filepath/Errors/Variables.deletewarning"/>
					<setvar NAME="errno" VALUE="0"/>
					<insert FILE="Variables.filepath" NAME="deletemessage"/>
-->
				<div class="width-outer-70">
					<XLAT.LOOKUP KEY="dvin/UI/Admin/DeleteWfStateWarning" ENCODE="false" VARNAME="deletemessage"/>
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
						<argument NAME="msgtext" VALUE="Variables.deletemessage"/>
						<argument NAME="severity" VALUE="warning"/>
					</callelement>	
				</div>
        
        <table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-50">
		<tr><td>
			<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<tr>
				<td class="form-label-text" WIDTH="30%">
					<XLAT.STREAM KEY="dvin/Common/Name"/>:
				</td>
				<td><br/></td>
				<td VALIGN="TOP" WIDTH="70%">
						<STRING.STREAM VARIABLE="wfdstate:name"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/Common/Description"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<STRING.STREAM VARIABLE="wfdstate:description"/>
				</td>
			</tr>			
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>			
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Admin/EstimatedTime"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<CALCULATOR.GO VALUE="Variables.wfdstate:esttime 3600000 /" VARNAME="hours"/>
						<CALCULATOR.GO VALUE="Variables.hours 24 /" VARNAME="days"/>
				 		<STRINGLIST NAME="days" STR="Variables.days" DELIM="."/>
						<CALCULATOR.GO VALUE="Variables.hours 24 %" VARNAME="hours"/>
						<setvar NAME="tmp" VALUE="days.ITEM"/>
						<STRING.STREAM VALUE="days.ITEM"/>&nbsp;<IF COND="days.ITEM=1"><THEN> <XLAT.STREAM KEY="dvin/Common/day"/>:</THEN><ELSE> <XLAT.STREAM KEY="dvin/Common/lcdays"/>:</ELSE></IF><STRING.STREAM VARIABLE="hours"/>&nbsp;<IF COND="Variables.hours=1"><THEN> <XLAT.STREAM KEY="dvin/Common/hour"/></THEN><ELSE> <XLAT.STREAM KEY="dvin/Common/hours"/></ELSE></IF>
						<STRING.ENCODE VARIABLE="tmp" VARNAME="tmp"/>
						<INPUT TYPE="HIDDEN" NAME="estdays" VALUE="Variables.tmp" REPLACEALL="Variables.tmp"/>
						<STRING.ENCODE VARIABLE="hours" VARNAME="hours"/>
						<INPUT TYPE="HIDDEN" NAME="esthours" VALUE="Variables.hours" REPLACEALL="Variables.hours"/>					
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>			
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/UI/Admin/TimedActions"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
					<if COND="IsVariable.wfdstate:actionsactionTotal=true">
					<then>
					<if COND="Variables.wfdstate:actionsactionTotal!=0">
					<then>

	<table BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="98%">
		<tr>
			<td></td><td class="tile-dark" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td><td></td>
		</tr>
		<tr>
			<td class="tile-dark" VALIGN="top" WIDTH="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
			<td >
				<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff"><tr><td colspan="6" class="tile-highlight"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
					<tr><td class="tile-a" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/UI/Admin/Action"/></DIV></td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;&nbsp;</td><td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/When"/></DIV></td>
						<td class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
						<td class="tile-c" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir">&nbsp;</td>
					</tr>
					<tr><td colspan="6" class="tile-dark"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td></tr>
						<!-- Loop over all search results. -->
			   			<SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
						<SETVAR NAME="separatorLine" VALUE="0"/>
													<setcounter NAME="TACTIONS" VALUE="0"/>

					<LOOP FROM="0" COUNT="Variables.wfdstate:actionsactionTotal">
							<IF COND="Variables.separatorLine=1">
							<THEN>
								<tr>
									<td colspan="6" class="light-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
							</THEN>
							</IF>
							<SETVAR NAME="separatorLine" VALUE="1"/>
			
							<tr class="Variables.rowStyle"  REPLACEALL="Variables.rowStyle">

					                <td><BR /></td><td VALIGN="TOP" NOWRAP="NOWRAP" ALIGN="LEFT">
					                    <DIV class="small-text-inset">
   											<WORKFLOWENGINE.GETASSIGNMENTACTIONID ID="Variables.wfdstate:actionsactionCounters.TACTIONSaction" OBJVARNAME="stactobj"/>
											<WORKFLOWACTION.GETNAME NAME="stactobj" VARNAME="actname"/>
											<WORKFLOWACTION.GETID NAME="stactobj" VARNAME="actid"/>
										<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowActionsFront" outstring="urlwfactfront">
                                            <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                                            <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                                         <satellite.argument name="action" value="details"/>
                                                         <satellite.argument name="id" value="Variables.actid"/>
                                                         <satellite.argument name="acttype" value="Timed"/>
                                                          </SATELLITE.LINK>
                                        <A HREF="Variables.urlwfactfront" REPLACEALL="Variables.urlwfactfront">											<WORKFLOWENGINE.GETASSIGNMENTACTIONID ID="Variables.wfdstate:actionsactionCounters.TACTIONSaction" OBJVARNAME="stactobj"/>
											<setvar NAME="assignmentactionid" VALUE="Variables.wfdstate:actionsactionCounters.TACTIONSaction"/>
											<setvar NAME="relativetime" VALUE="Variables.wfdstate:actionsactionCounters.TACTIONStime"/>
											<STRING.STREAM VARIABLE="actname"/>
										</A>
										</DIV>
									</td>
									<td><BR /></td><td VALIGN="TOP" ALIGN="LEFT">
					                    <DIV class="small-text-inset"><NOBR>
									<setvar NAME="tmp" VALUE="Variables.wfdstate:actionsactionCounters.TACTIONStime"/>
									<XLAT.LOOKUP KEY="dvin/Common/After" VARNAME="_XLAT_"/>
									<setvar NAME="toffset" VALUE="Variables._XLAT_"/>
									<XLAT.LOOKUP KEY="dvin/UI/Admin/afterDeadlineBold" VARNAME="_OFFSETXLAT_" ENCODE="false"/>
									<setvar NAME="errno" VALUE="0"/>
									<begins STR="Variables.tmp" WHAT="-"/>
									<if COND="Variables.errno=1">
									<then>
			  							<CALCULATOR.GO VALUE="Variables.tmp -1 *" VARNAME="ttmp"/>
										<setvar NAME="tmp" VALUE="Variables.ttmp"/>
										<XLAT.LOOKUP KEY="dvin/Common/Before" VARNAME="_XLAT_"/>
										<XLAT.LOOKUP KEY="dvin/UI/Admin/beforeDeadlineBold" VARNAME="_OFFSETXLAT_" ENCODE="false"/>
										<setvar NAME="toffset" VALUE="Variables._XLAT_"/>
										<setvar NAME="errno" VALUE="0"/>
									</then>
									</if>

			  						<CALCULATOR.GO VALUE="Variables.tmp 3600000 /" VARNAME="thours"/>
			  						<CALCULATOR.GO VALUE="Variables.thours 24 /" VARNAME="tdays"/>
	 		  						<STRINGLIST NAME="tdays" STR="Variables.tdays" DELIM="."/>
			  						<CALCULATOR.GO VALUE="Variables.thours 24 %" VARNAME="thours"/>
									<STRINGLIST NAME="thours" STR="Variables.thours" DELIM="."/>									
									<STRING.STREAM VALUE="tdays.ITEM"/>&nbsp; <IF COND="tdays.ITEM=1"><THEN> <XLAT.STREAM KEY="dvin/Common/day"/>:</THEN><ELSE> <XLAT.STREAM KEY="dvin/Common/lcdays"/>:</ELSE></IF><STRING.STREAM VALUE="thours.ITEM"/>&nbsp; <XLAT.STREAM KEY="dvin/Common/hours"/>&nbsp;
									<CSVAR NAME="Variables._OFFSETXLAT_"/>
					                 </NOBR></DIV>
					                 </td><td><BR /></td>
					                 <td><BR />
									</td>
								</tr>
					            <IF COND="Variables.rowStyle=tile-row-normal">
					            <THEN><SETVAR NAME="rowStyle" VALUE="tile-row-highlight"/>
					            </THEN>
					            <ELSE><SETVAR NAME="rowStyle" VALUE="tile-row-normal"/>
					            </ELSE>
					            </IF>
								<inccounter NAME="TACTIONS" VALUE="1"/>

							</LOOP>
							</table>
						</td>
						<td class="tile-dark" VALIGN="top" WIDTH="1" NOWRAP="nowrap"><BR /></td><td>&nbsp;</td>
						</tr>
					<tr>
					<td colspan="3" class="tile-dark" VALIGN="TOP" HEIGHT="1"><IMG WIDTH="1" HEIGHT="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
					</tr>
					<tr>
					<td></td><td background="Variables.cs_imagedir/graphics/common/screen/shadow.gif" REPLACEALL="Variables.cs_imagedir"><IMG WIDTH="1" HEIGHT="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td><td></td><td></td>
					</tr>
					</table>
					</then>
					<else>
							<XLAT.STREAM KEY="dvin/UI/Admin/Notimedactionsspecified"/>
					</else>

					</if>

					</then>
					</if>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/AT/Common/ID"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<STRING.STREAM VARIABLE="wfdstate:id"/>
				</td>
			</tr>	
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>		
			<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/WorkflowStatusCodePost"/>                 
			<INPUT TYPE="HIDDEN" NAME="action" VALUE="delete"/>
			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront" outstring="StateFrontURL">
			    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
			    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                      <satellite.argument name="action" value="details"/>
                      <satellite.argument name="id" value="Variables.id"/>
            </SATELLITE.LINK>
	          <tr>
				<td></td>
				<td><br/></td>
				<td class="form-inset">
				<A HREF="Variables.StateFrontURL" REPLACEALL="Variables.StateFrontURL"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
				<A HREF="javascript:void(0);" onclick="document.forms['AppForm'].submit();return false;" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/DeleteState"/></CALLELEMENT></A>
				</td>
			</tr>
		</table>
	</td></tr>
</table>
    </then>
    </if>

<!-- ***********  add time offsets ************* -->
	<if COND="Variables.action=timedactions">
      <then>
		
		<INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionTotal" VALUE="Variables.wfdstate:actionsactionTotal" REPLACEALL="Variables.wfdstate:actionsactionTotal"/>

	  <if COND="IsVariable.wfdstate:actionsactionTotal=true">
	  <then>
	  	<if COND="Variables.wfdstate:actionsactionTotal!=0">
	  	<then>
			<setcounter NAME="ACTCOUNT" VALUE="0"/>	
			<loop FROM="0" COUNT="Variables.wfdstate:actionsactionTotal">
				<setvar NAME="tmp" VALUE="Variables.wfdstate:actionsactionCounters.ACTCOUNTaction"/>
				<INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionCounters.ACTCOUNTaction" VALUE="Variables.tmp" REPLACEALL="Variables.tmp, Counters.ACTCOUNT"/>
				<setvar NAME="tmp" VALUE="Variables.wfdstate:actionsactionCounters.ACTCOUNTtime"/>
				<INPUT TYPE="HIDDEN" NAME="wfdstate:actionsactionCounters.ACTCOUNTtime" VALUE="Variables.tmp" REPLACEALL="Variables.tmp, Counters.ACTCOUNT"/>
				<inccounter NAME="ACTCOUNT" VALUE="1"/>
			</loop>
	  	</then>
	  	</if>
	  </then>
	  </if>

<IF COND="IsVariable.id=true">
<THEN>
	<INPUT TYPE="HIDDEN" NAME="existingstate" VALUE="true"/>
	<STRING.ENCODE VARIABLE="id" VARNAME="id"/>
	<INPUT TYPE="HIDDEN" NAME="id" VALUE="Variables.id" REPLACEALL="Variables.id"/>
</THEN>
<ELSE>
	<INPUT TYPE="HIDDEN" NAME="existingstate" VALUE="false"/>
</ELSE>
</IF>

<if COND="Variables.subaction=newaction">
<then>
	<IF COND="Variables.showtitle!=false">
    <THEN>                                          
		<table class="width-outer-70" cellspacing="0" cellpadding="0" border="0">
			<tr><td>
				<span class="title-text"><XLAT.STREAM KEY="dvin/UI/Admin/AddTimedActiontoWorkflowState"/>: <STRING.STREAM VARIABLE="wfdstate:description"/></span>
			</td></tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar"/>
		</table>
    </THEN>
    </IF>                                   
    <table BORDER="0" CELLSPACING="0" CELLPADDING="0" class="width-outer-50">
	<tr><td>
			<table class="width-inner-100" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
			<tr>
				<td class="form-label-text">
					<XLAT.STREAM KEY="dvin/Common/Name"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<STRING.ENCODE VARIABLE="workflowstatuscode" VARNAME="workflowstatuscode"/>
						<INPUT TYPE="HIDDEN" NAME="wfdstate:name" VALUE="Variables.workflowstatuscode" REPLACEALL="Variables.workflowstatuscode"/>
						<CSVAR NAME="Variables.workflowstatuscode"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<XLAT.STREAM KEY="dvin/Common/Description"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
						<SETVAR NAME="OutputQString" VALUE="Variables.empty"/>
						<STRING.ENCODE VARIABLE="wfdstate:description" VARNAME="OutputQString"/>
                  	   <INPUT TYPE="HIDDEN" NAME="wfdstate:description" VALUE="Variables.OutputQString" REPLACEALL="Variables.OutputQString"/>
                  	   <STRING.STREAM VARIABLE="wfdstate:description"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" VALIGN="MIDDLE" NOWRAP="NOWRAP">
					<XLAT.STREAM KEY="dvin/UI/Admin/EstimatedTime"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
				<STRING.ENCODE VARIABLE="estdays" VARNAME="estdays"/>
			        <INPUT TYPE="HIDDEN" NAME="estdays" VALUE="Variables.estdays" REPLACEALL="Variables.estdays"/>
				<STRING.ENCODE VARIABLE="esthours" VARNAME="esthours"/>
			        <INPUT TYPE="HIDDEN" NAME="esthours" VALUE="Variables.esthours" REPLACEALL="Variables.esthours"/> 
			        <STRING.STREAM VARIABLE="estdays"/> <XLAT.STREAM KEY="dvin/Common/lcdays"/>:<STRING.STREAM VARIABLE="esthours"/> <XLAT.STREAM KEY="dvin/Common/hours"/>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<tr>
				<td class="form-label-text" NOWRAP="NOWRAP">
					<span class="alert-color">*</span><XLAT.STREAM KEY="dvin/UI/Admin/AddTimedAction"/>:
				</td>
				<td><br/></td>
				<td class="form-inset">
				<TABLE>
				<TR>
               		<TD  ALIGN="LEFT" class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/ActionlctoTake"/></DIV></TD>
               		<TD  ALIGN="LEFT" class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/Common/Days"/></DIV></TD>               		
               		<TD  ALIGN="LEFT" class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/UI/Util/Hours"/></DIV></TD>               		
               		<TD  ALIGN="LEFT" class="tile-b" background="Variables.cs_imagedir/graphics/common/screen/grad.gif" REPLACEALL="Variables.cs_imagedir"><DIV class="new-table-title"><XLAT.STREAM KEY="dvin/UI/Admin/Offset"/></DIV></TD>
				</TR>
	
				<setvar NAME="tablename" VALUE="WorkflowAsgActions"/>
				<execsql LIST="tmp" SQL="select * from Variables.tablename"/>
	
				<TR>
                		<TD  ALIGN="LEFT" BGCOLOR="#DFDFDF">
                    		<SELECT NAME="tact" SIZE="6">
					<loop LIST="tmp">
                    			<option VALUE="tmp.id" REPLACEALL="tmp.id"/><STRING.STREAM VALUE="tmp.name"/>
					</loop>
					</SELECT>
				</TD>

				<TD  VALIGN="top">
                    		<INPUT TYPE="TEXT" SIZE="5" MAXLENGTH="20" NAME="todays" VALUE="00"/>
				</TD>

				<TD  VALIGN="top">
                    		<SELECT NAME="tohours" SIZE="1">
						<setcounter NAME="HR" VALUE="0"/>
						<loop FROM="0" COUNT="24">
                        			<OPTION VALUE="Counters.HR" REPLACEALL="Counters.HR"/><STRING.STREAM VALUE="Counters.HR"/>
							<inccounter NAME="HR" VALUE="1"/>
						</loop>
                    		</SELECT>
				</TD>
				<TD  VALIGN="top">
                    		<SELECT NAME="towhen" SIZE="2">
							<setvar NAME="errno" VALUE="0"/>
                        			<OPTION VALUE="Before"/><XLAT.STREAM KEY="dvin/UI/Admin/BeforeDeadline"/>
                        			<OPTION VALUE="After"/><XLAT.STREAM KEY="dvin/UI/Admin/AfterDeadline"/>
                    		</SELECT>
				</TD>
				</TR>
				</TABLE>
				</td>
			</tr>
			<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
			<INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/WorkflowStatusCodeFront"/>                
			<INPUT TYPE="HIDDEN" NAME="action" VALUE="new"/>
			<INPUT TYPE="HIDDEN" NAME="subaction" VALUE="addaction"/>  
			<tr>
				<td></td>
				<td><br/></td>
				<td class="form-inset">
					<A HREF="javascript:void(0);" onClick="if(TActsCancel(this)!=false){document.forms['AppForm'].submit();return false;}"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
					<A HREF="javascript:void(0);" onClick="if(Add()!=false){document.forms['AppForm'].submit();return false;}"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/AddTimedAction"/></CALLELEMENT></A>
				</td>
			</tr>
		</table>
	</td></tr>
</table>
		</then>
		</if><!-- newaction -->
</then>        
</if>


</FTCS>
