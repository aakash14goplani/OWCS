<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<PROPERTY.GET PARAM="xcelerate.charset" INIFILE="futuretense_xcel.ini" VARNAME="charset"/>
<SETVAR NAME="cs.contenttype" VALUE="text/html; charset=Variables.charset"/>

<!-- 
$Logfile: /VerticalApps/XcelerateC/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Admin/InstallClass.xml $ 
$Revision: 26 $ 
$Modtime: 3/03/04 10:08a $ 
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- InstallClass.xml
-
- DESCRIPTION
-	Allow developers to manually install and deinstall a Java class.  
-	Calls the Install or Deinstall method of the named class.  
-
-	For NAS, the class must be in the CLASSPATH when NAS is started.
-
-       This element should only be installed on development systems.
-	It is not secure for live production systems.  A proper installer
-	should be built to do production installations.
- 
- HISTORY 
-->

<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/BasicEnvironment"/>
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>
<STRING.ENCODE VARIABLE="cs_formmode" VARNAME="cs_formmode"/>
<STRING.ENCODE VARIABLE="cs_environment" VARNAME="cs_environment"/>
<HTML>
<HEAD>
<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/StandardHeader"/>
</HEAD>

<!-- first check to see if the user is logged in or not -->
<SETVAR NAME="errno" VALUE="0"/>
<USERISMEMBER GROUP="xceldevel"/>
<if COND="Variables.errno=0">
	<then>
        <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/Util/ShowError" outstring="urlshowerror">
            <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
            <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                                          <satellite.argument name="error" value="AdminTimeoutError"/>
                                           </SATELLITE.LINK>
		<REPLACE STR="Variables.urlshowerror">
			<script LANGUAGE="JavaScript">
				parent.parent.location="Variables.urlshowerror";
			</script>
		</REPLACE>
		<throwexception/>
	</then>
</if>
<BODY BGCOLOR="#FFFFFF">

<!-- type is either front or post -->
<if COND="Variables.pagetype=front">
<then>
    <setvar NAME="approot" VALUE="CS.Property.ft.approot"/>

    <SATELLITE.FORM ASSEMBLER="query" ENCTYPE="application/x-www-form-urlencoded" METHOD="post">
    <INPUT TYPE="HIDDEN" NAME="_charset_" VALUE="Variables.charset" REPLACEALL="Variables.charset"/>
    <INPUT TYPE="hidden"  NAME="cs_environment" VALUE="Variables.cs_environment" REPLACEALL="Variables.cs_environment"/>
    <INPUT TYPE="hidden"  NAME="cs_formmode" VALUE="Variables.cs_formmode" REPLACEALL="Variables.cs_formmode"/>
    <XLAT.STREAM KEY="dvin/Common/Class"/>: <INPUT NAME="class" SIZE="32" TYPE="TEXT" VALUE="com.openmarket.xcelerate."/>
    <BR/><XLAT.STREAM KEY="dvin/UI/Admin/Arg1PoptionalP"/>: <INPUT NAME="arg1" SIZE="32" TYPE="TEXT"/>
    <BR/>
    <INPUT TYPE="HIDDEN" NAME="pagename" VALUE="OpenMarket/Xcelerate/Admin/InstallClass"/>
    <INPUT TYPE="HIDDEN" NAME="pagetype" VALUE="post"/>
    <INPUT TYPE="SUBMIT" NAME="method" VALUE="Install"/>
    <INPUT TYPE="SUBMIT" NAME="method" VALUE="Deinstall"/>

    </SATELLITE.FORM>

</then>
</if>

<if COND="Variables.pagetype=post">
<then>

    <P><XLAT.STREAM KEY="dvin/UI/Admin/Performingmethodforclass"/>
    <if COND="IsVariable.arg1=true">
    <then>
	<XLAT.STREAM KEY="dvin/UI/Admin/ARG1EQarg1"/>
    </then>
    </if>
    </P>

    <setvar NAME="errno" VALUE="0"/>
    <if COND="Variables.method=Install">
    <then>
        <if COND="IsVariable.arg1=false">
	<then>
	    <OBJECT.INSTALL CLASS="Variables.class"/>
	</then>
	<else>
	    <OBJECT.INSTALL CLASS="Variables.class" ARG1="Variables.arg1"/>
	</else>
	</if>
    </then>
    </if>

    <if COND="Variables.method=Deinstall">
    <then>
        <if COND="IsVariable.arg1=false">
	<then>
	    <OBJECT.DEINSTALL CLASS="Variables.class"/>
	</then>
	<else>
	    <OBJECT.DEINSTALL CLASS="Variables.class" ARG1="Variables.arg1"/>
	</else>
	</if>
    </then>
    </if>

    <P>
    <XLAT.STREAM KEY="dvin/UI/Error/ErrnoEQerrno" errno="Variables.errno" EVALALL="false"/>
    </P>

</then>
</if>    

</BODY>
</HTML>
</FTCS>
