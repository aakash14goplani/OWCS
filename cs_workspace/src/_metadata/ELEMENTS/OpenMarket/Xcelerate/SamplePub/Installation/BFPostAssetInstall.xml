<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateC/install/Xcelerate/StarterPub/ElementCatalog/OpenMarket/Xcelerate/SamplePub/Installation/BFPostAssetInstall.xml $
$Revision: 16 $ 
$Modtime: 3/04/04 8:01a $ 
-->
<!-- OpenMarket/Xcelerate/SamplePub/Installation/BFPostAssetInstall
--
--		Establishes sample associations for Burlington Financial
-- INPUT
--
-- OUTPUT
--
-->

<!-- Enable asset types -->
<PUBLICATION.LIST LIST="PubRoot" FIELD1="name" VALUE1="BurlingtonFinancial"/>
<IF COND="IsList.PubRoot=true">
<THEN>
<!-- Add sample Article Associations -->
	<STRINGLIST NAME="AssetTypesToEnable" STR="Article,Image,Template,Collection,Query,Page,ImageFile,StyleSheet" DELIM=","/>
	<LOOP LIST="AssetTypesToEnable">
		<!-- check to see if the Asset type is already enabled -->
		<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/AssetMgt/EnableAssetTypePub">
			<ARGUMENT NAME="upcommand" VALUE="IsAssetTypeEnabled"/>
			<ARGUMENT NAME="assettype" VALUE="AssetTypesToEnable.ITEM"/>
			<ARGUMENT NAME="pubid" VALUE="PubRoot.id"/>
		</CALLELEMENT>
		<IF COND="Variables.IsAuthorized=false">
		<THEN>
			<setvar NAME="errno" VALUE="0"/>
			<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/AssetMgt/EnableAssetTypePub">
				<ARGUMENT NAME="upcommand" VALUE="EnableAssetType"/>
				<ARGUMENT NAME="assettype" VALUE="AssetTypesToEnable.ITEM"/>
				<ARGUMENT NAME="pubid" VALUE="PubRoot.id"/>
			</CALLELEMENT>
		</THEN>
		</IF>
	</LOOP>
</THEN>
</IF>


<!-- For each one, if it isn't already there add it -->
<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Article" NAME="SidebarTop"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="SidebarTop"/>
         <ASSOCNAMED.setName NAME="SidebarTop"  VALUE="SidebarTop"/>
         <ASSOCNAMED.setType NAME="SidebarTop"    VALUE="Article"/>
         <ASSOCNAMED.setChildType NAME="SidebarTop"    VALUE="Collection"/>
         <ASSOCNAMED.setDescription NAME="SidebarTop"    VALUE="Sidebar Top"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="SidebarTop"/> 
    </THEN>
</IF>                        

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Article" NAME="SidebarBottom"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="SidebarBottom"/>
         <ASSOCNAMED.setName NAME="SidebarBottom"  VALUE="SidebarBottom"/>
         <ASSOCNAMED.setType NAME="SidebarBottom"    VALUE="Article"/>
         <ASSOCNAMED.setChildType NAME="SidebarBottom"    VALUE="Collection"/>
         <ASSOCNAMED.setDescription NAME="SidebarBottom"    VALUE="Sidebar Bottom"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="SidebarBottom"/> 
    </THEN>
</IF>                        

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Article" NAME="RelatedStories"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="RelatedStories"/>
         <ASSOCNAMED.setName NAME="RelatedStories"  VALUE="RelatedStories"/>
         <ASSOCNAMED.setType NAME="RelatedStories"    VALUE="Article"/>
         <ASSOCNAMED.setChildType NAME="RelatedStories"    VALUE="Collection"/>
         <ASSOCNAMED.setDescription NAME="RelatedStories"    VALUE="Related Stories"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="RelatedStories"/> 
    </THEN>
</IF> 

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Article" NAME="PopularTopics"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="PopularTopics"/>
         <ASSOCNAMED.setName NAME="PopularTopics"  VALUE="PopularTopics"/>
         <ASSOCNAMED.setType NAME="PopularTopics"    VALUE="Article"/>
         <ASSOCNAMED.setChildType NAME="PopularTopics"    VALUE="Query"/>
         <ASSOCNAMED.setDescription NAME="PopularTopics"    VALUE="Popular Topics"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="PopularTopics"/> 
    </THEN>
</IF>                        

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Article" NAME="TransSpanish"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="TransSpanish"/>
         <ASSOCNAMED.setName NAME="TransSpanish"  VALUE="TransSpanish"/>
         <ASSOCNAMED.setType NAME="TransSpanish"    VALUE="Article"/>
         <ASSOCNAMED.setChildType NAME="TransSpanish"    VALUE="Article"/>
         <ASSOCNAMED.setDescription NAME="TransSpanish"    VALUE="Spanish Translation"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="TransSpanish"/> 
    </THEN>
</IF>                        

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Article" NAME="TransFrench"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="TransFrench"/>
         <ASSOCNAMED.setName NAME="TransFrench"  VALUE="TransFrench"/>
         <ASSOCNAMED.setType NAME="TransFrench"    VALUE="Article"/>
         <ASSOCNAMED.setChildType NAME="TransFrench"    VALUE="Article"/>
         <ASSOCNAMED.setDescription NAME="TransFrench"    VALUE="French Translation"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="TransFrench"/> 
    </THEN>
</IF>                        

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Article" NAME="TransGerman"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="TransGerman"/>
         <ASSOCNAMED.setName NAME="TransGerman"  VALUE="TransGerman"/>
         <ASSOCNAMED.setType NAME="TransGerman"    VALUE="Article"/>
         <ASSOCNAMED.setChildType NAME="TransGerman"    VALUE="Article"/>
         <ASSOCNAMED.setDescription NAME="TransGerman"    VALUE="German Translation"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="TransGerman"/> 
    </THEN>
</IF>                        

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Article" NAME="SpotImageFile"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="SpotImageFile"/>
			<SETVAR NAME="item:name" VALUE="SpotImageFile"/>
			<SETVAR NAME="item:description" VALUE="Spot ImageFile"/>
			<SETVAR NAME="item:assettype" VALUE="Article"/>
			<SETVAR NAME="item:childassettype" VALUE="ImageFile"/>
			<SETVAR NAME="item:subtypes" VALUE="Standard;F"/>
			<SETVAR NAME="item:deptype" VALUE="E"/>
			<ASSOCNAMED.GATHER NAME="SpotImageFile" PREFIX="item:"/>
        	<ASSOCNAMEDMANAGER.SAVE OBJECT="SpotImageFile"/>
    </THEN>
</IF>                        

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Article" NAME="MainImageFile"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="MainImageFile"/>
         <ASSOCNAMED.setName NAME="MainImageFile"  VALUE="MainImageFile"/>
         <ASSOCNAMED.setType NAME="MainImageFile"    VALUE="Article"/>
         <ASSOCNAMED.setChildType NAME="MainImageFile"    VALUE="ImageFile"/>
         <ASSOCNAMED.setDescription NAME="MainImageFile"    VALUE="Main ImageFile"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="MainImageFile"/> 
    </THEN>
</IF> 

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Article" NAME="TeaserImageFile"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="TeaserImageFile"/>
         <ASSOCNAMED.setName NAME="TeaserImageFile"  VALUE="TeaserImageFile"/>
         <ASSOCNAMED.setType NAME="TeaserImageFile"    VALUE="Article"/>
         <ASSOCNAMED.setChildType NAME="TeaserImageFile"    VALUE="ImageFile"/>
         <ASSOCNAMED.setDescription NAME="TeaserImageFile"    VALUE="Teaser ImageFile"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="TeaserImageFile"/> 
    </THEN>
</IF>                        

<!-- Add sample Page Associations -->

<ASSETTYPE.LOAD NAME="PageAT" TYPE="Page" />
<ASSETTYPE.GET NAME="PageAT" FIELD="id" OUTPUT="PageId"/>

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Page" NAME="TopStories"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="TopStories"/>
         <ASSOCNAMED.setName NAME="TopStories"  VALUE="TopStories"/>
         <ASSOCNAMED.setType NAME="TopStories"    VALUE="Page"/>
         <ASSOCNAMED.setChildType NAME="TopStories"    VALUE="Collection"/>
         <ASSOCNAMED.setDescription NAME="TopStories"    VALUE="Top Stories"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="TopStories"/> 
    </THEN>
</IF>                        

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Page" NAME="WireFeed"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="WireFeed"/>
         <ASSOCNAMED.setName NAME="WireFeed"  VALUE="WireFeed"/>
         <ASSOCNAMED.setType NAME="WireFeed"    VALUE="Page"/>
         <ASSOCNAMED.setChildType NAME="WireFeed"    VALUE="Query"/>
         <ASSOCNAMED.setDescription NAME="WireFeed"    VALUE="WireFeed"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="WireFeed"/> 
    </THEN>
</IF>                        

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Page" NAME="HomeStoryGroups"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="HomeStoryGroups"/>
         <ASSOCNAMED.setName NAME="HomeStoryGroups"  VALUE="HomeStoryGroups"/>
         <ASSOCNAMED.setType NAME="HomeStoryGroups"    VALUE="Page"/>
         <ASSOCNAMED.setChildType NAME="HomeStoryGroups"    VALUE="Collection"/>
         <ASSOCNAMED.setDescription NAME="HomeStoryGroups"    VALUE="HomeStoryGroups"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="HomeStoryGroups"/> 
    </THEN>
</IF>                        

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Page" NAME="SectionHighlight"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="SectionHighlight"/>
         <ASSOCNAMED.setName NAME="SectionHighlight"  VALUE="SectionHighlight"/>
         <ASSOCNAMED.setType NAME="SectionHighlight"    VALUE="Page"/>
         <ASSOCNAMED.setChildType NAME="SectionHighlight"    VALUE="Collection"/>
         <ASSOCNAMED.setDescription NAME="SectionHighlight"    VALUE="Section Highlight"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="SectionHighlight"/> 
    </THEN>
</IF>  

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Page" NAME="PopularTopics"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="PopularTopics"/>
         <ASSOCNAMED.setName NAME="PopularTopics"  VALUE="PopularTopics"/>
         <ASSOCNAMED.setType NAME="PopularTopics"    VALUE="Page"/>
         <ASSOCNAMED.setChildType NAME="PopularTopics"    VALUE="Query"/>
         <ASSOCNAMED.setDescription NAME="PopularTopics"    VALUE="Popular Topics"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="PopularTopics"/> 
    </THEN>
</IF>  

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Page" NAME="SidebarTop"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="SidebarTop"/>
         <ASSOCNAMED.setName NAME="SidebarTop"  VALUE="SidebarTop"/>
         <ASSOCNAMED.setType NAME="SidebarTop"    VALUE="Page"/>
         <ASSOCNAMED.setChildType NAME="SidebarTop"    VALUE="Collection"/>
         <ASSOCNAMED.setDescription NAME="SidebarTop"    VALUE="Sidebar Top"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="SidebarTop"/> 
    </THEN>
</IF>   

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Page" NAME="SidebarMiddle"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="SidebarMiddle"/>
         <ASSOCNAMED.setName NAME="SidebarMiddle"  VALUE="SidebarMiddle"/>
         <ASSOCNAMED.setType NAME="SidebarMiddle"    VALUE="Page"/>
         <ASSOCNAMED.setChildType NAME="SidebarMiddle"    VALUE="Collection"/>
         <ASSOCNAMED.setDescription NAME="SidebarMiddle"    VALUE="Sidebar Middle"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="SidebarMiddle"/> 
    </THEN>
</IF>    

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Page" NAME="SidebarBottom"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="SidebarBottom"/>
         <ASSOCNAMED.setName NAME="SidebarBottom"  VALUE="SidebarBottom"/>
         <ASSOCNAMED.setType NAME="SidebarBottom"    VALUE="Page"/>
         <ASSOCNAMED.setChildType NAME="SidebarBottom"    VALUE="Collection"/>
         <ASSOCNAMED.setDescription NAME="SidebarBottom"    VALUE="Sidebar Bottom"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="SidebarBottom"/> 
    </THEN>
</IF>    

<ASSOCNAMEDMANAGER.FIND   PREFIX="AssetRelations:" TYPE="Page" NAME="RecentStories"/>
 <IF COND="Variables.AssetRelations:Total=0">
    <THEN>
         <ASSOCNAMEDMANAGER.CREATE   OBJVARNAME="RecentStories"/>
         <ASSOCNAMED.setName NAME="RecentStories"  VALUE="RecentStories"/>
         <ASSOCNAMED.setType NAME="RecentStories"    VALUE="Page"/>
         <ASSOCNAMED.setChildType NAME="RecentStories"    VALUE="Collection"/>
         <ASSOCNAMED.setDescription NAME="RecentStories"    VALUE="Recent Stories"/>
         <ASSOCNAMEDMANAGER.SAVE OBJECT="RecentStories"/> 
    </THEN>
</IF>                        

<!-- add a start menu item for Artcile subtype, Columnist -->
<STARTMENU.LOAD NAME="New Columnist Article" ITEMTYPE="ContentForm" OBJVARNAME="smi"/>
<STARTMENUITEM.SCATTER NAME="smi" PREFIX="item:"/>
<SETVAR NAME="item:name" VALUE="New Columnist Article"/>
<SETVAR NAME="item:itemtype" VALUE="ContentForm"/>
<SETVAR NAME="item:legalrolesroles" VALUE="Analyst,Author,Designer"/>
<SETVAR NAME="item:legalsitessites" VALUE="PubRoot.id"/>
<SETVAR NAME="item:assettype" VALUE="Article"/>
<!-- default argument = subtype -->
<SETVAR NAME="item:argumentsargumentTotal" VALUE="3"/>
<SETVAR NAME="item:argumentsargument0name" VALUE="subtype"/>
<SETVAR NAME="item:argumentsargument0value" VALUE="Columnist"/>
<SETVAR NAME="item:argumentsargument1name" VALUE="template"/>
<SETVAR NAME="item:argumentsargument1value" VALUE="Columnist"/>
<SETVAR NAME="item:argumentsargument2name" VALUE="source"/>
<SETVAR NAME="item:argumentsargument2value" VALUE="BurlingtonFinancial"/>
<STARTMENUITEM.GATHER NAME="smi" PREFIX="item:"/>
<SETVAR NAME="errno" VALUE="0"/>
<STARTMENU.SAVE OBJECT="smi"/>


                     
##SUCCESS##
</FTCS> 
