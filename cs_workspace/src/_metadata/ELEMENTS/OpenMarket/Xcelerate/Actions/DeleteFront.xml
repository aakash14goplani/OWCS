<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">

<FTCS Version="1.1">
<!--
$Logfile: /VerticalApps/XcelerateD/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Actions/DeleteFront.xml $
$Revision: 85 $
$Modtime: 7/15/04 1:20p $
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- DeleteFront.xml
-
- DESCRIPTION
-	Delete a content item
-
- INPUT
-	Variables.id
-	Variables.AssetType
-	ParentList - list of assets referencing this asset
-       EmbeddedRefsList - list of assets referencing this asset within their text fields
-	SitesList - list of sites the asset is shared to
-->

<INPUT TYPE="hidden" NAME="upcommand" VALUE="delete"/>

<SCRIPT LANGUAGE="JavaScript">
var ccsourceid = '<STRING.STREAM VARIABLE="ccsourceid" />';
<![CDATA[

function SetCancelFlag () {
	var obj = document.forms[0].elements[0];
	obj.form.elements['upcommand'].value="cancel";
	if (ccsourceid.length > 0 && ccsourceid != 'Variables.ccsourceid')
	    obj.form.elements['id'].value = ccsourceid;
	obj.form.submit();
	return false;
}
]]>
</SCRIPT>

<!-- check to see if the item is deletable:

- this is done by calling an element associated with the asset to see if
 it is thinks that it is deletable

-->
<STRING.ENCODE VARIABLE="urlInspectItem" VARNAME="urlInspectItem"/>
<STRING.ENCODE VARIABLE="doproceed" VARNAME="doproceed"/>
<STRING.ENCODE VARIABLE="AssetType" VARNAME="AssetType"/>
<STRING.ENCODE VARIABLE="id" VARNAME="id"/>

<if COND="Variables.doproceed=true">
<then>
	<setvar NAME="CheckDelete" VALUE="OpenMarket/Xcelerate/AssetType/Variables.AssetType/CheckDelete"/>
	<if COND="IsElement.Variables.CheckDelete=true">
	<then>
	    <callelement NAME="Variables.CheckDelete"/>
	    <if COND="Variables.candelete=false">
	    <then>
	    	<if COND="Variables.errorhandled!=true">
	    	<then>
				<div class="width-outer-70">
				<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
					<ARGUMENT NAME="elem" VALUE="DeleteFailed"/>
					<ARGUMENT NAME="severity" VALUE="error"/>
				</CALLELEMENT>
				</div>
			</then>
			</if>
 		<setvar NAME="doproceed" VALUE="false"/>
	    </then>
	    </if>
	</then>
	</if>
</then>
<else>
  <!-- This ErrorMessage is automatically caputured through Exception Famework because it goes to ShowError which calls ShowMessage -->
  <callelement NAME="OpenMarket/Xcelerate/Actions/Util/ShowError">
      <argument NAME="error" VALUE="Variables.doproceed"/>
  </callelement>
  <setvar NAME="doproceed" VALUE="false"/>
</else>
</if>

<!-- check to see whether this asset is publish start point-->
<if COND="Variables.doproceed=true">
<then>
	<selectto LIST="dest" WHAT="id,name" FROM="PubTarget"/>
	<if COND="IsList.dest=true">
	<then>
		<LOOP LIST="dest">
    		<ApprovedAssets.GetPerm TARGET="dest.id" ASSETID="Variables.id" OBJVARNAME="publishpoints" />
    		<PUBLISHPOINTS.GetAll NAME="publishpoints" PREFIX="refs" />
    		<if COND="Variables.refsTotal!=0">
    		<then>
			<SETVAR NAME="doproceed" VALUE="false"/>
			<!-- This ErrorMessage is automatically through XLAT because it is in the Error package-->
			<p><XLAT.STREAM KEY="dvin/UI/Error/CantDeleteAssetIsDefinedAsPublishPoint"/></p>
    		</then>
    		</if>
		</LOOP>
	</then>
	</if>
</then>
</if>

<!-- check to see whether other assets refer to it-->
<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir" />
<if COND="Variables.doproceed=true">
<then>
	<!-- Action bar -->
	<if COND="Variables.cs_environment!=ucform">
		<then>
			<SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/ContentDetailsFront" outstring="InspectURL">
				<satellite.argument name="cs_environment" value="Variables.cs_environment"/>
				<satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
				<satellite.argument name="AssetType" value="Variables.AssetType"/>
				<satellite.argument name="id" value="Variables.id"/>
			</SATELLITE.LINK>
			<div>
				<div class='toolbarContent'>
					<TABLE><tr>
						<td align="left">
						  <XLAT.LOOKUP KEY="dvin/UI/GoBack" VARNAME="_GoBackXLAT_" ESCAPE="true"/>
							<XLAT.LOOKUP KEY="dvin/UI/GoBack" VARNAME="_GoBackALT_"/>
							<A HREF="Variables.InspectURL" onclick="" onmouseover="window.status='Variables._GoBackXLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._GoBackXLAT_,Variables.InspectURL">
								<IMG  onclick="this.src='Variables.cs_imagedir/../js/fw/images/ui/ui/toolbar/goBackClick.png';return true;" onmouseover="this.src='Variables.cs_imagedir/../js/fw/images/ui/ui/toolbar/goBackHover.png';return true;" onmouseout="this.src='Variables.cs_imagedir/../js/fw/images/ui/ui/toolbar/goBack.png'" src="Variables.cs_imagedir/../js/fw/images/ui/ui/toolbar/goBack.png" TITLE="Variables._GoBackALT_" ALT="Variables._GoBackALT_" BORDER="0" REPLACEALL="Variables.cs_imagedir,SessionVariables.locale,Variables._GoBackALT_"/>
							</A>						
						</td>
					</tr></TABLE>
				</div>
				<div id="msgArea"></div>
				<div class="toolbarBorder"></div>
			</div>
		</then>
	</if>
	<table cellpadding="0" cellspacing="0" border="0" class="width-outer-70">

	<tr>
		<td>
			<SETVAR NAME="titledisplayed" VALUE="false"/>
			<IF COND="IsList.ParentList=true">
				<THEN>
					<!-- Eliminate self-references.  Create a new list with columns otype and oid -->
					<LISTOBJECT.CREATE NAME="mylist" COLUMNS="otype,oid"/>
					<LOOP LIST="ParentList">
						<IF COND="ParentList.oid!=Variables.id">
						<THEN>
							<LISTOBJECT.ADDROW NAME="mylist" otype="ParentList.otype" oid="ParentList.oid"/>
						</THEN>
						</IF>
					</LOOP>
					<LISTOBJECT.TOLIST NAME="mylist" LISTVARNAME="ParentList"/>
					<IF COND="ParentList.#numRows!=0">
						<THEN>
							<SETVAR NAME="titledisplayed" VALUE="true"/>
							<!--  Explicitly set for AssetErrorMessage to Use -->
							<XLAT.LOOKUP KEY="dvin/UI/AssetTypeassetsreferencesInstruction" VARNAME="ERROR_ASSET_REF_MSG" ENCODE="false" />
							<LISTOBJECT.TOLIST NAME="mylist" LISTVARNAME="ERROR_ASSET_REF_LIST"/>

							<SETVAR NAME="doproceed" VALUE="false"/>
							<table cellpadding="0" cellspacing="0" border="0">
								<tr>
									<td colspan="5"><span class="subtitle-text"><XLAT.STREAM KEY="dvin/UI/ReferencingAssets"/></span></td>
								</tr>
								<tr>
									<td colspan="5" height="10"><img height="10" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
								<tr>
									<td colspan="5">
										<XLAT.STREAM KEY="dvin/UI/AssetTypeassetsreferencesInstruction" ENCODE="false"/>
									</td>
								</tr>
								<tr>
									<td colspan="5" height="10"><img height="10" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
								<tr>
									<td colspan="5" height="1" class="dark-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
								<tr>
									<td colspan="5" height="5"><img height="5" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
								<tr>
									<td>
		       							<span class="table-header-text"><XLAT.STREAM KEY="dvin/AT/Common/Name"/></span>
									</td>
									<td>&nbsp;&nbsp;&nbsp;</td>
									<td>
		       							<span class="table-header-text"><XLAT.STREAM KEY="dvin/AT/Common/Description"/></span>
									</td>
									<td>&nbsp;&nbsp;&nbsp;</td>
									<td>
		       							<span class="table-header-text"><XLAT.STREAM KEY="dvin/Common/Type"/></span>
									</td>
								</tr>
								<tr>
									<td colspan="5" height="5"><img height="5" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
								<tr>
									<td colspan="5" height="1" class="dark-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
								<tr>
									<td colspan="5" height="5"><img height="5" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>

								<LOOP LIST="ParentList">
									<ASSET.LOAD NAME="anAsset" TYPE="ParentList.otype" OBJECTID="ParentList.oid"/>
									<ASSET.GET NAME="anAsset" FIELD="name" OUTPUT="parentname"/>
									<ASSET.GET NAME="anAsset" FIELD="description" OUTPUT="parentdescription"/>
						 			<IF COND="Variables.assettype!=ParentList.otype">
										<THEN>
											<ASSET.GETASSETTYPE NAME="anAsset" OUTNAME="anAssetType"/>
											<ASSETTYPE.GET NAME="anAssetType" FIELD="description" OUTPUT="atdescription"/>
											<SETVAR NAME="assettype" VALUE="ParentList.otype"/>
										</THEN>
									</IF>

									<tr>
									<ASSET.SITES NAME="anAsset" LIST="isinPub" PUBID="SessionVariables.pubid"/>
									<if COND="IsError.Variables.errno=false">
									<then>
										<td>
											<XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="_XLAT_" ESCAPE="true"/>
						 					<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
												<ARGUMENT NAME="assettype" VALUE="Variables.assettype"/>
												<ARGUMENT NAME="assetid" VALUE="ParentList.oid"/>
												<ARGUMENT NAME="varname" VALUE="urlInspectItem"/>
												<ARGUMENT NAME="function" VALUE="inspect"/>
											</CALLELEMENT>
											
											<A HREF="Variables.urlInspectItem" OnMouseOver="window.status='Variables._XLAT_'; return true" OnMouseOut="return window.status='';" REPLACEALL="Variables.urlInspectItem,Variables._XLAT_">
										    		<STRING.STREAM VARIABLE="parentname"/>
						    					</A>
						    				</td>
						    				<td></td>
										<td>
											<XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="_XLAT_" ESCAPE="true"/>
											<A HREF="Variables.urlInspectItem" OnMouseOver="window.status='Variables._XLAT_'; return true" OnMouseOut="return window.status='';"  REPLACEALL="Variables.urlInspectItem,Variables._XLAT_">
												<STRING.STREAM VARIABLE="parentdescription"/>
											</A>
										</td>
						    				<td></td>
									</then>
									<else>
										<ASSET.SITES NAME="anAsset" LIST="sites"/>
										<td colspan="3">
											<XLAT.STREAM KEY="dvin/UI/ReferencingAssetinAnotherSite"/>
											(<setvar NAME="needComma" VALUE="false"/>
											<LOOP LIST="sites">
												<if COND="Variables.needComma=true">
												<then>,
												</then>
												</if>
												<STRING.STREAM LIST="sites" COLUMN="description"/>
												<setvar NAME="needComma" VALUE="true"/>
											</LOOP>)
										</td><td></td>
									</else>
									</if>
									<td><STRING.STREAM VARIABLE="atdescription"/></td>
									</tr>
								</LOOP>
								<tr>
									<td colspan="5" height="15"><img height="15" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
							</table>
						</THEN>
					</IF>
				</THEN>
			</IF>

			<IF COND="IsList.EmbeddedRefsList=true">
				<THEN>
					<!-- Eliminate self-references.  Create a new list with columns otype and oid -->
					<LISTOBJECT.CREATE NAME="mylist" COLUMNS="otype,oid"/>
					<LOOP LIST="EmbeddedRefsList">
						<IF COND="EmbeddedRefsList.oid!=Variables.id">
						<THEN>
							<LISTOBJECT.ADDROW NAME="mylist" otype="EmbeddedRefsList.otype" oid="EmbeddedRefsList.oid"/>
						</THEN>
						</IF>
					</LOOP>
					<LISTOBJECT.TOLIST NAME="mylist" LISTVARNAME="EmbeddedRefsList"/>

					<IF COND="EmbeddedRefsList.#numRows!=0">
						<THEN>
							<!--  Explicitly set for AssetErrorMessage to Use -->
							<XLAT.LOOKUP KEY="dvin/UI/AssetTypeassetsreferencesEmbedded" VARNAME="ERROR_ASSET_EMBEDREF_MSG" ENCODE="false"/>
							<LISTOBJECT.TOLIST NAME="mylist" LISTVARNAME="ERROR_ASSET_EMBEDREF_LIST"/>

							<table cellpadding="0" cellspacing="0" border="0">
								<!-- only put the label up if it hasn't been displayed -->
								<IF COND="Variables.titledisplayed=false">
								<THEN>
									<SETVAR NAME="titledisplayed" VALUE="true"/>
									<tr>
										<td colspan="5"><span class="subtitle-text"><XLAT.STREAM KEY="dvin/UI/ReferencingAssets"/></span></td>
									</tr>
									<tr>
										<td colspan="5" height="10"><img height="10" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
									</tr>
								</THEN>
								</IF>
								<tr>
									<td colspan="5">
										<XLAT.STREAM KEY="dvin/UI/AssetTypeassetsreferencesEmbedded" ENCODE="false"/>
									</td>
								</tr>
								<tr>
									<td colspan="5" height="10"><img height="10" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
								<tr>
									<td colspan="5" height="1" class="dark-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
								<tr>
									<td colspan="5" height="5"><img height="5" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
								<tr>
									<td>
		       							<span class="table-header-text"><XLAT.STREAM KEY="dvin/AT/Common/Name"/></span>
									</td>
									<td>&nbsp;&nbsp;&nbsp;</td>
									<td>
		       							<span class="table-header-text"><XLAT.STREAM KEY="dvin/AT/Common/Description"/></span>
									</td>
									<td>&nbsp;&nbsp;&nbsp;</td>
									<td>
		       							<span class="table-header-text"><XLAT.STREAM KEY="dvin/Common/Type"/></span>
									</td>
								</tr>
								<tr>
									<td colspan="5" height="5"><img height="5" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
								<tr>
									<td colspan="5" height="1" class="dark-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
								<tr>
									<td colspan="5" height="5"><img height="5" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>

								<LOOP LIST="EmbeddedRefsList">
									<ASSET.LOAD NAME="anAsset" TYPE="EmbeddedRefsList.otype" OBJECTID="EmbeddedRefsList.oid"/>
									<ASSET.GET NAME="anAsset" FIELD="name" OUTPUT="embname"/>
									<ASSET.GET NAME="anAsset" FIELD="description" OUTPUT="embdescription"/>
						 			<IF COND="Variables.assettype!=EmbeddedRefsList.otype">
										<THEN>
											<ASSET.GETASSETTYPE NAME="anAsset" OUTNAME="anAssetType"/>
											<ASSETTYPE.GET NAME="anAssetType" FIELD="description" OUTPUT="atdescription"/>
											<SETVAR NAME="assettype" VALUE="EmbeddedRefsList.otype"/>
										</THEN>
									</IF>

									<tr>
									<ASSET.SITES NAME="anAsset" LIST="isinPub" PUBID="SessionVariables.pubid"/>
									<if COND="IsError.Variables.errno=false">
									<then>
										<td>
											<XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="_XLAT_" ESCAPE="true"/>
						 					<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
												<ARGUMENT NAME="assettype" VALUE="Variables.assettype"/>
												<ARGUMENT NAME="assetid" VALUE="EmbeddedRefsList.oid"/>
												<ARGUMENT NAME="varname" VALUE="urlInspectItem"/>
												<ARGUMENT NAME="function" VALUE="inspect"/>
											</CALLELEMENT>
											<A HREF="Variables.urlInspectItem" OnMouseOver="window.status='Variables._XLAT_'; return true" OnMouseOut="return window.status='';" REPLACEALL="Variables.urlInspectItem,Variables._XLAT_">
										    		<STRING.STREAM VARIABLE="embname"/>
						    					</A>
						    				</td>
						    				<td></td>
										<td>
											<XLAT.LOOKUP KEY="dvin/Common/InspectThisItem" VARNAME="_XLAT_" ESCAPE="true"/>
											<A HREF="Variables.urlInspectItem" OnMouseOver="window.status='Variables._XLAT_'; return true" OnMouseOut="return window.status='';"  REPLACEALL="Variables.urlInspectItem,Variables._XLAT_">
												<STRING.STREAM VARIABLE="embdescription"/>
											</A>
										</td>
						    				<td></td>
									</then>
									<else>
										<ASSET.SITES NAME="anAsset" LIST="sites"/>
										<td colspan="3">
											<XLAT.STREAM KEY="dvin/UI/ReferencingAssetinAnotherSite"/>
											(<setvar NAME="needComma" VALUE="false"/>
											<LOOP LIST="sites">
												<if COND="Variables.needComma=true">
												<then>,
												</then>
												</if>
												<STRING.STREAM LIST="sites" COLUMN="description"/>
												<setvar NAME="needComma" VALUE="true"/>
											</LOOP>)
										</td><td></td>
									</else>
									</if>
									<td><STRING.STREAM VARIABLE="atdescription"/></td>
									</tr>
								</LOOP>
								<tr>
									<td colspan="5" height="15"><img height="15" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
								</tr>
							</table>
						</THEN>
					</IF>
				</THEN>
			</IF>
			
		<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/CheckForGlobalAssets" />	
		<IF COND="Variables.isGlobal!=yes">
	      <THEN>
			<IF COND="IsList.SitesList=true">
			<THEN>
				<IF COND="SitesList.#numRows!=1">
				<THEN>
					<!--  Explicitly set for AssetErrorMessage to Use -->
					<XLAT.LOOKUP KEY="dvin/UI/AssetTypeassetsreferencesSites" VARNAME="ERROR_ASSET_SITES_MSG" ENCODE="false"/>

					<table cellpadding="0" cellspacing="0" border="0">
						<!-- only put the label up if it hasn't been displayed -->
						<IF COND="Variables.titledisplayed=false">
						<THEN>
							<SETVAR NAME="titledisplayed" VALUE="true"/>
							<tr>
								<td colspan="3"><span class="subtitle-text"><XLAT.STREAM KEY="dvin/UI/ReferencingAssets"/></span></td>
							</tr>
							<tr>
								<td colspan="3" height="10"><img height="10" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
							</tr>
						</THEN>
						</IF>
						<tr>
							<td colspan="3">
								<XLAT.STREAM KEY="dvin/UI/AssetTypeassetsreferencesSites" ENCODE="false"/>
							</td>
						</tr>
						<tr>
							<td colspan="3" height="10"><img height="10" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>
						<tr>
							<td colspan="3" height="1" class="dark-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>
						<tr>
							<td colspan="3" height="5"><img height="5" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>
						<tr>
							<td>
       							<span class="table-header-text"><XLAT.STREAM KEY="dvin/AT/Common/Name"/></span>
							</td>
							<td>&nbsp;&nbsp;&nbsp;</td>
							<td>
       							<span class="table-header-text"><XLAT.STREAM KEY="dvin/AT/Common/Description"/></span>
							</td>
						</tr>
						<tr>
							<td colspan="3" height="5"><img height="5" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>
						<tr>
							<td colspan="3" height="1" class="dark-line-color"><img height="1" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>
						<tr>
							<td colspan="3" height="5"><img height="5" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>
						<LOOP LIST="SitesList">
							<IF COND="SitesList.id!=SessionVariables.pubid">
							<THEN>
								<tr>
									<td>
										<STRING.STREAM LIST="SitesList" COLUMN="name"/>
									</td>
									<td></td>
									<td>
										<STRING.STREAM LIST="SitesList" COLUMN="description"/>
									</td>
								</tr>
							</THEN>
							</IF>
						</LOOP>
						<SETVAR NAME="doproceed" VALUE="false"/>
						<XLAT.LOOKUP KEY="fatwire/Alloy/UI/BelongsToOtherSites" VARNAME="BelongsToOtherSites"/>
						<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
							<argument NAME="msgtext" VALUE="Variables.BelongsToOtherSites"/>
							<argument NAME="severity" VALUE="warning"/>
						</callelement>
						<tr>
							<td colspan="3" height="15"><img height="15" width="1" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						</tr>
					</table>
				</THEN>
				</IF>
			</THEN>
			</IF>
         </THEN>
		</IF>

			<if COND="Variables.doproceed=true">
			<then>
				<!-- check to see if the table is tracked if so, then the current record must be locked by the current user -->
				<callelement NAME="OpenMarket/Xcelerate/Actions/RevisionTracking/CheckTrackingEnabled">
					<argument NAME="AssetType" VALUE="Variables.AssetType"/>
				</callelement>
			</then>
			</if>

				<if COND="Variables.doproceed=true">
				<then>
				    <!-- Asset title with asset name -->
					<tr>
						<td><span class="title-text"><XLAT.STREAM KEY="dvin/UI/DeleteatDescription"/>: </span><span class="title-value-text"><STRING.STREAM VARIABLE="name"/></span></td>
					</tr>

					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar">
						<argument NAME="SpaceBelow" VALUE="No"/>
					</callelement>

					<!-- all checks successful, proceed to completion -->
					<STRING.ENCODE VARIABLE="PostPage" VARNAME="PostPage" />
					<INPUT type="hidden" name="pagename" value="OpenMarket/Xcelerate/Actions/Variables.PostPage" REPLACEALL="Variables.PostPage"/>

					<setvar NAME="errno" VALUE="0"/>
					
					<callelement NAME="OpenMarket/Xcelerate/Actions/Util/InsertStdVariables"/>
					<STRING.ENCODE VARIABLE="alreadylocked" VARNAME="alreadylocked" />
					<INPUT type="hidden" name="alreadylocked" VALUE="Variables.alreadylocked" REPLACEALL="Variables.alreadylocked"/>
					<STRING.ENCODE VARIABLE="trackingenabled" VARNAME="trackingenabled" />
					<INPUT type="hidden" name="trackingenabled" VALUE="Variables.trackingenabled" REPLACEALL="Variables.trackingenabled"/>
					<P/>
					<XLAT.LOOKUP KEY="dvin/UI/AssetMgt/Delete-AreYouSure?" VARNAME="_xlat_delete"/>
					<tr><td>
					<!--  cannotdelete variable is used for if the delete asset is used in other place,
					 with out deleting that asset, we can not delete this.
					 In this case we are stoping: Are you sure you want to delete this item? message and disabling Delete button
					-->
					<if COND="IsVariable.cannotdelete!=true">
					<then>
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/ShowMessage">
						<argument NAME="msgtext" VALUE="Variables._xlat_delete"/>
						<argument NAME="severity" VALUE="warning"/>
					</callelement>
					</then>
					</if>
					</td></tr><tr><td>
					<table cellpadding="0" cellspacing="0" border="0">
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/Name"/>:</td>
						<td><img height="1" width="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
						<td class="form-inset"><STRING.STREAM VARIABLE="name"/></td>
					</tr>

					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/Description"/>:</td>
						<td></td>
						<td class="form-inset"><STRING.STREAM VARIABLE="description"/></td>
					</tr>

					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/AT/Common/Status"/>:</td>
						<td></td>
						<td class="form-inset">
						<XLAT.LOOKUP KEY="dvin/AT/Common/ShowStatus" VARNAME="_ShowStatus_"/>
						<XLAT.LOOKUP KEY="dvin/AT/Common/ShowStatus" VARNAME="mouseover" ESCAPE="true"/>
						<XLAT.LOOKUP KEY="dvin/AT/Common/StatusCode-Variables.statuscode" VARNAME="_statuscodedescription_" ENCODE="false"/>
	 					<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/GenerateLink">
							<ARGUMENT NAME="assettype" VALUE="Variables.AssetType"/>
							<ARGUMENT NAME="assetid" VALUE="Variables.id"/>
							<ARGUMENT NAME="varname" VALUE="urlShowStatus"/>
							<ARGUMENT NAME="function" VALUE="status"/>
						</CALLELEMENT>
				   <STRING.ENCODE VARIABLE="urlShowStatus" VARNAME="urlShowStatus"/>
                   <A HREF="Variables.urlShowStatus" TITLE="Variables._ShowStatus_" ONMOUSEOVER="window.status='Variables.mouseover';return true;" ONMOUSEOUT="window.status='';return true" REPLACEALL="Variables.urlShowStatus,Variables._ShowStatus_,Variables.mouseover"><STRING.STREAM VARIABLE="_statuscodedescription_"/></A>
						</td>
					</tr>
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/AT/Common/ID"/>:</td>
						<td></td>
						<td class="form-inset"><STRING.STREAM VARIABLE="id"/></td>
					</tr>
					
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/AT/Common/Created"/>:</td>
						<td></td>
						<td class="form-inset">
							<DATEFORMAT.GETDATETIME NAME="_FormatDate_" VALUE="Variables.createddate" VALUETYPE="jdbcdate"  VARNAME="createddate"/>
							<XLAT.STREAM KEY="dvin/UI/createddatebycreatedby"/>
						</td>
					</tr>
			
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/AT/Common/Modified"/>:</td>
						<td></td>
						<td class="form-inset">
						<DATEFORMAT.GETDATETIME NAME="_FormatDate_" VALUE="Variables.updateddate" VALUETYPE="jdbcdate"  VARNAME="updateddate"/>
						<XLAT.STREAM KEY="dvin/UI/updateddatebyupdatedby"/>
						</td>
					</tr>
						<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
					<tr>
						<td></td><td></td><td><XLAT.LOOKUP KEY="dvin/UI/CancelDelete" VARNAME="_XLAT_" ESCAPE="true"/>
						<A HREF="javascript:void(0)" onclick="return SetCancelFlag()" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
						<XLAT.LOOKUP KEY="dvin/UI/Deletethisitem" VARNAME="_XLAT_" ESCAPE="true"/>
						<if COND="IsVariable.cannotdelete!=true">
						<then>
						<A HREF="javascript:void(0)" onclick="document.forms[0].submit();return false;" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="dvin/Common/Delete"/></CALLELEMENT></A>
						</then>
						</if>
						</td>
					</tr>

					</table></td></tr>
				</then>
				</if>
		</td>
	</tr>




</table>
</then>
</if>
</FTCS>

