<?xml version="1.0" ?>
<!DOCTYPE ftcs SYSTEM "futuretense_cs.dtd">
<ftcs version="1.2">
<!-- OpenMarket/Xcelerate/Actions/AssetSecurityDetailsFront
-
- INPUT
-  	Variables.id	- asset id
-		Variables.AssetType - asset type
-
- OUTPUT
-
-->
<SCRIPT LANGUAGE="JavaScript">

<![CDATA[

function SetCancelFlag () {
	var obj = document.forms[0].elements[0];

	obj.form.elements['upcommand'].value="cancel";
	obj.form.submit();
	return false;
}
function checkfields()
{
	var obj = document.forms[0].elements[0];
	obj.form.submit();
	return false;
}
]]>
</SCRIPT>
<STRING.ENCODE VARIABLE="AssetType" VARNAME="AssetType"/>
<STRING.ENCODE VARIABLE="id" VARNAME="id"/>
<STRING.ENCODE VARIABLE="pubid" VARNAME="pubid"/>
<STRING.ENCODE VARIABLE="PostPage" VARNAME="PostPage"/>
<INPUT TYPE="hidden" NAME="pagename" VALUE="OpenMarket/Xcelerate/Actions/Variables.PostPage" REPLACEALL="Variables.PostPage"/>
<INPUT TYPE="hidden" NAME="upcommand" VALUE="submit"/>
<callelement NAME="OpenMarket/Xcelerate/Actions/Util/InsertStdVariables"/>

<!-- Load the asset type information -->
<ASSETTYPE.LOAD NAME="type" TYPE="Variables.AssetType"/>
<ASSETTYPE.SCATTER NAME="type" PREFIX="AssetTypeObj"/>

<!-- Load the asset -->
<setvar NAME="assetname" VALUE="theCurrentAsset"/>
<ASSET.LOAD TYPE="Variables.AssetType" OBJECTID="Variables.id" NAME="Variables.assetname"/>
<IF COND="IsError.Variables.errno=false">
<THEN>
	<!-- check whether we cna perform this function on this asset -->
	<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/AssetMgt/AccessCheck">
		<ARGUMENT NAME="assetObjectName" VALUE="theCurrentAsset"/>
		<ARGUMENT NAME="AssetType" VALUE="Variables.AssetType"/>
		<ARGUMENT NAME="pubid" VALUE="SessionVariables.pubid"/>
		<ARGUMENT NAME="id" VALUE="Variables.id"/>
		<ARGUMENT NAME="Function" VALUE="authorize"/>
	</CALLELEMENT>
	<IF COND="Variables.error!=Variables.empty">
	<THEN>
		<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Util/ShowError">
			<ARGUMENT NAME="error" VALUE="Variables.error"/>
		</CALLELEMENT>
	</THEN>
	<ELSE>
		<ASSET.GET NAME="Variables.assetname" FIELD="id" OUTPUT="id"/>
		<WORKFLOWASSET.LOAD ASSETTYPE="Variables.AssetType" ID="Variables.id" OBJVARNAME="workflowasset" />
		<WORKFLOWENGINE.ISFUNCTIONLEGAL OBJECT="workflowasset" FUNCTIONNAME="authorize" SITE="SessionVariables.pubid" VARNAME="isLegal" MUSTBEASSIGNED="false"/>
		<IF COND="Variables.isLegal=false">
		<THEN>
            <CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Util/ShowError">
                <ARGUMENT NAME="error" VALUE="IllegalTransition"/>
            </CALLELEMENT>
	
            <!-- Display the details page -->
            <CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/ContentDetailsFront">
                <ARGUMENT NAME="assettype" VALUE="Variables.AssetType"/>
                <ARGUMENT NAME="id" VALUE="Variables.id"/>
            </CALLELEMENT>
       </THEN>
       <ELSE> <!-- privileges are ok -->
	       <CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/AssetMgt/GetContentDetails">
				<ARGUMENT NAME="getaux" VALUE="true"/>
				<ARGUMENT NAME="qryprefix" VALUE="ContentDetails"/>
				<ARGUMENT NAME="assetname" VALUE="Variables.assetname"/>
			</CALLELEMENT>
			<IF COND="IsError.Variables.errno=true">
			<THEN>
				<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Util/ShowError">
					<ARGUMENT NAME="error" VALUE="InvalidContentId"/>
				</CALLELEMENT>
			</THEN>
			<ELSE>
				<!-- Action bar -->
			    <CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/ActionsBar">
			    </CALLELEMENT>
				<table border="0" cellpadding="0" cellspacing="0" class="width-outer-70">
			    <tr>
			        <td>
			            <span CLASS="title-text"><STRING.STREAM VARIABLE="AssetTypeObj:description"/>:</span>&nbsp;
			            <span CLASS="title-value-text"><STRING.STREAM VARIABLE="ContentDetails:name"/></span>
			        </td>
			    </tr>
			    <CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TitleBar">
			        <ARGUMENT NAME="SpaceBelow" VALUE="No"/>
			    </CALLELEMENT>
			
			    <tr>
			    	<td>
	            	<table border="0" cellpadding="0" cellspacing="0">

	                <!-- The beginning of Group 1 -->
	                <tr>
                    <td class="form-label-text"><XLAT.STREAM KEY="dvin/AT/Common/Name"/>:</td>
					<STRING.ENCODE VARIABLE="cs_imagedir" VARNAME="cs_imagedir"/>
                    <td><img height="1" width="5" src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" REPLACEALL="Variables.cs_imagedir"/></td>
                    <td class="form-inset">
                        <STRING.STREAM VARIABLE="ContentDetails:name"/>
                    </td>
                	</tr>

                	<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
                	<tr>
                    <td class="form-label-text"><XLAT.STREAM KEY="dvin/AT/Common/Description"/>:</td>
                    <td></td>
                    <td class="form-inset">
                        <STRING.STREAM VARIABLE="ContentDetails:description"/>
                    </td>
                	</tr>

                	<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
                	<tr>
                    <td class="form-label-text"><XLAT.STREAM KEY="dvin/AT/Common/Status"/>:</td>
                    <td></td>
                    <td class="form-inset">
                        <XLAT.STREAM KEY="dvin/AT/Common/StatusCode-Variables.ContentDetails:status"/>
                    </td>
                	</tr>
                	<!-- Analyics Performance indicator -->
					<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/form/ShowAnalyticsKPI"/>
                	<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/AT/Common/Created"/>:</td>
						<td></td>
						<td class="form-inset">
							<DATEFORMAT.GETDATETIME NAME="_FormatDate_" VALUE="Variables.ContentDetails:createddate" VALUETYPE="jdbcdate"  VARNAME="ContentDetails:createddate"/>
							<XLAT.STREAM KEY="dvin/UI/ContentDetailscreateddatebycreatedby"/>
						</td>
					</tr>
			
                	<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
                	<tr>
                    <td class="form-label-text"><XLAT.STREAM KEY="dvin/AT/Common/Modified"/>:</td>
                    <td></td>
                    <td class="form-inset">
                        <DATEFORMAT.GETDATETIME NAME="_FormatDate_" VALUE="Variables.ContentDetails:updateddate" VALUETYPE="jdbcdate"  VARNAME="ContentDetails:updateddate"/>
                        <XLAT.STREAM KEY="dvin/UI/ContentDetailsupdateddatebyupdatedby"/>
                    </td>
                	</tr>
					<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
                	<tr>
	                	<td class="form-label-text"><XLAT.STREAM KEY="dvin/AT/Common/Permissions"/>:</td>
						<td><BR/></td>
						<td>
	                		<!-- show security details for basic functions-->
	                		<PROPERTY.GET PARAM="xcelerate.authorizefunctions" INIFILE="futuretense_xcel.ini" VARNAME="functionlist"/>
								<WORKFLOWENGINE.ISFUNCTIONLEGAL OBJECT="workflowasset" FUNCTIONNAME="authorize" SITE="SessionVariables.pubid" VARNAME="canChangePrivs" MUSTBEASSIGNED="false"/>
		                	<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/AssetMgt/SecurityDetails">
		                		<ARGUMENT NAME="canedit" VALUE="Variables.canChangePrivs"/>
		                		<ARGUMENT NAME="workflowobject" VALUE="workflowasset"/>
		                		<ARGUMENT NAME="functionlist" VALUE="Variables.functionlist"/>
		                	</CALLELEMENT>
	                	</td>
                	</tr>
					<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/FooterBar"/>
					<tr>
						<td><BR/></td>
						<td><BR/></td>
						<XLAT.LOOKUP KEY="dvin/UI/Cancel" VARNAME="_XLAT_" ESCAPE="true"/>
						<td align="left">
						<if cond="Variables.cs_environment!=ucform">
						<then>
							<A HREF="javascript:void(0)" onclick="return SetCancelFlag()" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Cancel"/></CALLELEMENT></A>
						</then>
						</if>
						<IF COND="Variables.canChangePrivs=true">
						<THEN>
							<XLAT.LOOKUP KEY="dvin/UI/Admin/AddFunctionPrivilege" VARNAME="_XLAT_" ESCAPE="true"/>
							<A HREF="javascript:void(0)" onclick="return checkfields();" onmouseover="window.status='Variables._XLAT_';return true;" onmouseout="window.status='';return true;" REPLACEALL="Variables._XLAT_"><CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/TextButton"><ARGUMENT NAME="buttonkey" VALUE="UI/Forms/Save"/></CALLELEMENT></A>
						</THEN>
						</IF>
						</td>
					</tr>
	            </table>
		        </td>
		    	</tr>
				</table>
 			</ELSE>
			</IF>
		</ELSE> <!-- end privileges are ok -->
		</IF>
	</ELSE>
	</IF>
</THEN>
<ELSE>
	<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Util/ShowError">
		<ARGUMENT NAME="error" VALUE="InvalidContentId"/>
	</CALLELEMENT>
</ELSE>
</IF>


</ftcs>