<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">

<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateC/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Actions/Publish/PublishOptions.xml $ 
$Revision: 45 $ 
$Modtime: 1/02/03 4:40p $ 
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- PublishOptions.xml
-
- DESCRIPTION
-	Show standard publish options available for all
-    content categories
-
- INPUTS
-    Variables.dest		Default PubDest id, or "none" if none. 
-    Variables.doproceed	"true"
-
-
- OUTPUT
-    Variables.doproceed	Changed to an error message id if an error 
-    				occurred.
-->

<PROPERTY.GET PARAM="xcelelem.publishoptions" INIFILE="futuretense_xcel.ini" VARNAME="proppublishoptions"/>

<if COND="Variables.proppublishoptions!=Variables.empty">
<then>
    <!-- use customized element -->
    <callelement NAME="Variables.proppublishoptions"/>
</then>
<else>
<TABLE>
    <TR>
        <!--TD ALIGN="LEFT" VALIGN="TOP"-->
        <TD class="form-label-text" style="padding-left:0;">
            <XLAT.STREAM KEY="dvin/UI/Publishdestination"/>
        </TD>
        <TD class="form-inset">
	    <setvar NAME="errno" VALUE="0"/>
 		<PUBTARGETMANAGER.FIND PREFIX="pbt" PUBID="SessionVariables.pubid" FILTERFORPUBLISH="true"/>
	    <if COND="Variables.pbtTotal=0">
	    <then>
		<setvar NAME="doproceed" VALUE="NoPublishDest"/>
	    </then>
	    <else>
	    <SETCOUNTER NAME="nthTarget" VALUE="0"/>
		<SELECT NAME="target" SIZE="1">
		<loop COUNT="Variables.pbtTotal">
		    <PUBTARGET.SCATTER NAME="pbtCounters.nthTarget" PREFIX="pubtgt:"/>
		    <DELIVERYTYPE.LOAD NAME="dtype" OBJECTID="Variables.pubtgt:type"/>
		    <DELIVERYTYPE.GET NAME="dtype" FIELD="name" OUTPUT="dtype:name"/>
		    <if COND="Variables.pubtgt:id!=Variables.dest">
		    <then>
			<OPTION VALUE="Variables.pubtgt:id" REPLACEALL="Variables.pubtgt:id"/><XLAT.STREAM KEY="dvin/UI/Publish/pubtgtnameLPusingpubdtnameRP"/>
		    </then>
		    <else>
			<OPTION VALUE="Variables.pubtgt:id" SELECTED="true" REPLACEALL="Variables.pubtgt:id"/><XLAT.STREAM KEY="dvin/UI/Publish/pubtgtnameLPusingpubdtnameRP"/>
		    </else>
		    </if>
		    <INCCOUNTER NAME="nthTarget" VALUE="1"/>
		</loop>
		</SELECT>
	    </else>
	    </if>
        </TD>
    </TR>

    <if COND="Variables.doproceed=true">
    <then>
	<!-- 
	- Let another element add publishing factors
	-->
		<PROPERTY.GET PARAM="xcelelem.publishfactors" INIFILE="futuretense_xcel.ini" VARNAME="proppublishfactors"/>
		<if COND="Variables.proppublishfactors!=Variables.empty">
		<then>
		    <!-- use customized element -->
		    <callelement NAME="Variables.proppublishfactors"/>
		</then>
		</if>
	</then>
	</if>
</TABLE>
</else>
</if>
</FTCS>
