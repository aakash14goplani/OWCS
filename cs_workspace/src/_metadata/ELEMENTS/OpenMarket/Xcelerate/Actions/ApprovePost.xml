<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Xcelerate/Actions/ApprovePost
-
- INPUT
-
-      Variables.assetTotal -- number of assets to be approved
-      Variables.id[X] -- asset id of Xth asset, X starts with 0
-      Variables.type[X] -- asset type of Xth asset, X starts with 0
-      Variables.targetid -- target id
-
- OUTPUT
-
-->
<STRING.ENCODE VARIABLE="id0" VARNAME="id0"/>
<STRING.ENCODE VARIABLE="type0" VARNAME="type0"/>
<STRING.ENCODE VARIABLE="targetid" VARNAME="targetid"/>
<STRING.ENCODE VARIABLE="AssetType" VARNAME="AssetType"/>
<STRING.ENCODE VARIABLE="targettype" VARNAME="targettype"/>
<STRING.ENCODE VARIABLE="pubtgt:name" VARNAME="pubtgt:name"/>

<IF COND="Variables.upcommand!=cancel">
<THEN>
	<!-- 
		Check if the current asset's start and end dates are valid
		and show a warning message if they are not.
	-->
	<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/WarnAssetApproval">
		<ARGUMENT NAME="id" VALUE="Variables.id0" />
		<ARGUMENT NAME="AssetType" VALUE="Variables.type0" />		
	</CALLELEMENT>
	
	<!-- report what assets got approved -->
	<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/ApprovalStatusFront">
		<ARGUMENT NAME="id" VALUE="Variables.id0"/>
		<ARGUMENT NAME="AssetType" VALUE="Variables.type0"/>
		<ARGUMENT NAME="target" VALUE="Variables.targetid"/>
	</CALLELEMENT>

	<setvar NAME="AssetType" VALUE="Variables.type0"/>
	<if COND="IsElement.OpenMarket/Xcelerate/AssetType/Variables.AssetType/ApprovePost=true">
	<then>
		<CALLELEMENT NAME="OpenMarket/Xcelerate/AssetType/Variables.AssetType/ApprovePost">
			<ARGUMENT NAME="id" VALUE="Variables.id0"/>
			<ARGUMENT NAME="AssetType" VALUE="Variables.AssetType"/>
			<ARGUMENT NAME="target" VALUE="Variables.targetid"/>
			<ARGUMENT NAME="targettype" VALUE="Variables.targettype"/>
			<ARGUMENT NAME="targetname" VALUE="Variables.pubtgt:name"/>
		</CALLELEMENT>
	</then>
	</if>

</THEN>
</IF>

<IF COND="Variables.upcommand=cancel">
<THEN>
	<!-- cancel -->
	<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/ContentDetailsFront">
		<ARGUMENT NAME="id" VALUE="Variables.id0"/>
		<ARGUMENT NAME="AssetType" VALUE="Variables.type0"/>
	</CALLELEMENT>
	<if COND="IsError.Variables.errno=true">
		<then>
		<if COND="Variables.errno!=-101">
			<then>
			<br/><XLAT.STREAM KEY="dvin/UI/Error/ContentDetailsFrontATidfailerrno" errno="Variables.errno" id="Variables.id" AssetType="Variables.AssetType" EVALALL="false"/>
			</then>
		</if>
		</then>
	</if>

</THEN>
</IF>


</FTCS>
