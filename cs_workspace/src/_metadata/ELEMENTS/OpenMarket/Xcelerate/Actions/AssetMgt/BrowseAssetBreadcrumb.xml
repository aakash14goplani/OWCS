<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- OpenMarket/Xcelerate/Actions/AssetMgt/BrowseAssetBreadcrumb
-
- INPUT
-
- OUTPUT
-	Variables.lastParent - will be set to the last parent id passed in
-->


<SATELLITE.LINK ASSEMBLER="query" OUTSTRING="BrowseSiteURL" PAGENAME="OpenMarket/Xcelerate/Actions/BrowseSiteFront">
    <SATELLITE.ARGUMENT NAME="cs_environment" VALUE="Variables.cs_environment"/>
    <SATELLITE.ARGUMENT NAME="cs_formmode" VALUE="Variables.cs_formmode"/>
</SATELLITE.LINK>
<TABLE CELLSPACING="0" CELLPADDING="0" BORDER="0" class="width-inner-100">
	<TR>
	<TD class="form-label-text"><XLAT.STREAM KEY="dvin/Common/Path"/>:</TD><TD>&nbsp;&nbsp;</TD>
	<TD class="form-inset"><A HREF="Variables.BrowseSiteURL" REPLACEALL="Variables.BrowseSiteURL"><STRING.STREAM VALUE="SessionVariables.PublicationName"/></A>
	</TD>
	</TR>
	<SETVAR NAME="spaceWidth" VALUE="0"/>
	<IF COND="IsVariable.p=true">
	<THEN>
		<stringlist NAME="pagelist" STR="Variables.p" DELIM=","/>
		<SETVAR NAME="plist" VALUE="Variables.empty"/>
		<LOOP LIST="pagelist">
		<TR>
		<TD></TD><TD></TD>
		<TD>
			<SETVAR NAME="tablename" VALUE="AssetPublication"/>
			<CALLELEMENT NAME="OpenMarket/Xcelerate/Util/validateFields">
				<ARGUMENT NAME="columnvalue" VALUE="pagelist.ITEM"/>
				<ARGUMENT NAME="type" VALUE="Long"/>
			</CALLELEMENT>
			<IF COND="Variables.validatedstatus=true">
			<THEN>
				<EXECSQL LIST="AssetParentList" SQL="SELECT assettype from AssetPublication where (pubid=SessionVariables.pubid OR pubid=0) AND assetid=pagelist.ITEM"/>
			</THEN>
			</IF>

			<SETVAR NAME="ctype" VALUE="AssetParentList.assettype"/>
			<ASSET.LOAD NAME="Parent" TYPE="Variables.ctype" OBJECTID="pagelist.ITEM"/>
			<ASSET.GET NAME="Parent" FIELD="name" OUTPUT="parentname"/>
			<CALCULATOR.GO VALUE="16 pagelist.#curRow 1 - *" VARNAME="spaceWidth"/>
			
			<IMG src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" HEIGHT="1" WIDTH="Variables.spaceWidth" REPLACEALL="Variables.cs_imagedir,Variables.spaceWidth"/>
			<IMG src="Variables.cs_imagedir/graphics/common/icon/iconPathEnd.gif" WIDTH="16" HEIGHT="13" ALT="" ALIGN="BOTTOM" REPLACEALL="Variables.cs_imagedir"/>
			<IF COND="Variables.plist!=Variables.empty">
			<THEN>
                <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/BrowseAssetChildren" outstring="BrowseURL">
                    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                        <satellite.argument name="c" value="Variables.ctype"/>
                        <satellite.argument name="p" value="Variables.plist"/>
                       <satellite.argument name="cid" value="pagelist.ITEM"/>
                        </SATELLITE.LINK>
				<A class="crumblink" HREF="Variables.BrowseURL" REPLACEALL="Variables.BrowseURL"><STRING.STREAM VALUE="Variables.parentname"/></A>
				<SETVAR NAME="plist" VALUE="Variables.plist,pagelist.ITEM"/>
			</THEN>
			<ELSE>
                <SATELLITE.LINK ASSEMBLER="query" pagename="OpenMarket/Xcelerate/Actions/BrowseAssetChildren" outstring="BrowseURL">
                    <satellite.argument name="cs_environment" value="Variables.cs_environment"/>
                    <satellite.argument name="cs_formmode" value="Variables.cs_formmode"/>
                        <satellite.argument name="c" value="Variables.ctype"/>
                       <satellite.argument name="cid" value="pagelist.ITEM"/>
                        </SATELLITE.LINK>
				<A class="crumblink" HREF="Variables.BrowseURL" REPLACEALL="Variables.BrowseURL"><STRING.STREAM VALUE="Variables.parentname"/></A>
				<SETVAR NAME="plist" VALUE="pagelist.ITEM"/>
			</ELSE>
			</IF>	
			</TD>
			</TR>
		</LOOP>
		<SETVAR NAME="lastParent" VALUE="pagelist.ITEM"/>
	</THEN>
	</IF> 
	<ASSET.GET NAME="Variables.assetname" FIELD="name"/>
		<TR>
			<TD></TD>
			<TD></TD>
			<CALCULATOR.GO VALUE="Variables.spaceWidth 16 + " VARNAME="spaceWidth"/>
			<TD><IMG src="Variables.cs_imagedir/graphics/common/screen/dotclear.gif" HEIGHT="1" WIDTH="Variables.spaceWidth" REPLACEALL="Variables.cs_imagedir,Variables.spaceWidth"/><IMG src="Variables.cs_imagedir/graphics/common/icon/iconPathEnd.gif" WIDTH="16" HEIGHT="13" ALT="" ALIGN="BOTTOM" REPLACEALL="Variables.cs_imagedir"/><STRING.STREAM VALUE="Variables.name"/></TD>
		</TR>

</TABLE>
</FTCS> 
