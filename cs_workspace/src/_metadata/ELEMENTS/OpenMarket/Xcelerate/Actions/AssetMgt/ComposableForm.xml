<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.2">
<!-- OpenMarket/Xcelerate/Actions/AssetMgt/ComposableForm
-
- INPUT
-	Variables.AssetType
- OUTPUT
-
-->

<!-- get a list of template names in this publication -->
<TEMPLATEMANAGER.GetTemplateNames LISTVARNAME="mytemplatenames" PUBID="SessionVariables.pubid"/>

<!-- get a list of asset types, enabled in this pub that are renderable using templates -->
<ASSET.GETLEGALSUBTYPES TYPE="Template" LIST="myassettypes" PUBID="SessionVariables.pubid"/>

<!--<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacerBar"/>-->
<tr>
	<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/Slots"/>:</td>
	<td></td>
	<td class="form-inset">
	<SETCOUNTER NAME="nthSlot" VALUE="Variables.ContentDetails:Composition:Total"/>
	<INPUT TYPE="text" NAME="Variables.AssetType:Composition:Counters.nthSlot:slot" VALUE="" REPLACEALL="Counters.nthSlot,Variables.AssetType"/>
	<XLAT.LOOKUP KEY="dvin/Common/AddNewSlot" VARNAME="addNewSlot"/>
	&nbsp;<INPUT TYPE="button" NAME="addNewSlot" VALUE="Variables.addNewSlot" onClick="Fixpagename('Variables.ThisPage', 'ContentFormSlots')" REPLACEALL="Variables.ThisPage,Variables.addNewSlot"/>
	<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:0:site" VALUE="SessionVariables.PublicationName" REPLACEALL="SessionVariables.PublicationName,Variables.AssetType,Counters.nthSlot,Counters.nthContext"/>
	</td>
</tr>

<XLAT.LOOKUP KEY="dvin/Common/AddNewArgument" VARNAME="addNewArg"/>
<!--<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacerBar"/>-->
<SETCOUNTER NAME="nthSlot" VALUE="0"/>
<if COND="Variables.ContentDetails:Composition:Total!=0">
<then>
	<LOOP COUNT="Variables.ContentDetails:Composition:Total">
		<setvar NAME="numMembers" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Total"/>
		<tr>
		<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/Slotname"/>:</td>
		<td></td>
		<td class="form-inset">
			<setvar NAME="slotname" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:slot"/>
			<INPUT TYPE="text" NAME="Variables.AssetType:Composition:Counters.nthSlot:slot" VALUE="Variables.slotname" REPLACEALL="Variables.slotname,Counters.nthSlot,Variables.AssetType"/>
		</td>
		</tr>
		 		
 		<tr>
		<td class="form-label-text"></td>
		<td></td>
		<td class="form-inset">
			<table BORDER="0" CELLSPACING="0" CELLPADDING="0">
	 		<if COND="Variables.numMembers!=0">
			<then>
				<SETCOUNTER NAME="nthContext" VALUE="0"/>
				<LOOP COUNT="Variables.numMembers">							 
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/Site"/>:</td>
						<td></td>
						<td class="form-inset" ALIGN="LEFT" NOWRAP="NOWRAP">
           			<DIV class="small-text-inset">
           				<setvar NAME="site" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:site"/>
							<STRING.STREAM VALUE="Variables.site"/>
							<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:site" VALUE="Variables.site" REPLACEALL="Variables.site,Variables.AssetType,Counters.nthSlot,Counters.nthContext"/>
						</DIV>
						</td>
					</tr>
					
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/context"/>:</td>
						<td></td>
						<td class="form-inset" ALIGN="LEFT" NOWRAP="NOWRAP">
              			<DIV class="small-text-inset">
              				<setvar NAME="value" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:context"/>
								<if COND="Variables.site=SessionVariables.PublicationName">
								<then>
									<INPUT TYPE="text" SIZE="45" MAXLENGTH="255" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:context" VALUE="Variables.value" REPLACEALL="Variables.AssetType,Variables.value,Counters.nthSlot,Counters.nthContext"/>	
								</then>
								<else>
									<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:context" VALUE="Variables.value" REPLACEALL="Variables.AssetType,Variables.value,Counters.nthSlot,Counters.nthContext"/>	
									<STRING.STREAM VALUE="Variables.value"/>
								</else>
								</if>
							</DIV>
						</td>
					</tr>

					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/UI/Template"/>:</td>
						<td></td>
						<td class="form-inset" ALIGN="LEFT" NOWRAP="NOWRAP">
           			<DIV class="small-text-inset">
           				<setvar NAME="value" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:tname"/>
           				<if COND="Variables.site=SessionVariables.PublicationName">
           				<then>
           					<SELECT NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:tname" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext">
           						<OPTION VALUE=""/>
           						<IF COND="IsList.mytemplatenames=true">
           						<THEN>
	           						<LOOP LIST="mytemplatenames">
	           							<if COND="mytemplatenames.tname=Variables.value">
	           							<then>
	           								<OPTION VALUE="mytemplatenames.tname" SELECTED="true" REPLACEALL="mytemplatenames.tname"/><STRING.STREAM VALUE="mytemplatenames.name"/>
	          							</then>
	          							<else>
	              							<OPTION VALUE="mytemplatenames.tname" REPLACEALL="mytemplatenames.tname"/><STRING.STREAM VALUE="mytemplatenames.name"/>
											</else>
											</if>
	           						</LOOP>
									</THEN>
									</IF>
           					</SELECT>
           				</then>
           				<else>
								<STRING.STREAM VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:tname"/>
								<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:tname" VALUE="Variables.value" REPLACEALL="Variables.value,Variables.AssetType,Counters.nthSlot,Counters.nthContext"/>
							</else>
							</if>
						</DIV>
						</td>
					</tr>
					
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/Variant"/>:</td>
						<td></td>
						<td class="form-inset" ALIGN="LEFT" NOWRAP="NOWRAP">
              			<DIV class="small-text-inset">
              				<setvar NAME="value" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:theme"/>
								<if COND="Variables.site=SessionVariables.PublicationName">
								<then>
									<INPUT TYPE="text" SIZE="45" MAXLENGTH="255" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:theme" VALUE="Variables.value" REPLACEALL="Variables.AssetType,Variables.value,Counters.nthSlot,Counters.nthContext"/>	
								</then>
								<else>
									<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:theme" VALUE="Variables.value" REPLACEALL="Variables.AssetType,Variables.value,Counters.nthSlot,Counters.nthContext"/>	
									<STRING.STREAM VALUE="Variables.value"/>
								</else>
								</if>
							</DIV>
						</td>
					</tr>

					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/AssetType"/>:</td>
						<td></td>
						<td class="form-inset" ALIGN="LEFT" NOWRAP="NOWRAP">
           			<DIV class="small-text-inset">
       					<setvar NAME="value" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:assettype"/>
           				<if COND="Variables.site=SessionVariables.PublicationName">
           				<then>
           					<SELECT NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:assettype" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext">
           						<OPTION VALUE=""/>
          						<IF COND="IsList.myassettypes=true">
           						<THEN>
           						<IF COND="myassettypes.#numRows!=0">
           						<THEN>
	           						<LOOP LIST="myassettypes">
	           							<if COND="myassettypes.subtype=Variables.value">
	           							<then>
	           								<OPTION VALUE="myassettypes.subtype" SELECTED="true" REPLACEALL="myassettypes.subtype"/><STRING.STREAM VALUE="myassettypes.description"/>
	           							</then>
	           							<else>
	           								<OPTION VALUE="myassettypes.subtype" REPLACEALL="myassettypes.subtype"/><STRING.STREAM VALUE="myassettypes.description"/>
	           							</else>
	           							</if>
	           						</LOOP>
									</THEN>
									</IF>
									</THEN>
									</IF>
           					</SELECT>
           				</then>
           				<else>
           					<ASSETTYPE.LIST LIST="at" FIELD1="assettype" VALUE1="Variables.value"/>
           					<if COND="at.#numRows=1">
           					<then>
           						<STRING.STREAM VALUE="at.description"/>
           					</then>
           					</if>
								<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:assettype" VALUE="Variables.value" REPLACEALL="Variables.value,Variables.AssetType,Counters.nthSlot,Counters.nthContext"/>
							</else>
							</if>
						</DIV>
						</td>
					</tr>
					
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/UI/Admin/Assetlcid"/>:</td>
						<td><br /></td>
						<td class="form-inset" ALIGN="LEFT">
           			<DIV class="small-text-inset">
           				<setvar NAME="assetid" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:assetid"/>
							<if COND="Variables.assetid!=Variables.empty">
							<then>
								<setvar NAME="assettype" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:assettype"/>
								<ASSET.LIST TYPE="Variables.assettype" FIELD1="id" VALUE1="Variables.assetid" LIST="assetlist"/>
								<if COND="assetlist.#numRows=1">
								<then>
									<STRING.STREAM VALUE="assetlist.name"/>
 								</then>
								</if>
								<if COND="Variables.site=SessionVariables.PublicationName">
								<then>
									<INPUT TYPE="text" SIZE="14" MAXSIZE="30" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:assetid" VALUE="Variables.assetid" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext,Variables.assetid"/>
								</then>
								</if>
							</then>
							<else>
								<if COND="Variables.site=SessionVariables.PublicationName">
								<then>
									<INPUT TYPE="text" SIZE="14" MAXSIZE="30" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:assetid" VALUE="" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext"/>
								</then>
								</if>
							</else>
							</if>
						</DIV>
						</td>
					</tr>
					
					<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
					<tr>
						<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/Arguments"/>:</td>
						<td></td>
						<td class="form-inset" ALIGN="LEFT" NOWRAP="NOWRAP">
           			<DIV class="small-text-inset">
							<SETCOUNTER NAME="nthArg" VALUE="0"/>
							<setvar NAME="numArgs" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Total"/>
								<if COND="Variables.numArgs!=0">
								<then>
									<LOOP COUNT="Variables.numArgs">
		             				<if COND="Variables.site=SessionVariables.PublicationName">
		              				<then>
		              					<setvar NAME="targname" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Counters.nthArg:name"/>
		              					<setvar NAME="targvalue" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Counters.nthArg:value"/>
											<INPUT TYPE="text" SIZE="10" MAXSIZE="32" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Counters.nthArg:name" VALUE="Variables.targname" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext,Counters.nthArg,Variables.targname"/>=
											<INPUT TYPE="text" SIZE="15" MAXSIZE="255" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Counters.nthArg:value" VALUE="Variables.targvalue" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext,Counters.nthArg,Variables.targvalue"/><br/>
		              				</then>
		              				<else>
		              					<setvar NAME="targname" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Counters.nthArg:name"/>
		              					<setvar NAME="targvalue" VALUE="Variables.ContentDetails:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Counters.nthArg:value"/>
											<STRING.STREAM VALUE="Variables.targname"/>=
											<STRING.STREAM VALUE="Variables.targvalue"/><br/>												
											<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Counters.nthArg:name" VALUE="Variables.targname" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext,Counters.nthArg,Variables.targname"/>
											<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Counters.nthArg:value" VALUE="Variables.targvalue" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext,Counters.nthArg,Variables.targvalue"/>
										</else>
										</if>
										<INCCOUNTER NAME="nthArg" VALUE="1"/>
									</LOOP>
								</then>
								</if>
								<!-- for adding additional arguments -->
             				<if COND="Variables.site=SessionVariables.PublicationName">
              				<then>
									<INPUT TYPE="text" SIZE="10" MAXSIZE="32" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Counters.nthArg:name" VALUE="" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext,Counters.nthArg"/>=
									<INPUT TYPE="text" SIZE="15" MAXSIZE="255" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Counters.nthArg:value" VALUE="" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext,Counters.nthArg"/>
									&nbsp;<INPUT TYPE="button" NAME="addNewArg" VALUE="Variables.addNewArg" onClick="Fixpagename('Variables.ThisPage', 'ContentFormSlots')" REPLACEALL="Variables.ThisPage,Variables.addNewArg"/>
								</then>
								</if>
								<INCCOUNTER NAME="nthArg" VALUE="1"/>
								<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Counters.nthContext:targs:Total" VALUE="Counters.nthArg" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext,Counters.nthArg"/>									
							</DIV>
							</td>
						</tr>
						
						<!--<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacerBar"/>-->
						<INCCOUNTER NAME="nthContext" VALUE="1"/>
					</LOOP>
				</then>
				</if>
		</table>
		</td>
	</tr>
	
	<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Total" VALUE="Counters.nthContext" REPLACEALL="Variables.AssetType,Counters.nthSlot,Counters.nthContext"/>									
	<INCCOUNTER NAME="nthSlot" VALUE="1"/>
	</LOOP>
</then>
</if>

<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Counters.nthSlot:members:Total" VALUE="1" REPLACEALL="Variables.AssetType,Counters.nthSlot"/>									
<INCCOUNTER NAME="nthSlot" VALUE="1"/>
<INPUT TYPE="hidden" NAME="Variables.AssetType:Composition:Total" VALUE="Counters.nthSlot" REPLACEALL="Counters.nthSlot,Variables.AssetType"/>


</FTCS>