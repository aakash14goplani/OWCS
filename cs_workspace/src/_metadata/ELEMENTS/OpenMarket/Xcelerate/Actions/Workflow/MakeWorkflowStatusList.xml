<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">

<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/XcelerateB/install/Xcelerate/Populate/ElementCatalog/OpenMarket/Xcelerate/Actions/Workflow/MakeWorkflowStatusList.xml $ 
$Revision: 40 $ 
$Modtime: 5/22/02 1:05p $ 
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- MakeWorkflowStatusList.xml
-
- DESCRIPTION
-	get the list of statuses, and display legal values
-
- HISTORY 
-->
	
<setvar NAME="hasstatus" VALUE="false"/>

<WorkflowAssignment.GetAssignedUserRole NAME="workflow_assignmentsCounters.currentAssignment" VARNAME="assignrole"/>
<!-- for each ACL, find the routes in the routes table -->
<if COND="IsVariable.assignrole=true">
<then>
	<WorkflowEngine.GetLegalNextWorkflowSteps OBJECT="workflowasset" ROLE="Variables.assignrole" SITE="SessionVariables.pubid" PREFIX="workflow_nextsteps" />
</then>
<else>
	<WorkflowEngine.GetLegalNextWorkflowSteps OBJECT="workflowasset" SITE="SessionVariables.pubid" PREFIX="workflow_nextsteps" />
</else>
</if>
<if COND="Variables.workflow_nextstepsTotal!=0">
<then>
	<TR>
		<TD class="form-label-text" align="right" valign="top">
				<!--Use description instead of name for assettype-->
				<ASSETTYPE.LOAD NAME="type" TYPE="Variables.AssetType"/>
				<ASSETTYPE.GET NAME="type" FIELD="description" OUTPUT="ATdesc"/>
				<if COND="Variables.assignment_status=active">
				<then>
					<setvar NAME="titletext" VALUE="Finish"/>
				</then>
				<else>
					<setvar NAME="titletext" VALUE="Re-vote"/>
				</else>
				</if>
				<span>
					<STRING.STREAM VALUE="Variables.titletext Assignment"/>
				</span>
		</TD>
		<TD class="form-inset">	 	
			<if COND="IsVariable.assignrole=true">
			<then>
				<STRING.STREAM VALUE=" Variables.ATdesc: Variables.assetname (Variables.assignrole)"/>
			</then>
			<else>
				<STRING.STREAM VALUE=" Variables.ATdesc: Variables.assetname"/>
			</else>
			</if>
		</TD>
	</TR>
			
	<TR>
		<TD class="form-label-text" ALIGN="RIGHT" VALIGN="TOP">
			<nobr><XLAT.STREAM KEY="dvin/UI/Wf/ChooseSteparrowState"/>:</nobr>
		</TD>
		<TD class="form-inset" VALIGN="TOP">
			<setcounter NAME="stepcount" VALUE="0"/>
			<loop FROM="0" COUNT="Variables.workflow_nextstepsTotal">
				<callelement NAME="OpenMarket/Xcelerate/Actions/Workflow/ShowWFStep">
					<argument NAME="workflow_route" VALUE="workflow_nextstepsCounters.stepcount"/>
				</callelement>
				<setvar NAME="hasstatus" VALUE="true"/>
				<setvar NAME="checked" VALUE="Variables.empty"/> 
				<inccounter NAME="stepcount" VALUE="1"/>
			</loop>
		</TD>
	</TR>
</then>
</if>
</FTCS>
