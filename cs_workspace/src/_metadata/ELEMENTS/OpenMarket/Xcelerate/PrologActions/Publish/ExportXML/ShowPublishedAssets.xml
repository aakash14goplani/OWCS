<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.2">
<!-- OpenMarket/Xcelerate/PrologActions/Publish/ExportXML/ShowPublishedAssets
-
- INPUT
- Variables.output - the publish output file
- OUTPUT
-
-->
<!-- Mirror publish output -->		     
 <STRINGLIST NAME="strlist1" STR="Variables.output" DELIM="%0a"/>
 <if COND="strlist1.#numRows!=0">
 <then>
		<!-- expecting string '#exporting Article,100000000 ' on each line-->
		<LISTOBJECT.CREATE NAME="listobject" COLUMNS="assetid,assettype" />
 		<LOOP LIST="strlist1">
 			<BEGINS STR="strlist1.ITEM" WHAT="#exporting"/>
 			<if COND="Variables.errno=1">
 			<then>
 				<STRINGLIST NAME="strlist2" STR="strlist1.ITEM" DELIM="%20"/>
	 	      <GOTOROW LIST="strlist2" ROWNUM="2"/>
		      <setvar NAME="assettype" VALUE="strlist2.ITEM"/>
		      <GOTOROW LIST="strlist2" ROWNUM="3"/>
		      <setvar NAME="assetid" VALUE="strlist2.ITEM"/>
	 	    	<LISTOBJECT.ADDROW NAME="listobject"
			        assetid="Variables.assetid"
			        assettype="Variables.assettype" />
		   </then>
		   <else>
		   	<STRING.STREAM VALUE="strlist1.ITEM"/><br/>
		   </else>
		   </if>
		</LOOP>
		<LISTOBJECT.TOLIST NAME="listobject" LISTVARNAME="assetlist" />
		<if COND="assetlist.#numRows!=0">
		<then>
     		<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/AssetMgt/TileMixedAssets">
				<ARGUMENT NAME="list" VALUE="assetlist"/>
				<ARGUMENT NAME="target" VALUE="Variables.pubtgt:id"/>
				<ARGUMENT NAME="targetname" VALUE="Variables.pubtgt:name"/>
			</CALLELEMENT>
		</then>
		</if>						
 </then>
 <else>
 	<STRING.STREAM VALUE="Variables.output"/>
 </else>
 </if> 

</FTCS> 
