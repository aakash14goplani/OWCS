<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">
<!-- 
$Logfile: /VerticalApps/Xcelerate36/install/Populate/ElementCatalog/OpenMarket/Xcelerate/PrologActions/NewContentPost.xml $ 
$Revision: 16 $ 
$Modtime: 3/02/01 6:00p $ 
-->

<!--
- Confidential and Proprietary Information of FutureTense Inc.
-					All Rights Reserved.
-
- NewContentPost.xml
-
- INPUT
-	Variables.id
-	Variables.AssetType
-  Variables.upcommand - cancel or submit
-  if copying an asset - Variables.EditFlag=copy, Variables.Copyid and Variables.CopyAssetType
-->

<!-- if we are copying the asset, make sure we still have access permisions -->
 <IF COND="Variables.EditFlag=copy">
 <THEN>
		<ASSET.LOAD TYPE="Variables.CopyAssetType" OBJECTID="Variables.Copyid" NAME="theSourceAsset"/>
		<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Workflow/CheckPrivs">
		    <ARGUMENT NAME="AssetType" VALUE="Variables.AssetType"/>
    		<ARGUMENT NAME="assetObjectName" VALUE="theSourceAsset"/>
    		<ARGUMENT NAME="Function" VALUE="copy"/>
		</CALLELEMENT>
		<IF COND="Variables.PrivsFailed=true">
		<THEN>
			<CALLELEMENT NAME="OpenMarket/Xcelerate/Actions/Util/ShowError">
				<ARGUMENT NAME="error" VALUE="Variables.PrivsFailedReason"/>
			</CALLELEMENT>
			<SETVAR NAME="hasError" VALUE="true"/>
			<SETVAR NAME="errorAlreadyDisplayed" VALUE="true"/>
			<SETVAR NAME="upcommand" VALUE="cancel"/>
		</THEN>
		</IF>
 </THEN>
 </IF>
 
</FTCS>

