<?xml version="1.0" ?>
<!DOCTYPE ftcs SYSTEM "futuretense_cs.dtd">
<ftcs version="1.2">
<!-- getFiltersForAssetDef
-
- INPUT
-
- OUTPUT
-
-->
	<IF COND="Variables.ContentDetails:Filters:Total!=0">
	<THEN>
		<!-- New/Alloy/CS7 UI requires that we create another list to store the output, this list will store the sorted results -->
		<LISTOBJECT.CREATE NAME="tempList" COLUMNS="id,name,filterClass"/>
		
		<!-- this may not be needed becase I'm calling AssocAttrDetails -->
		<!-- SETVAR NAME="tablename" VALUE="FlexTmplTypes"/>
		<EXECSQL SQL="SELECT assetfilter FROM Variables.tablename WHERE assettype='Variables.AssetType'" LIST="flextmpltypes"/>
		<SETVAR NAME="filtertype" VALUE="flextmpltypes.assetfilter"/ -->
			<SETCOUNTER NAME="currentFilter" VALUE="0"/>
			<LOOP COUNT="Variables.ContentDetails:Filters:Total">
	          <!-- create temp variable to order this by ordinal -->
	          <SETCOUNTER NAME="sortOrd" VALUE="0"/>
	          <SETCOUNTER NAME="sortKey" VALUE="Counters.currentFilter"/>
	          <INCCOUNTER NAME="sortKey" VALUE="1"/>
	          <LOOP COUNT="Variables.ContentDetails:Filters:Total">
	              <SETVAR NAME="findkey" VALUE="Variables.ContentDetails:Filters:Counters.sortOrd:ordinal"/>
	              <IF COND="Variables.findkey=Counters.sortKey">
	                  <THEN>
	                      <SETVAR NAME="skey" VALUE="Counters.sortOrd"/>
	                  </THEN>
	              </IF>
	              <INCCOUNTER NAME="sortOrd" VALUE="1"/>
	          </LOOP>
	          <ASSET.LIST TYPE="Variables.filtertype" LIST="currentFilter" FIELD1="id" VALUE1="Variables.ContentDetails:Filters:Variables.skey:filter"/>
				<ICS.LISTGET LISTNAME="currentFilter" FIELDNAME="name" OUTPUT="filtername" />
				<ICS.LISTGET LISTNAME="currentFilter" FIELDNAME="class" OUTPUT="filterClassName" />
				<LISTOBJECT.ADDROW NAME="tempList" id="Variables.ContentDetails:Filters:Variables.skey:filter" name="Variables.filtername" filterClass="Variables.filterClassName"/>
				<INCCOUNTER NAME="currentFilter" VALUE="1"/>
			</LOOP>
		<LISTOBJECT.TOLIST NAME="tempList" LISTVARNAME="ListofFilters"/>
	</THEN>	
	</IF>
</ftcs>