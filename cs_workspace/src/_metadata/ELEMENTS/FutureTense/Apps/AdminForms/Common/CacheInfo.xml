<?XML VERSION="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.1">

<IF COND="IsVariable.cacheinfo=false">
     <THEN>
          <SETVAR NAME="cacheinfo" VALUE="Variables.empty"/>
     </THEN>
</IF>
<REPLACE STR="CS.SQLDate">
<SCRIPT Language="Javascript">
	var cacheinfo = "<STRING.STREAM VALUE="Variables.cacheinfo"/>";

<![CDATA[
	if (!cacheinfo)
		cacheinfo = "";

	var locationString = "";
	var locationOption = 0;
	var expirationString = "";
	var expirationOption = 0;
	var hostString = "";

	// first, parse out the location string
	var charposition= cacheinfo.indexOf(",");
	if (charposition == -1)
	{
		locationString = cacheinfo;
		cacheinfo = null;
	}
	else
	{
		locationString = cacheinfo.substring(0,charposition);
		cacheinfo = cacheinfo.substring(charposition+1,cacheinfo.length);
	}

	if (locationString == "")
		locationOption = 0;
	else if (locationString == "CS.NEVERCACHE")
		locationOption = 1;
	else if (locationString == "*")
		locationOption = 2;
	else
		locationOption = 3;

	// if there is more
	if (cacheinfo)
	{
		// parse out the expiration
		charposition = cacheinfo.indexOf(",");
		if (charposition == -1)
		{
			expirationString = cacheinfo;
			cacheinfo = null;
		}
		else
		{
			expirationString = cacheinfo.substring(0,charposition);
			cacheinfo = cacheinfo.substring(charposition+1,cacheinfo.length);
		}
		if (expirationString.substring(0,1) == "~")
		{
			expirationOption = 1;
			expirationString = expirationString.substring(1,expirationString.length);
		}
		else if (expirationString.substring(0,1) == "@")
		{
			expirationOption = 2;
			expirationString = expirationString.substring(1,expirationString.length);
		}

		// if there is more
		if (cacheinfo)
		{
			if(locationOption != 1)
				hostString = cacheinfo;
		}
	}
]]>
</SCRIPT>

<!-- Element for displaying the Cacheinfo group of input fields -->


<INPUT TYPE="hidden" NAME="cacheinfo" VALUE="Variables.cacheinfo" REPLACEALL="Variables.cacheinfo"/>
	<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
	<TR>
		<TD class="form-label-text" VALIGN="BASELINE">
			<XLAT.STREAM KEY="dvin/AdminForms/Location"/>
		</TD>
		<TD class="form-inset">
				<SCRIPT Language="Javascript">
<![CDATA[
					LocationSection = '<INPUT TYPE="radio" style="margin-left:0px" NAME="locationOption" VALUE="0"';
					if (locationOption == 0)
						LocationSection += " CHECKED ";
					LocationSection += ">]]><XLAT.STREAM KEY="dvin/AdminForms/ClearCacheInformation" ENCODE="false" ESCAPE="true"/><BR/>";
<![CDATA[
					LocationSection += '<INPUT TYPE="radio" style="margin-left:0px" NAME="locationOption" VALUE="1"';
					if (locationOption == 1)
						LocationSection += " CHECKED ";
					LocationSection += ">]]><XLAT.STREAM KEY="dvin/AdminForms/NeverCachePage" ENCODE="false" ESCAPE="true"/><BR/>";
<![CDATA[
					LocationSection += '<INPUT TYPE="radio" style="margin-left:0px" NAME="locationOption" VALUE="2"';
					if (locationOption == 2)
						LocationSection += " CHECKED ";
					LocationSection += ">]]><XLAT.STREAM KEY="dvin/AdminForms/CacheToSystemDefaultLocation" ENCODE="false" ESCAPE="true"/><BR/>";
<![CDATA[
					LocationSection += '<INPUT TYPE="radio" style="margin-left:0px" NAME="locationOption" VALUE="3"';
					if (locationOption == 3)
						LocationSection += " CHECKED ";
					LocationSection += ">]]><XLAT.STREAM KEY="dvin/AdminForms/CacheLocationProperty" ENCODE="false" ESCAPE="true"/> ";
<![CDATA[
					LocationSection += '<INPUT NAME="location" TYPE="text" SIZE=15 VALUE="';
					if (locationOption == 3)
						LocationSection += locationString;
					LocationSection += '"><BR/>';
					LocationSection += '<FONT FACE="Arial, Helvetica" SIZE="-2" COLOR="#6666cc">]]><XLAT.STREAM KEY="dvin/AdminForms/(e.g.cs.pagecachefolder)" ENCODE="false"  ESCAPE="true"/><![CDATA[</FONT><BR/>';

					document.writeln(LocationSection);]]>
				</SCRIPT>
		</TD>
		<TD><BR/></TD>
	</TR>
	<CALLELEMENT NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
	<TR>
		<TD class="form-label-text" VALIGN="BASELINE">
			<XLAT.STREAM KEY="dvin/AdminForms/Expiration"/>
		</TD>
		<TD class="form-inset">
			<SCRIPT Language="Javascript">
<![CDATA[
					ExpirationSection = '<INPUT TYPE="radio" style="margin-left:0px" NAME="expirationOption" VALUE="0"';
					if (expirationOption == 0)
						ExpirationSection += " CHECKED ";
					ExpirationSection += ">]]><XLAT.STREAM KEY="dvin/AdminForms/UseSystemDefaultExpiration" ENCODE="false" ESCAPE="true"/><BR/>";
<![CDATA[
					ExpirationSection += '<INPUT TYPE="radio" style="margin-left:0px" NAME="expirationOption" VALUE="1"';
					if (expirationOption == 1)
						ExpirationSection += " CHECKED ";
					ExpirationSection += ">]]><XLAT.STREAM KEY="dvin/AdminForms/ExpireCachedPageEvery" ENCODE="false" ESCAPE="true"/><BR/>";
<![CDATA[
					ExpirationSection += '<INPUT TYPE="text" NAME="expireMinutes" SIZE=4 MAXLENGTH=4 VALUE="';
					if (expirationOption == 1)
						ExpirationSection += expirationString;
					else
						ExpirationSection += '5';
					ExpirationSection += '">]]><XLAT.STREAM KEY="dvin/AdminForms/minutes" ENCODE="false" ESCAPE="true"/><BR/>';
<![CDATA[
					ExpirationSection += '<INPUT TYPE="radio" style="margin-left:0px" NAME="expirationOption" VALUE="2"';
					if (expirationOption == 2)
						ExpirationSection += " CHECKED ";
					ExpirationSection += ">]]><XLAT.STREAM KEY="dvin/AdminForms/ExpireAt" ENCODE="false" ESCAPE="true"/> ";
<![CDATA[
					ExpirationSection +='<INPUT TYPE="text" NAME="expireTimestamp" SIZE=20 MAXLENGTH=19 VALUE="';
					if (expirationOption == 2)
						ExpirationSection += expirationString;
					else
						ExpirationSection += 'CS.SQLDate'
					ExpirationSection += '"><BR/>';
					ExpirationSection += '<FONT FACE="Arial, Helvetica" SIZE="-2" COLOR="#6666cc">]]><XLAT.STREAM KEY="dvin/AdminForms/e.g." ENCODE="false" ESCAPE="true"/>(CS.SQLDate)<![CDATA[</FONT><BR/>';
					document.writeln(ExpirationSection);

					HostSection = '<INPUT TYPE="hidden" NAME="hostMachine" VALUE="';
					HostSection +=hostString;
					HostSection += '">';
					document.writeln(HostSection);]]>
			</SCRIPT>
		</TD>
		<TD><BR/></TD>
	</TR>
</REPLACE>
</FTCS>